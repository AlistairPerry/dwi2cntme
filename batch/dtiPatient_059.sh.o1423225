dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/dwipreproc_cust-tmp-MPE8CA/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/dwipreproc_cust-tmp-MPE8CA/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/dwipreproc_cust-tmp-MPE8CA/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/dwipreproc_cust-tmp-MPE8CA/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/dwipreproc_cust-tmp-MPE8CA/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 103[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
          0           0           0           0
   0.999999  0.00100536  0.00100502        3000
 -0.0257029   -0.746592    0.664785        3000
 0.00334839    0.519957   -0.854186        3000
  -0.272005    0.829625    0.487582        3000
   0.650494    0.408496    0.640304        3000
  -0.507976    0.258135   -0.821783        3000
  -0.959145    0.281669  -0.0265134        3000
  -0.534163    0.384138    0.753065        3000
   0.316405    0.137206    0.938649        3000
          0           0           0           0
  -0.505779   -0.592714    0.626799        3000
   -0.60062   0.0990153     0.79338        3000
   0.954503   -0.157059    0.253487        3000
   0.526309   -0.744824   -0.410166        3000
  -0.193451    -0.92384   -0.330297        3000
   0.364631    0.925459    0.102805        3000
   -0.25885    0.931738   -0.254677        3000
  -0.023097     0.51346    0.857803        3000
   0.613499    0.788646   0.0406972        3000
          0           0           0           0
  -0.873168    0.033253   -0.486284        3000
   0.743765   -0.234187   -0.626075        3000
  -0.487578    0.678547   -0.549401        3000
   0.450752   -0.891475   0.0457744        3000
    0.66295   -0.433217    0.610591        3000
   0.852972     0.24091    0.463034        3000
   0.439323   -0.508193    0.740767        3000
  -0.958381   -0.140863    0.248321        3000
   0.703605   -0.596307    0.386468        3000
          0           0           0           0
   0.387529   -0.184284    -0.90325        3000
  -0.142317    -0.68388   -0.715579        3000
   0.801852   -0.596846  -0.0284326        3000
   0.288233    -0.13307    0.948269        3000
  -0.962808   -0.132501   -0.235465        3000
   0.151067     -0.6989   -0.699083        3000
  0.0170365   -0.983642    0.179327        3000
   0.375689   -0.896764   -0.233821        3000
  -0.667907    0.729699   -0.146422        3000
          0           0           0           0
    0.29041   -0.469173    -0.83399        3000
   0.722549    -0.15918    0.672744        3000
  -0.715029   -0.661217   -0.226992        3000
  -0.427445   -0.584008   -0.690091        3000
  -0.958621   -0.284236   0.0159869        3000
  -0.492854   -0.300097   -0.816723        3000
   0.893106    0.401782     0.20232        3000
  -0.202485    0.978629   0.0358355        3000
   0.230744    0.966795   -0.109839        3000
          0           0           0           0
  -0.737654    0.600081    0.309467        3000
  -0.843262    0.339664    0.416578        3000
   -0.10461   -0.287963   -0.951911        3000
  -0.239314    0.401138   -0.884204        2950
  -0.612136    0.778658    0.137769        3000
   0.266127    0.460429    0.846865        3000
    0.65742    -0.51649   -0.548669        3000
  -0.257007   -0.896629     0.36056        3000
   0.249037    -0.82223    0.511779        3000
          0           0           0           0
   0.571392    0.661465    0.485773        3000
   0.021935   -0.244825    0.969319        3000
   0.224919    0.317394   -0.921234        2950
  -0.838051      0.3242   -0.438822        3000
  -0.861018    0.466335   -0.202928        3000
   0.487646   -0.811368    0.322309        3000
  -0.105654    0.946203    0.305837        3000
   0.542306   0.0137739    0.840068        3000
  -0.250761   -0.578498    0.776182        3000
          0           0           0           0
  -0.229108  -0.0409885    0.972538        3000
  -0.215405    0.654796    -0.72446        3000
   0.961235   -0.149335   -0.231792        3000
   0.310629    0.790506    0.527835        3000
  -0.871132   -0.430527    0.236169        3000
   0.846367    0.265282   -0.461832        3000
    0.89316    -0.41263    -0.17889        3000
  -0.703695   -0.679281    0.208303        3000
  -0.668014    -0.35232     0.65546        3000
          0           0           0           0
   0.517694    0.750814   -0.410209        3000
  -0.719592   -0.138221   -0.680502        3000
 -0.0406604  -0.0245232   -0.998872        3000
   0.826878     0.56237  0.00361531        3000
   0.454071     0.38765   -0.802214        3000
  -0.879835   0.0391618    0.473663        3000
  -0.148548    0.250057    0.956768        3000
  -0.766706   -0.487051   -0.418261        3000
  -0.479753   -0.129937    0.867729        3000
          0           0           0           0
   0.718673    0.534057   -0.445301        3000
  -0.481179   -0.821468   -0.306034        3000
   0.282403    0.763674   -0.580561        3000
  0.0173656    0.848637     0.52869        3000
 -0.0655039   -0.992787   -0.100418        3000
  -0.420755    0.636325    0.646572        3000
   0.734337   0.0936003   -0.672301        3000
-0.00044815    0.898083   -0.439826        3000
  -0.476045   -0.862767    0.170335        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/dwipreproc_cust-tmp-MPE8CA/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-VBNZSF/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-VBNZSF/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-VBNZSF/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-VBNZSF/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-VBNZSF/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=2998.89 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=2998.89 shell.
Error: cannot find image T1.nii
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-ZLH7IF/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-ZLH7IF/parc.mif
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc)[0m
labelsgmfix: [00;31mScript failed while executing the command: mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-ZLH7IF/parc.mif[0m
labelsgmfix: [00;31mFor debugging, inspect contents of temporary directory: /tmp/labelsgmfix-tmp-ZLH7IF/[0m
ERROR: cannot find Patient_059 in /working/lab_michaebr/alistaiP/Park/FS
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-M0AUX9/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/biascorr.mif /tmp/dwi2response-tmp-M0AUX9/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-M0AUX9/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-M0AUX9/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,2999 with 13,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 2999 dwi_b2999.mif
[03;34mCommand:[0m mrmath dwi_b2999.mif mean mean_b2999.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b2999.mif -finite mean_b2999.mif 0 -if 0 -le err_b2999.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b2999.mif -divide -log sdm_b2999.mif
[03;34mCommand:[0m mrcalc sdm_b2999.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b2999.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.49051 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.70549 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 2.5216 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 2.00134 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 2.00134 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 2.00134 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.95147 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.95147 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 618 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 618 -iter_voxels 6180 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-M0AUX9/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.97963 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 740 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 740 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 4020 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 405676 --> 334016 --> 333965[0m
dwi2response: [03;32mWM: 135987 --> 123574 --> 618 (SF)[0m
dwi2response: [03;32mGM: 123273 --> 74015 --> 1480[0m
dwi2response: [03;32mCSF: 74705 --> 40198 --> 4020[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b2999.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb2999.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_059/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-M0AUX9/[0m
