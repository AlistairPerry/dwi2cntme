dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/dwipreproc_cust-tmp-4IGPKQ/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/dwipreproc_cust-tmp-4IGPKQ/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/dwipreproc_cust-tmp-4IGPKQ/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/dwipreproc_cust-tmp-4IGPKQ/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/dwipreproc_cust-tmp-4IGPKQ/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 102[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
  -0.999991  0.00267842  0.00334752        3000
  0.0272193   -0.744181   -0.667423        3000
-0.00493775    0.517416    0.855719        3000
    0.27244    0.827845   -0.490356        3000
  -0.651469    0.404557   -0.641811        3000
   0.507003    0.261124    0.821439        3000
    0.95939    0.280381   0.0309341        3000
    0.53468    0.380058   -0.754767        3000
  -0.316929    0.132893   -0.939093        3000
          0           0           0           0
   0.505636   -0.590132   -0.629346        3000
   0.600976   0.0894295   -0.794248        3000
   -0.95377   -0.155279   -0.257316        3000
  -0.527759   -0.742253    0.412954        3000
   0.194315   -0.924791    0.327113        3000
  -0.365335    0.925679  -0.0982311        3000
   0.259002    0.930503    0.259002        3000
  0.0231859    0.510057   -0.859828        3000
  -0.614425    0.788388  -0.0304295        3000
          0           0           0           0
   0.872755   0.0320211    0.487107        3000
  -0.743691   -0.229774    0.627796        3000
   0.487403    0.676183    0.552462        3000
  -0.451121   -0.891053  -0.0501325        3000
  -0.661913   -0.430991   -0.613285        3000
  -0.853612    0.236656   -0.464048        3000
  -0.438675   -0.505591   -0.742928        3000
   0.957608   -0.139673   -0.251948        3000
  -0.703176   -0.594404   -0.390163        3000
          0           0           0           0
  -0.387165   -0.179907    0.904288        3000
   0.143284   -0.680685    0.718427        3000
  -0.802939   -0.595779    0.018365        3000
  -0.288276    -0.13662   -0.947751        3000
   0.963082   -0.128231    0.236708        3000
  -0.151336   -0.695745    0.702165        3000
 -0.0165892   -0.982916   -0.183307        3000
  -0.376881   -0.897211     0.23016        3000
   0.668159    0.728581    0.150777        3000
          0           0           0           0
  -0.290495   -0.465256    0.836152        3000
  -0.721351   -0.163052   -0.673102        3000
   0.717307   -0.658054    0.228988        3000
   0.428509   -0.580424    0.692451        3000
   0.958921   -0.282497  -0.0258032        3000
   0.493403   -0.295993    0.817889        3000
  -0.894639    0.397617   -0.203769        3000
   0.203481    0.978747  -0.0254837        3000
  -0.231434    0.966113    0.114297        3000
          0           0           0           0
   0.739713    0.599507   -0.305641        3000
   0.843998    0.335749   -0.418258        3000
   0.105395   -0.283897    0.953045        3000
   0.239017     0.39889    0.885301        3000
   0.613708    0.778151   -0.133576        3000
  -0.266692    0.456656   -0.848729        3000
  -0.658449   -0.512593    0.551083        3000
   0.257428   -0.894934   -0.364449        3000
   -0.24913    -0.82017    -0.51503        3000
          0           0           0           0
  -0.573085    0.658493   -0.487811        3000
 -0.0224794   -0.248137   -0.968464        3000
  -0.224996    0.320419    0.920167        3000
    0.83688    0.322481    0.442309        3000
   0.860707    0.464957    0.207361        3000
   -0.48757   -0.809783   -0.326384        3000
   0.106354    0.947273   -0.302264        3000
  -0.542252  0.00988242   -0.840158        3000
   0.251146   -0.575987   -0.777923        3000
          0           0           0           0
   0.229344  -0.0495449   -0.972084        3000
    0.21559    0.652397    0.726566        3000
  -0.961554   -0.144552    0.233491        3000
  -0.311988    0.788263   -0.530381        3000
   0.870817   -0.428992   -0.240091        3000
  -0.844965    0.263608    0.465344        3000
  -0.894675   -0.411105    0.174786        3000
   0.703849   -0.677831   -0.212465        3000
   0.666823   -0.350276   -0.657765        3000
          0           0           0           0
  -0.517557    0.748814     0.41402        3000
   0.719678   -0.133906    0.681273        3000
  0.0410432  -0.0158204    0.999032        3000
  -0.827491    0.561436  0.00694119        3000
  -0.453207    0.385293    0.803836        3000
    0.87963   0.0295838   -0.474737        3000
   0.148464    0.246048    -0.95782        3000
   0.768151   -0.483112    0.420174        3000
   0.479512   -0.133784   -0.867278        3000
          0           0           0           0
  -0.717804     0.53198     0.44917        3000
   0.482695   -0.821921    0.302408        3000
  -0.282248    0.761217    0.583853        3000
 -0.0183568    0.846867   -0.531488        3000
  0.0664308   -0.993135    0.096285        3000
   0.421435    0.633189   -0.649203        3000
  -0.733284   0.0975636    0.672886        3000
         -0     0.89621     0.44363        3000
   0.476675   -0.861561   -0.174623        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/dwipreproc_cust-tmp-4IGPKQ/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-D5EDG2/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-D5EDG2/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-D5EDG2/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-D5EDG2/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-D5EDG2/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
3502
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-DOAAX9/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-DOAAX9/parc.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/brainFS.nii /tmp/labelsgmfix-tmp-DOAAX9/T1.nii -stride -1,+2,+3
labelsgmfix: [03;32mChanging to temporary directory (/tmp/labelsgmfix-tmp-DOAAX9/)[0m
[03;34mCommand:[0m run_first_all -s R_Thal,L_Puta,R_Caud,R_Hipp,L_Amyg,R_Pall,R_Amyg,L_Caud,L_Pall,L_Thal,L_Hipp,R_Accu,L_Accu,R_Puta -i T1.nii -b -o first
[03;34mCommand:[0m mrcalc parc.mif 0 -min sgm.mif
[03;34mCommand:[0m meshconvert first-R_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Thal_mask.mif 6 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Puta_mask.mif 3 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Caud_mask.mif 7 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Hipp_mask.mif 13 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Amyg_mask.mif 12 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Pall_mask.mif 9 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Amyg_mask.mif 14 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Caud_mask.mif 2 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Pall_mask.mif 4 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Thal_mask.mif 1 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Hipp_mask.mif 11 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Accu_mask.mif 10 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Accu_mask.mif 5 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Puta_mask.mif 8 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m mrmath R_Thal_mask.mif L_Puta_mask.mif R_Caud_mask.mif R_Hipp_mask.mif L_Amyg_mask.mif R_Pall_mask.mif R_Amyg_mask.mif L_Caud_mask.mif L_Pall_mask.mif L_Thal_mask.mif L_Hipp_mask.mif R_Accu_mask.mif L_Accu_mask.mif R_Puta_mask.mif sum - | mrcalc - 1 -gt sgm_overlap_mask.mif
[03;34mCommand:[0m mrcalc sgm_overlap_mask.mif 0 sgm.mif -if sgm_masked.mif
[03;34mCommand:[0m labelconvert sgm_masked.mif /software/mrtrix3/mrtrix3-AP/scripts/data/FreeSurferSGM.txt /software/mrtrix3/mrtrix3-AP/src/connectome/tables/fs_a2009s.txt sgm_new_labels.mif
[03;34mCommand:[0m mrcalc parc.mif 83 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 78 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 84 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 87 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 81 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 86 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 88 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 77 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 79 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 76 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 80 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 89 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 82 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 85 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc sgm_new_labels.mif 0.5 -gt sgm_new_labels.mif parc.mif -if result.mif -datatype uint32
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/parc_fixsubcort.nii
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc)[0m
labelsgmfix: [03;32mDeleting temporary directory /tmp/labelsgmfix-tmp-DOAAX9/[0m
tmp ./tmp.bbregister.26117
Log file is register.dat.log
Sat Mar 18 06:46:51 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc
/software/freesurfer/freesurfer-6.0.0/bin/bbregister --s Patient_045 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.75 2016/05/10 20:02:28 greve Exp $
Linux hpcnode030.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-6.0.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.26117/template.nii
mri_convert.bin biasmeanb0bet.nii.gz ./tmp.bbregister.26117/template.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.99159, 0.117503, -0.0542467)
j_ras = (-0.112977, 0.990366, 0.0800734)
k_ras = (0.0631329, -0.0732713, 0.995312)
writing to ./tmp.bbregister.26117/template.nii...
fslregister --s Patient_045 --mov ./tmp.bbregister.26117/template.nii --reg ./tmp.bbregister.26117/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.26117/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov

Log file is ./tmp.bbregister.26117/reg.init.dat.fslregister.log

Sat Mar 18 06:46:51 AEST 2017
--s Patient_045 --mov ./tmp.bbregister.26117/template.nii --reg ./tmp.bbregister.26117/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.26117/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov
$Id: fslregister,v 1.40 2016/02/12 21:43:15 zkaufman Exp $
hpcnode030.adqimr.ad.lan
Linux hpcnode030.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc
mri_convert /working/lab_michaebr/alistaiP/Park/FS/Patient_045/mri/brainmask.mgz ./tmp.bbregister.26117/fslregister/refvol.fslregister.nii
mri_convert.bin /working/lab_michaebr/alistaiP/Park/FS/Patient_045/mri/brainmask.mgz ./tmp.bbregister.26117/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/Park/FS/Patient_045/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 8.84756e-09, -7.45058e-09)
j_ras = (0, -7.45058e-09, -1)
k_ras = (6.98492e-09, 1, -7.45058e-09)
writing to ./tmp.bbregister.26117/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc
mri_convert ./tmp.bbregister.26117/template.nii ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii --frame 0
mri_convert.bin ./tmp.bbregister.26117/template.nii ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from ./tmp.bbregister.26117/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.99159, 0.117503, -0.0542467)
j_ras = (-0.112977, 0.990366, 0.0800734)
k_ras = (0.0631329, -0.0732713, 0.995312)
keeping frame 0
writing to ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.26117/template.nii
reg file       ./tmp.bbregister.26117/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.26117/template.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.99159  -0.11750   0.05425   1.71875;
 0.06313  -0.07327   0.99531   0.00002;
 0.11298  -0.99037  -0.08007   0.00000;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
-0.99159  -0.11750   0.05425   1.71875;
 0.06313  -0.07327   0.99531   0.00002;
 0.11298  -0.99037  -0.08007   0.00000;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.00000   0.00000   0.00000   1.71874;
 0.00000   1.00000   0.00000   0.00002;
 0.00000   0.00000   1.00000   0.00000;
 0.00000   0.00000   0.00000   1.00000;
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc
tkregister2_cmdl --mov ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.26117/fslregister/reg0.26158.dat --regheader --fslregout ./tmp.bbregister.26117/reg.init.dat.fsl.mat0 --s Patient_045 --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.26117/fslregister/reg0.26158.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_045/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.99159   0.11750  -0.05425   0.97662;
 0.06313  -0.07327   0.99531  -0.35001;
 0.11298  -0.99037  -0.08007   0.74223;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99159   0.11750  -0.05425   0.97662;
 0.06313  -0.07327   0.99531  -0.35001;
 0.11298  -0.99037  -0.08007   0.74223;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_045
RegMat ---------------------------
 0.99159   0.11750  -0.05425   0.97662;
 0.06313  -0.07327   0.99531  -0.35001;
 0.11298  -0.99037  -0.08007   0.74223;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Sat Mar 18 06:46:53 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc
flirt.fsl -ref ./tmp.bbregister.26117/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.26117/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/fsl.5.0.2.xyztrans.sch -init ./tmp.bbregister.26117/reg.init.dat.fsl.mat0
Sat Mar 18 06:47:28 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc
flirt.fsl -ref ./tmp.bbregister.26117/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.26117/reg.init.dat.fsl.mat -init ./tmp.bbregister.26117/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_045 --mov ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.26117/reg.init.dat --fslreg ./tmp.bbregister.26117/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.99165   0.11306  -0.06203   12.27220;
-0.05274  -0.08336  -0.99512   220.12399;
-0.11769   0.99008  -0.07670   39.40860;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.26117/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_045/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.26117/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.99165   0.11768  -0.05274   0.80545;
 0.06203  -0.07670   0.99512   1.20030;
 0.11307  -0.99008  -0.08336   1.52228;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99165   0.11768  -0.05274   0.80545;
 0.06203  -0.07670   0.99512   1.20030;
 0.11307  -0.99008  -0.08336   1.52228;
 0.00000   0.00000   0.00000   1.00000;
Determinant 0.999999
subject = Patient_045
RegMat ---------------------------
 0.99165   0.11768  -0.05274   0.80545;
 0.06203  -0.07670   0.99512   1.20030;
 0.11307  -0.99008  -0.08336   1.52228;
 0.00000   0.00000   0.00000   1.00000;
mri_matrix_multiply -im ./tmp.bbregister.26117/fslregister/swapreg.dat -im ./tmp.bbregister.26117/reg.init.dat -om ./tmp.bbregister.26117/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Sat Mar 18 06:46:51 AEST 2017 
Ended   at Sat Mar 18 06:48:43 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.26117/template.nii --reg ./tmp.bbregister.26117/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.26117/template.nii --init-reg ./tmp.bbregister.26117/reg.init.dat --out-reg ./tmp.bbregister.26117/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc
mri_segreg --mov ./tmp.bbregister.26117/template.nii --init-reg ./tmp.bbregister.26117/reg.init.dat --out-reg ./tmp.bbregister.26117/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode030.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.26117/template.nii
regfile ./tmp.bbregister.26117/reg.init.dat
subject Patient_045
dof 6
outregfile ./tmp.bbregister.26117/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490500131
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99165  -0.11768   0.05274   0.91329;
 0.06203  -0.07671   0.99512   1.20033;
 0.11307  -0.99008  -0.08337   1.52228;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.007624
 1  -25.0 -25.0  25.0   0.982823
 2  -25.0  25.0 -25.0   1.004789
 3  -25.0  25.0  25.0   1.009481
 4   25.0 -25.0 -25.0   0.956020
 5   25.0 -25.0  25.0   1.013513
 6   25.0  25.0 -25.0   1.013128
 7   25.0  25.0  25.0   1.011433
REL:  8  0.415097    7.998813  0.999852 rel = 0.415158 
Initial costs ----------------
Number of surface hits 2309
WM  Intensity   374.1738 +/-  88.1808
Ctx Intensity   559.4658 +/- 263.2599
Pct Contrast     31.5786 +/-  39.7390
Cost   0.4151
RelCost   0.4152

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      0.9508   0.9508  0.0
     3  -4.0000  -4.0000  -4.0000  -4.0000   0.0000  -4.0000      0.9332   0.9332  0.0
     6  -4.0000  -4.0000  -4.0000  -4.0000   4.0000  -4.0000      0.9241   0.9241  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.8761   0.8761  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.8367   0.8367  0.0
    21  -4.0000  -4.0000  -4.0000   4.0000   0.0000  -4.0000      0.8316   0.8316  0.0
    36  -4.0000  -4.0000   0.0000   0.0000  -4.0000  -4.0000      0.8202   0.8202  0.0
    39  -4.0000  -4.0000   0.0000   0.0000   0.0000  -4.0000      0.7960   0.7960  0.0
   105  -4.0000   0.0000  -4.0000   4.0000   4.0000  -4.0000      0.7909   0.7909  0.0
   120  -4.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.7134   0.7134  0.0
   274   0.0000  -4.0000   0.0000  -4.0000   0.0000   0.0000      0.6551   0.6551  0.0
   283   0.0000  -4.0000   0.0000   0.0000   0.0000   0.0000      0.5387   0.5387  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.4151   0.4151  0.0
Brute Force --------------------------
Min cost was 0.415097
Number of iterations   729
Search time 2.729000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.415097
   7 -0.157  0.000  0.000  0.000  0.000  0.000   0.4144801711
   8 -0.123  0.000  0.000  0.000  0.000  0.000   0.4136389640
   9 -0.087  0.000  0.000  0.000  0.000  0.000   0.4135518241
  12 -0.054  0.000  0.000  0.000  0.000  0.000   0.4129370378
  15 -0.053  0.000  0.000  0.000  0.000  0.000   0.4129367748
  19 -0.053 -1.618  0.000  0.000  0.000  0.000   0.1266413912
  24 -0.053 -1.849  0.000  0.000  0.000  0.000   0.1187679500
  26 -0.053 -1.823  0.000  0.000  0.000  0.000   0.1187313335
  27 -0.053 -1.833  0.000  0.000  0.000  0.000   0.1187201246
  30 -0.053 -1.835  0.000  0.000  0.000  0.000   0.1187199096
  38 -0.053 -1.835 -0.213  0.000  0.000  0.000   0.1160629284
  39 -0.053 -1.835 -0.214  0.000  0.000  0.000   0.1160599298
  40 -0.053 -1.835 -0.247  0.000  0.000  0.000   0.1160293106
  42 -0.053 -1.835 -0.238  0.000  0.000  0.000   0.1160255791
  45 -0.053 -1.835 -0.235  0.000  0.000  0.000   0.1160248845
  46 -0.053 -1.835 -0.234  0.000  0.000  0.000   0.1160248814
  56 -0.053 -1.835 -0.234 -0.101  0.000  0.000   0.1154930287
  57 -0.053 -1.835 -0.234 -0.062  0.000  0.000   0.1147086409
  58 -0.053 -1.835 -0.234 -0.057  0.000  0.000   0.1146521113
  60 -0.053 -1.835 -0.234 -0.050  0.000  0.000   0.1146187226
  61 -0.053 -1.835 -0.234 -0.048  0.000  0.000   0.1146187024
  74 -0.053 -1.835 -0.234 -0.048  0.002  0.000   0.1146098033
  76 -0.053 -1.835 -0.234 -0.048  0.004  0.000   0.1146074707
  86 -0.053 -1.835 -0.234 -0.048  0.004 -0.054   0.1139456696
  88 -0.053 -1.835 -0.234 -0.048  0.004 -0.079   0.1139293403
  89 -0.053 -1.835 -0.234 -0.048  0.004 -0.072   0.1138788616
  90 -0.053 -1.835 -0.234 -0.048  0.004 -0.067   0.1138784582
  91 -0.053 -1.835 -0.234 -0.048  0.004 -0.069   0.1138760592
  powell nthiter 1: fret = 0.113876
 103 -0.071 -1.835 -0.234 -0.048  0.004 -0.069   0.1136786495
 105 -0.067 -1.835 -0.234 -0.048  0.004 -0.069   0.1136731813
 106 -0.068 -1.835 -0.234 -0.048  0.004 -0.069   0.1136712723
 115 -0.068 -1.796 -0.234 -0.048  0.004 -0.069   0.1136465183
 116 -0.068 -1.814 -0.234 -0.048  0.004 -0.069   0.1135034305
 118 -0.068 -1.812 -0.234 -0.048  0.004 -0.069   0.1134996959
 128 -0.068 -1.812 -0.222 -0.048  0.004 -0.069   0.1134482822
 130 -0.068 -1.812 -0.224 -0.048  0.004 -0.069   0.1134407018
 142 -0.068 -1.812 -0.224 -0.085  0.004 -0.069   0.1129262193
 143 -0.068 -1.812 -0.224 -0.084  0.004 -0.069   0.1129230544
 144 -0.068 -1.812 -0.224 -0.082  0.004 -0.069   0.1129105747
 146 -0.068 -1.812 -0.224 -0.077  0.004 -0.069   0.1129063793
 147 -0.068 -1.812 -0.224 -0.078  0.004 -0.069   0.1129047556
 155 -0.068 -1.812 -0.224 -0.078  0.018 -0.069   0.1128422016
 157 -0.068 -1.812 -0.224 -0.078  0.014 -0.069   0.1128273770
 169 -0.068 -1.812 -0.224 -0.078  0.014 -0.087   0.1125650334
 171 -0.068 -1.812 -0.224 -0.078  0.014 -0.085   0.1125643879
  powell nthiter 2: fret = 0.112564
 185 -0.073 -1.812 -0.224 -0.078  0.014 -0.085   0.1125506549
 186 -0.072 -1.812 -0.224 -0.078  0.014 -0.085   0.1125480281
 197 -0.072 -1.808 -0.224 -0.078  0.014 -0.085   0.1125372557
 206 -0.072 -1.808 -0.212 -0.078  0.014 -0.085   0.1122490954
 209 -0.072 -1.808 -0.203 -0.078  0.014 -0.085   0.1121952577
 221 -0.072 -1.808 -0.203 -0.096  0.014 -0.085   0.1121407686
 222 -0.072 -1.808 -0.203 -0.091  0.014 -0.085   0.1121132327
 223 -0.072 -1.808 -0.203 -0.089  0.014 -0.085   0.1121119528
 233 -0.072 -1.808 -0.203 -0.089  0.025 -0.085   0.1121113665
 234 -0.072 -1.808 -0.203 -0.089  0.020 -0.085   0.1120864697
 249 -0.072 -1.808 -0.203 -0.089  0.020 -0.083   0.1120797677
 252 -0.075 -1.804 -0.182 -0.100  0.025 -0.081   0.1119581704
 259 -0.076 -1.803 -0.178 -0.103  0.026 -0.080   0.1119521222
 262 -0.076 -1.803 -0.178 -0.103  0.026 -0.080   0.1119518412
 263 -0.076 -1.803 -0.178 -0.103  0.026 -0.080   0.1119516965
  powell nthiter 3: fret = 0.111952
 278 -0.081 -1.803 -0.178 -0.103  0.026 -0.080   0.1119113366
 289 -0.081 -1.822 -0.178 -0.103  0.026 -0.080   0.1117530917
 303 -0.081 -1.822 -0.178 -0.103  0.026 -0.077   0.1117480033
 304 -0.081 -1.822 -0.178 -0.103  0.026 -0.078   0.1117476735
 315 -0.081 -1.822 -0.178 -0.102  0.026 -0.078   0.1117473402
 326 -0.081 -1.822 -0.178 -0.102  0.035 -0.078   0.1116742163
 327 -0.081 -1.822 -0.178 -0.102  0.034 -0.078   0.1116740318
 335 -0.081 -1.822 -0.176 -0.103  0.034 -0.078   0.1116713784
  powell nthiter 4: fret = 0.111671
 355 -0.082 -1.822 -0.176 -0.103  0.034 -0.078   0.1116677460
 356 -0.083 -1.822 -0.176 -0.103  0.034 -0.078   0.1116675038
 367 -0.083 -1.824 -0.176 -0.103  0.034 -0.078   0.1116654726
 380 -0.083 -1.824 -0.176 -0.103  0.034 -0.076   0.1116653331
 403 -0.083 -1.824 -0.176 -0.103  0.036 -0.076   0.1116617974
 411 -0.083 -1.824 -0.176 -0.103  0.036 -0.076   0.1116616218
 415 -0.083 -1.824 -0.176 -0.103  0.036 -0.076   0.1116612502
Powell done niters = 4
Computing relative cost
 0  -25.0 -25.0 -25.0   1.010174
 1  -25.0 -25.0  25.0   0.983375
 2  -25.0  25.0 -25.0   1.003100
 3  -25.0  25.0  25.0   0.989982
 4   25.0 -25.0 -25.0   0.991487
 5   25.0 -25.0  25.0   0.988762
 6   25.0  25.0 -25.0   0.994951
 7   25.0  25.0  25.0   1.039247
REL:  8  0.111661    8.001079  1.000135 rel = 0.111646 
Number of iterations     4
Min cost was 0.111661
Number of FunctionCalls   418
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 1.592000 sec
Parameters at optimum (transmm) -0.08336 -1.82404 -0.17585
Parameters at optimum (rotdeg) -0.10293  0.03615 -0.07636 
Final costs ----------------
Number of surface hits 2309
WM  Intensity   347.9033 +/-  62.7672
Ctx Intensity   514.4011 +/- 142.1991
Pct Contrast     36.0604 +/-  25.0648
Cost   0.1117
RelCost   0.4152
Reg at min cost was 
-0.99149  -0.11841   0.05402   0.83249;
 0.06356  -0.07833   0.99490  -0.62220;
 0.11358  -0.98987  -0.08519   1.34370;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to ./tmp.bbregister.26117/bbr.pass1.dat, type = 14 
Original Reg 
-0.99165  -0.11768   0.05274   0.91329;
 0.06203  -0.07671   0.99512   1.20033;
 0.11307  -0.99008  -0.08337   1.52228;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00016   0.00073  -0.00127   0.08080;
-0.00152   0.00162   0.00022   1.82253;
-0.00051  -0.00021   0.00182   0.17858;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 1.842315
Computing change in rh position
Surface-RMS-Diff-mm 1.802074 0.079132 1.971646
mri_segreg done
mri_segreg --mov ./tmp.bbregister.26117/template.nii --init-reg ./tmp.bbregister.26117/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.26117/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc
mri_segreg --mov ./tmp.bbregister.26117/template.nii --init-reg ./tmp.bbregister.26117/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.26117/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode030.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.26117/template.nii
regfile ./tmp.bbregister.26117/bbr.pass1.dat
subject Patient_045
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490737365
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99149  -0.11841   0.05402   0.83249;
 0.06356  -0.07833   0.99490  -0.62220;
 0.11358  -0.98987  -0.08519   1.34370;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   0.997622
 1  -25.0 -25.0  25.0   0.978739
 2  -25.0  25.0 -25.0   0.985811
 3  -25.0  25.0  25.0   1.003502
 4   25.0 -25.0 -25.0   0.984735
 5   25.0 -25.0  25.0   0.987098
 6   25.0  25.0 -25.0   0.980833
 7   25.0  25.0  25.0   1.008882
REL:  8  0.115300    7.927222  0.990903 rel = 0.116359 
Initial costs ----------------
Number of surface hits 231130
WM  Intensity   346.8236 +/-  61.9093
Ctx Intensity   511.8648 +/- 142.3175
Pct Contrast     35.7973 +/-  25.4297
Cost   0.1153
RelCost   0.1164

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.1230   0.1230  0.0
     1  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.0000      0.1209   0.1209  0.0
     2  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.1000      0.1204   0.1204  0.0
     3  -0.1000  -0.1000  -0.1000  -0.1000   0.0000  -0.1000      0.1186   0.1186  0.0
     4  -0.1000  -0.1000  -0.1000  -0.1000   0.0000   0.0000      0.1166   0.1166  0.0
     6  -0.1000  -0.1000  -0.1000  -0.1000   0.1000  -0.1000      0.1162   0.1162  0.0
    15  -0.1000  -0.1000  -0.1000   0.0000   0.1000  -0.1000      0.1159   0.1159  0.0
    96  -0.1000   0.0000  -0.1000   0.0000   0.1000  -0.1000      0.1156   0.1156  0.0
   246   0.0000  -0.1000  -0.1000  -0.1000   0.0000  -0.1000      0.1145   0.1145  0.0
   275   0.0000  -0.1000   0.0000  -0.1000   0.0000   0.1000      0.1144   0.1144  0.0
   284   0.0000  -0.1000   0.0000   0.0000   0.0000   0.1000      0.1131   0.1131  0.0
   359   0.0000   0.0000   0.0000  -0.1000   0.1000   0.1000      0.1126   0.1126  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.1117   0.1117  0.0
Brute Force --------------------------
Min cost was 0.111661
Number of iterations   729
Search time 2.706000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.115300
   7  0.099  0.000  0.000  0.000  0.000  0.000   0.1141012635
  10  0.105  0.000  0.000  0.000  0.000  0.000   0.1140905472
  11  0.106  0.000  0.000  0.000  0.000  0.000   0.1140904062
  19  0.106 -0.113  0.000  0.000  0.000  0.000   0.1133315771
  22  0.106 -0.116  0.000  0.000  0.000  0.000   0.1133286567
  23  0.106 -0.118  0.000  0.000  0.000  0.000   0.1133286426
  25  0.106 -0.117  0.000  0.000  0.000  0.000   0.1133285349
  33  0.106 -0.117  0.017  0.000  0.000  0.000   0.1133098100
  34  0.106 -0.117  0.018  0.000  0.000  0.000   0.1133097013
  42  0.106 -0.117  0.018  0.134  0.000  0.000   0.1124144881
  43  0.106 -0.117  0.018  0.117  0.000  0.000   0.1124003123
  44  0.106 -0.117  0.018  0.119  0.000  0.000   0.1123997397
  45  0.106 -0.117  0.018  0.120  0.000  0.000   0.1123995408
  46  0.106 -0.117  0.018  0.121  0.000  0.000   0.1123994583
  55  0.106 -0.117  0.018  0.121 -0.010  0.000   0.1123987333
  56  0.106 -0.117  0.018  0.121 -0.005  0.000   0.1123970639
  57  0.106 -0.117  0.018  0.121 -0.006  0.000   0.1123970506
  65  0.106 -0.117  0.018  0.121 -0.006  0.146   0.1110999176
  66  0.106 -0.117  0.018  0.121 -0.006  0.142   0.1110940709
  67  0.106 -0.117  0.018  0.121 -0.006  0.134   0.1110923515
  69  0.106 -0.117  0.018  0.121 -0.006  0.137   0.1110917742
  powell nthiter 1: fret = 0.111092
  79  0.152 -0.117  0.018  0.121 -0.006  0.137   0.1107536008
  80  0.158 -0.117  0.018  0.121 -0.006  0.137   0.1107315296
  81  0.180 -0.117  0.018  0.121 -0.006  0.137   0.1107188354
  83  0.172 -0.117  0.018  0.121 -0.006  0.137   0.1107107765
  84  0.171 -0.117  0.018  0.121 -0.006  0.137   0.1107103832
  86  0.170 -0.117  0.018  0.121 -0.006  0.137   0.1107103496
  93  0.170 -0.058  0.018  0.121 -0.006  0.137   0.1105535121
  94  0.170 -0.072  0.018  0.121 -0.006  0.137   0.1105511738
  95  0.170 -0.066  0.018  0.121 -0.006  0.137   0.1105479530
 104  0.170 -0.066 -0.013  0.121 -0.006  0.137   0.1103922573
 105  0.170 -0.066 -0.038  0.121 -0.006  0.137   0.1103001966
 108  0.170 -0.066 -0.061  0.121 -0.006  0.137   0.1102561246
 109  0.170 -0.066 -0.064  0.121 -0.006  0.137   0.1102543515
 110  0.170 -0.066 -0.070  0.121 -0.006  0.137   0.1102511860
 115  0.170 -0.066 -0.071  0.121 -0.006  0.137   0.1102510302
 122  0.170 -0.066 -0.071  0.194 -0.006  0.137   0.1099893526
 123  0.170 -0.066 -0.071  0.182 -0.006  0.137   0.1099872717
 124  0.170 -0.066 -0.071  0.186 -0.006  0.137   0.1099852709
 133  0.170 -0.066 -0.071  0.186 -0.029  0.137   0.1099117790
 134  0.170 -0.066 -0.071  0.186 -0.038  0.137   0.1099008103
 135  0.170 -0.066 -0.071  0.186 -0.044  0.137   0.1098971899
 137  0.170 -0.066 -0.071  0.186 -0.049  0.137   0.1098963496
 146  0.170 -0.066 -0.071  0.186 -0.049  0.183   0.1098048354
 147  0.170 -0.066 -0.071  0.186 -0.049  0.174   0.1097906849
 148  0.170 -0.066 -0.071  0.186 -0.049  0.170   0.1097893353
 149  0.170 -0.066 -0.071  0.186 -0.049  0.171   0.1097891965
  powell nthiter 2: fret = 0.109789
 158  0.175 -0.066 -0.071  0.186 -0.049  0.171   0.1097626423
 159  0.192 -0.066 -0.071  0.186 -0.049  0.171   0.1097406265
 161  0.187 -0.066 -0.071  0.186 -0.049  0.171   0.1097372700
 170  0.187 -0.041 -0.071  0.186 -0.049  0.171   0.1097189592
 171  0.187 -0.049 -0.071  0.186 -0.049  0.171   0.1097129270
 172  0.187 -0.048 -0.071  0.186 -0.049  0.171   0.1097126785
 173  0.187 -0.047 -0.071  0.186 -0.049  0.171   0.1097126515
 184  0.187 -0.047 -0.083  0.186 -0.049  0.171   0.1097004610
 185  0.187 -0.047 -0.082  0.186 -0.049  0.171   0.1097002811
 194  0.187 -0.047 -0.082  0.190 -0.049  0.171   0.1096989106
 204  0.187 -0.047 -0.082  0.190 -0.053  0.171   0.1096973532
 213  0.187 -0.047 -0.082  0.190 -0.054  0.192   0.1096601927
 215  0.187 -0.047 -0.082  0.190 -0.054  0.186   0.1096524518
  powell nthiter 3: fret = 0.109652
 227  0.192 -0.047 -0.082  0.190 -0.054  0.186   0.1096429014
 228  0.193 -0.047 -0.082  0.190 -0.054  0.186   0.1096427677
 247  0.193 -0.047 -0.083  0.190 -0.054  0.186   0.1096422841
 258  0.193 -0.047 -0.083  0.189 -0.054  0.186   0.1096421424
 266  0.193 -0.047 -0.083  0.189 -0.055  0.186   0.1096420632
 274  0.193 -0.047 -0.083  0.189 -0.055  0.196   0.1096408903
 275  0.193 -0.047 -0.083  0.189 -0.055  0.192   0.1096356772
 276  0.193 -0.047 -0.083  0.189 -0.055  0.191   0.1096356521
 278  0.200 -0.047 -0.085  0.188 -0.056  0.196   0.1096283055
 285  0.202 -0.047 -0.085  0.188 -0.056  0.197   0.1096277774
 292  0.201 -0.047 -0.085  0.188 -0.056  0.197   0.1096277315
  powell nthiter 4: fret = 0.109628
 312  0.201 -0.050 -0.085  0.188 -0.056  0.197   0.1096268147
 323  0.201 -0.050 -0.081  0.188 -0.056  0.197   0.1096260742
 324  0.201 -0.050 -0.083  0.188 -0.056  0.197   0.1096258235
 334  0.201 -0.050 -0.083  0.187 -0.056  0.197   0.1096255553
 344  0.201 -0.050 -0.083  0.187 -0.055  0.197   0.1096255191
 352  0.202 -0.050 -0.083  0.187 -0.055  0.198   0.1096254621
 357  0.202 -0.050 -0.083  0.187 -0.055  0.198   0.1096254158
 360  0.202 -0.050 -0.083  0.187 -0.055  0.198   0.1096254075
  powell nthiter 5: fret = 0.109625
 371  0.202 -0.050 -0.083  0.187 -0.055  0.199   0.1096251565
 381  0.202 -0.051 -0.083  0.187 -0.055  0.199   0.1096251400
 393  0.202 -0.051 -0.082  0.187 -0.055  0.199   0.1096250363
 402  0.202 -0.051 -0.082  0.186 -0.055  0.199   0.1096250300
  powell nthiter 6: fret = 0.109625
Powell done niters = 6
Computing relative cost
 0  -25.0 -25.0 -25.0   0.996583
 1  -25.0 -25.0  25.0   0.979468
 2  -25.0  25.0 -25.0   0.984080
 3  -25.0  25.0  25.0   1.005019
 4   25.0 -25.0 -25.0   0.985020
 5   25.0 -25.0  25.0   0.989476
 6   25.0  25.0 -25.0   0.981668
 7   25.0  25.0  25.0   1.009757
REL:  8  0.109625    7.931072  0.991384 rel = 0.110578 
Number of iterations     6
Min cost was 0.109625
Number of FunctionCalls   497
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 78.131000 sec
Parameters at optimum (transmm)  0.20233 -0.05086 -0.08181
Parameters at optimum (rotdeg)  0.18561 -0.05517  0.19926 
Final costs ----------------
Number of surface hits 231129
WM  Intensity   346.2882 +/-  61.5121
Ctx Intensity   510.4597 +/- 137.6946
Pct Contrast     35.8440 +/-  25.0441
Cost   0.1096
RelCost   0.1164
Reg at min cost was 
-0.99182  -0.11720   0.05063   1.03570;
 0.05974  -0.07553   0.99535  -0.67451;
 0.11283  -0.99023  -0.08191   1.26066;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.99149  -0.11841   0.05402   0.83249;
 0.06356  -0.07833   0.99490  -0.62220;
 0.11358  -0.98987  -0.08519   1.34370;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00032  -0.00122   0.00338  -0.20321;
 0.00382  -0.00280  -0.00045   0.05231;
 0.00075   0.00036  -0.00328   0.08304;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.200545
Computing change in rh position
Surface-RMS-Diff-mm 0.244543 0.093453 0.474131
mri_segreg done
MinCost: 0.109625 346.288238 510.459685 35.844001 
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.99182  -0.11720   0.05063   1.03570;
 0.05974  -0.07553   0.99535  -0.67451;
 0.11283  -0.99023  -0.08191   1.26066;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_045/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.99182  -0.11720   0.05063   1.03570;
 0.05974  -0.07553   0.99535  -0.67451;
 0.11283  -0.99023  -0.08191   1.26066;
 0.00000   0.00000   0.00000   1.00000;
Determinant -0.999999
subject = Patient_045
RegMat ---------------------------
-0.99182  -0.11720   0.05063   1.03570;
 0.05974  -0.07553   0.99535  -0.67451;
 0.11283  -0.99023  -0.08191   1.26066;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Sat Mar 18 06:46:51 AEST 2017 
Ended   at Sat Mar 18 06:50:36 AEST 2017
BBR-Run-Time-Sec 225
 
bbregister Done
To check results, run:
tkregisterfv --mov biasmeanb0bet.nii.gz --reg register.dat --surfs 
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-NNMCWG/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/biascorr.mif /tmp/dwi2response-tmp-NNMCWG/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-NNMCWG/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-NNMCWG/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,3000 with 12,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 3000 dwi_b3000.mif
[03;34mCommand:[0m mrmath dwi_b3000.mif mean mean_b3000.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b3000.mif -finite mean_b3000.mif 0 -if 0 -le err_b3000.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b3000.mif -divide -log sdm_b3000.mif
[03;34mCommand:[0m mrcalc sdm_b3000.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b3000.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.43458 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.54466 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.96086 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 1.95219 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 1.95219 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 1.95219 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 3.01387 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 3.01387 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 449 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 449 -iter_voxels 4490 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-NNMCWG/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.94538 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 550 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 551 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 3033 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 297467 --> 240201 --> 240157[0m
dwi2response: [03;32mWM: 95543 --> 89873 --> 449 (SF)[0m
dwi2response: [03;32mGM: 90745 --> 55047 --> 1101[0m
dwi2response: [03;32mCSF: 53869 --> 30329 --> 3033[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b3000.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb3000.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_045/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-NNMCWG/[0m
