dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/dwipreproc_cust-tmp-UYRAN0/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/dwipreproc_cust-tmp-UYRAN0/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/dwipreproc_cust-tmp-UYRAN0/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/dwipreproc_cust-tmp-UYRAN0/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/dwipreproc_cust-tmp-UYRAN0/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 102[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
  -0.999993 -0.00301176 -0.00234288        3000
  0.0253812    -0.74414   -0.667541        3000
-0.00333394    0.517289    0.855804        3000
   0.272914     0.82773   -0.490286        3000
  -0.651145    0.404763    -0.64201        3000
   0.507861    0.261011    0.820945        3000
   0.959473    0.280139   0.0305621        3000
   0.534766    0.380153   -0.754658        3000
  -0.316459    0.133233   -0.939203        3000
          0           0           0           0
    0.50514   -0.590202   -0.629679        3000
   0.600516   0.0950909   -0.793938        3000
  -0.954013   -0.155021   -0.256569        3000
  -0.527835   -0.742206    0.412942        3000
   0.193873   -0.924816    0.327305        3000
  -0.364798    0.925852  -0.0985908        3000
   0.260004    0.930314    0.258677        3000
  0.0247834    0.510037   -0.859795        3000
  -0.613972    0.788477  -0.0366427        3000
          0           0           0           0
   0.872681   0.0370903     0.48688        3000
  -0.743691   -0.229926    0.627741        3000
   0.488113    0.675898    0.552184        3000
  -0.451955   -0.890657  -0.0496637        3000
  -0.662612   -0.430663    -0.61276        3000
  -0.853369    0.236784   -0.464429        3000
  -0.439399   -0.505333   -0.742676        3000
   0.957623   -0.139293   -0.252101        3000
  -0.703762   -0.594042   -0.389657        3000
          0           0           0           0
  -0.387382   -0.180212    0.904135        3000
    0.14319   -0.680707    0.718425        3000
  -0.802917     -0.5958   0.0186107        3000
   -0.28892   -0.136318   -0.947598        3000
   0.963011   -0.128351    0.236928        3000
  -0.151658   -0.695832    0.702009        3000
  -0.018039   -0.982925   -0.183122        3000
  -0.377163   -0.897085    0.230189        3000
   0.668796    0.728019    0.150664        3000
          0           0           0           0
  -0.290652   -0.465339    0.836051        3000
  -0.721985   -0.162696   -0.672509        3000
   0.716899   -0.658415     0.22923        3000
   0.428013   -0.580686    0.692538        3000
   0.958926   -0.282964  -0.0198113        3000
   0.493041   -0.295975    0.818113        3000
  -0.894371       0.398   -0.204196        3000
   0.203625    0.978537  -0.0316641        3000
  -0.230659    0.966316    0.114145        3000
          0           0           0           0
   0.739621    0.599621   -0.305638        3000
   0.843942    0.335936    -0.41822        3000
   0.105047   -0.283917    0.953077        3000
   0.240007    0.398711    0.885113        3000
   0.613801    0.778065   -0.133653        3000
  -0.266609    0.456667   -0.848749        3000
  -0.658372   -0.512661    0.551112        3000
   0.256849   -0.895127   -0.364384        3000
  -0.249971   -0.820031   -0.514843        3000
          0           0           0           0
  -0.572744    0.658763   -0.487848        3000
 -0.0219229   -0.248021   -0.968506        3000
  -0.224381    0.320299    0.920359        3000
     0.8373    0.322103    0.441791        3000
   0.861122    0.464335    0.207029        3000
  -0.488456   -0.809331    -0.32618        3000
    0.10739    0.947103    -0.30243        3000
  -0.542513  0.00513099   -0.840032        3000
   0.250504   -0.575905   -0.778191        3000
          0           0           0           0
   0.229006  -0.0445967   -0.972403        3000
   0.216283    0.652273    0.726472        3000
  -0.961457   -0.145088     0.23356        3000
  -0.311501    0.788297   -0.530618        3000
   0.870842   -0.428876   -0.240206        3000
  -0.844981    0.263396    0.465435        3000
    -0.8945    -0.41139    0.175006        3000
   0.703651    -0.67804   -0.212454        3000
   0.666451   -0.350237   -0.658162        3000
          0           0           0           0
  -0.516933    0.749243    0.414024        3000
   0.719292    -0.13424    0.681615        3000
  0.0400198   -0.020859    0.998981        3000
  -0.827319    0.561732  0.00101655        3000
   -0.45271    0.385105    0.804206        3000
   0.879501   0.0352747   -0.474588        3000
   0.148781    0.246275   -0.957712        3000
   0.767805   -0.483365    0.420516        3000
   0.478958   -0.133486   -0.867629        3000
          0           0           0           0
   -0.71759    0.532211    0.449239        3000
   0.482113   -0.822159    0.302691        3000
   -0.28166    0.761477    0.583799        3000
 -0.0172491    0.846891   -0.531486        3000
  0.0653463   -0.993182   0.0965373        3000
    0.42148    0.633187   -0.649176        3000
  -0.733522   0.0921257    0.673393        3000
 0.00164093    0.896388    0.443267        3000
   0.476167   -0.861897   -0.174353        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/dwipreproc_cust-tmp-UYRAN0/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-607UXR/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-607UXR/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-607UXR/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-607UXR/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-607UXR/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
65222
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-LEHZTI/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-LEHZTI/parc.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/brainFS.nii /tmp/labelsgmfix-tmp-LEHZTI/T1.nii -stride -1,+2,+3
labelsgmfix: [03;32mChanging to temporary directory (/tmp/labelsgmfix-tmp-LEHZTI/)[0m
[03;34mCommand:[0m run_first_all -s R_Thal,L_Puta,R_Caud,R_Hipp,L_Amyg,R_Pall,R_Amyg,L_Caud,L_Pall,L_Thal,L_Hipp,R_Accu,L_Accu,R_Puta -i T1.nii -b -o first
[03;34mCommand:[0m mrcalc parc.mif 0 -min sgm.mif
[03;34mCommand:[0m meshconvert first-R_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Thal_mask.mif 6 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Puta_mask.mif 3 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Caud_mask.mif 7 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Hipp_mask.mif 13 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Amyg_mask.mif 12 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Pall_mask.mif 9 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Amyg_mask.mif 14 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Caud_mask.mif 2 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Pall_mask.mif 4 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Thal_mask.mif 1 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Hipp_mask.mif 11 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Accu_mask.mif 10 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Accu_mask.mif 5 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Puta_mask.mif 8 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m mrmath R_Thal_mask.mif L_Puta_mask.mif R_Caud_mask.mif R_Hipp_mask.mif L_Amyg_mask.mif R_Pall_mask.mif R_Amyg_mask.mif L_Caud_mask.mif L_Pall_mask.mif L_Thal_mask.mif L_Hipp_mask.mif R_Accu_mask.mif L_Accu_mask.mif R_Puta_mask.mif sum - | mrcalc - 1 -gt sgm_overlap_mask.mif
[03;34mCommand:[0m mrcalc sgm_overlap_mask.mif 0 sgm.mif -if sgm_masked.mif
[03;34mCommand:[0m labelconvert sgm_masked.mif /software/mrtrix3/mrtrix3-AP/scripts/data/FreeSurferSGM.txt /software/mrtrix3/mrtrix3-AP/src/connectome/tables/fs_a2009s.txt sgm_new_labels.mif
[03;34mCommand:[0m mrcalc parc.mif 83 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 78 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 84 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 87 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 81 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 86 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 88 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 77 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 79 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 76 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 80 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 89 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 82 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 85 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc sgm_new_labels.mif 0.5 -gt sgm_new_labels.mif parc.mif -if result.mif -datatype uint32
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/parc_fixsubcort.nii
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc)[0m
labelsgmfix: [03;32mDeleting temporary directory /tmp/labelsgmfix-tmp-LEHZTI/[0m
tmp ./tmp.bbregister.30815
Log file is register.dat.log
Sat Mar 18 06:40:44 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc
/software/freesurfer/freesurfer-6.0.0/bin/bbregister --s Patient_053 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.75 2016/05/10 20:02:28 greve Exp $
Linux hpcnode035.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-6.0.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.30815/template.nii
mri_convert.bin biasmeanb0bet.nii.gz ./tmp.bbregister.30815/template.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.992892, -0.116076, 0.0262868)
j_ras = (0.11699, 0.992466, -0.0363842)
k_ras = (-0.0218654, 0.0392008, 0.998992)
writing to ./tmp.bbregister.30815/template.nii...
fslregister --s Patient_053 --mov ./tmp.bbregister.30815/template.nii --reg ./tmp.bbregister.30815/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.30815/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov

Log file is ./tmp.bbregister.30815/reg.init.dat.fslregister.log

Sat Mar 18 06:40:45 AEST 2017
--s Patient_053 --mov ./tmp.bbregister.30815/template.nii --reg ./tmp.bbregister.30815/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.30815/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov
$Id: fslregister,v 1.40 2016/02/12 21:43:15 zkaufman Exp $
hpcnode035.adqimr.ad.lan
Linux hpcnode035.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc
mri_convert /working/lab_michaebr/alistaiP/Park/FS/Patient_053/mri/brainmask.mgz ./tmp.bbregister.30815/fslregister/refvol.fslregister.nii
mri_convert.bin /working/lab_michaebr/alistaiP/Park/FS/Patient_053/mri/brainmask.mgz ./tmp.bbregister.30815/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/Park/FS/Patient_053/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 3.84171e-09, 0)
j_ras = (1.86265e-09, 0, -1)
k_ras = (3.60887e-09, 1, -3.72529e-09)
writing to ./tmp.bbregister.30815/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc
mri_convert ./tmp.bbregister.30815/template.nii ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii --frame 0
mri_convert.bin ./tmp.bbregister.30815/template.nii ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from ./tmp.bbregister.30815/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.992892, -0.116076, 0.0262868)
j_ras = (0.11699, 0.992466, -0.0363842)
k_ras = (-0.0218654, 0.0392008, 0.998992)
keeping frame 0
writing to ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.30815/template.nii
reg file       ./tmp.bbregister.30815/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.30815/template.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.99289   0.11608  -0.02629   1.71873;
-0.02187   0.03920   0.99899   0.00000;
-0.11699  -0.99247   0.03638   0.00000;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
-0.99289   0.11608  -0.02629   1.71873;
-0.02187   0.03920   0.99899   0.00000;
-0.11699  -0.99247   0.03638   0.00000;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.00000  -0.00000   0.00000   1.71873;
 0.00000   1.00000   0.00000   0.00002;
-0.00000   0.00000   1.00000   0.00000;
 0.00000   0.00000   0.00000   1.00000;
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc
tkregister2_cmdl --mov ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.30815/fslregister/reg0.30855.dat --regheader --fslregout ./tmp.bbregister.30815/reg.init.dat.fsl.mat0 --s Patient_053 --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.30815/fslregister/reg0.30855.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_053/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.99289  -0.11608   0.02629   1.58258;
-0.02187   0.03920   0.99899  -0.35003;
-0.11699  -0.99247   0.03638  -6.52162;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99289  -0.11608   0.02629   1.58258;
-0.02187   0.03920   0.99899  -0.35003;
-0.11699  -0.99247   0.03638  -6.52162;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_053
RegMat ---------------------------
 0.99289  -0.11608   0.02629   1.58258;
-0.02187   0.03920   0.99899  -0.35003;
-0.11699  -0.99247   0.03638  -6.52162;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Sat Mar 18 06:40:47 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc
flirt.fsl -ref ./tmp.bbregister.30815/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.30815/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/fsl.5.0.2.xyztrans.sch -init ./tmp.bbregister.30815/reg.init.dat.fsl.mat0
Sat Mar 18 06:41:20 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc
flirt.fsl -ref ./tmp.bbregister.30815/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.30815/reg.init.dat.fsl.mat -init ./tmp.bbregister.30815/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_053 --mov ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.30815/reg.init.dat --fslreg ./tmp.bbregister.30815/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.99136  -0.12830   0.02751   34.32480;
 0.03572   0.06216  -0.99743   195.82100;
 0.12626   0.98979   0.06621  -6.27912;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.30815/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_053/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.30815/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.99135  -0.12626   0.03572   2.60355;
-0.02751   0.06621   0.99743   2.61354;
-0.12830  -0.98978   0.06216  -6.67321;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99135  -0.12626   0.03572   2.60355;
-0.02751   0.06621   0.99743   2.61354;
-0.12830  -0.98978   0.06216  -6.67321;
 0.00000   0.00000   0.00000   1.00000;
Determinant 0.999998
subject = Patient_053
RegMat ---------------------------
 0.99135  -0.12626   0.03572   2.60355;
-0.02751   0.06621   0.99743   2.61354;
-0.12830  -0.98978   0.06216  -6.67321;
 0.00000   0.00000   0.00000   1.00000;
mri_matrix_multiply -im ./tmp.bbregister.30815/fslregister/swapreg.dat -im ./tmp.bbregister.30815/reg.init.dat -om ./tmp.bbregister.30815/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Sat Mar 18 06:40:45 AEST 2017 
Ended   at Sat Mar 18 06:42:45 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.30815/template.nii --reg ./tmp.bbregister.30815/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.30815/template.nii --init-reg ./tmp.bbregister.30815/reg.init.dat --out-reg ./tmp.bbregister.30815/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc
mri_segreg --mov ./tmp.bbregister.30815/template.nii --init-reg ./tmp.bbregister.30815/reg.init.dat --out-reg ./tmp.bbregister.30815/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode035.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.30815/template.nii
regfile ./tmp.bbregister.30815/reg.init.dat
subject Patient_053
dof 6
outregfile ./tmp.bbregister.30815/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490528468
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99135   0.12626  -0.03572  -0.88481;
-0.02751   0.06621   0.99743   2.61356;
-0.12830  -0.98979   0.06216  -6.67321;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.032703
 1  -25.0 -25.0  25.0   1.000271
 2  -25.0  25.0 -25.0   1.003011
 3  -25.0  25.0  25.0   0.990429
 4   25.0 -25.0 -25.0   1.013824
 5   25.0 -25.0  25.0   1.034187
 6   25.0  25.0 -25.0   1.002816
 7   25.0  25.0  25.0   0.979508
REL:  8  0.234251    8.056748  1.007094 rel = 0.232601 
Initial costs ----------------
Number of surface hits 2817
WM  Intensity   411.7170 +/- 116.2120
Ctx Intensity   638.6592 +/- 220.7570
Pct Contrast     39.7325 +/-  34.2735
Cost   0.2343
RelCost   0.2326

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      0.9819   0.9819  0.0
     4  -4.0000  -4.0000  -4.0000  -4.0000   0.0000   0.0000      0.9792   0.9792  0.0
     6  -4.0000  -4.0000  -4.0000  -4.0000   4.0000  -4.0000      0.9590   0.9590  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.9207   0.9207  0.0
     8  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   4.0000      0.9130   0.9130  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.8430   0.8430  0.0
    19  -4.0000  -4.0000  -4.0000   4.0000  -4.0000   0.0000      0.8399   0.8399  0.0
    39  -4.0000  -4.0000   0.0000   0.0000   0.0000  -4.0000      0.8075   0.8075  0.0
   120  -4.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.7685   0.7685  0.0
   265   0.0000  -4.0000  -4.0000   4.0000   0.0000   0.0000      0.7607   0.7607  0.0
   274   0.0000  -4.0000   0.0000  -4.0000   0.0000   0.0000      0.6921   0.6921  0.0
   283   0.0000  -4.0000   0.0000   0.0000   0.0000   0.0000      0.6183   0.6183  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.2343   0.2343  0.0
Brute Force --------------------------
Min cost was 0.234251
Number of iterations   729
Search time 3.321000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.234251
   7  0.055  0.000  0.000  0.000  0.000  0.000   0.2334553419
  14  0.055 -1.618  0.000  0.000  0.000  0.000   0.1381451466
  15  0.055 -1.297  0.000  0.000  0.000  0.000   0.1150444457
  17  0.055 -0.802  0.000  0.000  0.000  0.000   0.1141513755
  19  0.055 -1.044  0.000  0.000  0.000  0.000   0.1126548465
  20  0.055 -1.021  0.000  0.000  0.000  0.000   0.1118293723
  21  0.055 -0.939  0.000  0.000  0.000  0.000   0.1088388525
  22  0.055 -0.886  0.000  0.000  0.000  0.000   0.1088127440
  23  0.055 -0.912  0.000  0.000  0.000  0.000   0.1084716846
  25  0.055 -0.909  0.000  0.000  0.000  0.000   0.1084652954
  27  0.055 -0.908  0.000  0.000  0.000  0.000   0.1084645570
  37  0.055 -0.908  0.030  0.000  0.000  0.000   0.1083679048
  38  0.055 -0.908  0.023  0.000  0.000  0.000   0.1083326017
  39  0.055 -0.908  0.019  0.000  0.000  0.000   0.1083272639
  48  0.055 -0.908  0.019  0.184  0.000  0.000   0.1050023824
  51  0.055 -0.908  0.019  0.183  0.000  0.000   0.1050018884
  58  0.055 -0.908  0.019  0.183 -0.065  0.000   0.1030787034
  61  0.055 -0.908  0.019  0.183 -0.094  0.000   0.1030565462
  62  0.055 -0.908  0.019  0.183 -0.083  0.000   0.1029894467
  63  0.055 -0.908  0.019  0.183 -0.080  0.000   0.1029881270
  64  0.055 -0.908  0.019  0.183 -0.081  0.000   0.1029876426
  66  0.055 -0.908  0.019  0.183 -0.081  1.000   0.0905382389
  70  0.055 -0.908  0.019  0.183 -0.081  0.618   0.0813168177
  72  0.055 -0.908  0.019  0.183 -0.081  0.635   0.0812603923
  73  0.055 -0.908  0.019  0.183 -0.081  0.657   0.0809270765
  79  0.055 -0.908  0.019  0.183 -0.081  0.656   0.0809208910
  80  0.055 -0.908  0.019  0.183 -0.081  0.655   0.0809194063
  89  0.063 -1.048  0.022  0.211 -0.094  0.756   0.0795248234
  92  0.063 -1.041  0.022  0.210 -0.093  0.751   0.0795067852
  94  0.063 -1.042  0.022  0.210 -0.093  0.752   0.0795064919
  powell nthiter 1: fret = 0.079506
 101  0.445 -1.042  0.022  0.210 -0.093  0.752   0.0788965447
 102  0.264 -1.042  0.022  0.210 -0.093  0.752   0.0748779773
 103  0.260 -1.042  0.022  0.210 -0.093  0.752   0.0748484043
 104  0.210 -1.042  0.022  0.210 -0.093  0.752   0.0747830280
 106  0.230 -1.042  0.022  0.210 -0.093  0.752   0.0745847742
 108  0.227 -1.042  0.022  0.210 -0.093  0.752   0.0745722443
 110  0.226 -1.042  0.022  0.210 -0.093  0.752   0.0745709052
 118  0.226 -1.042  0.022  0.210 -0.093  0.643   0.0743791949
 121  0.226 -1.042  0.022  0.210 -0.093  0.568   0.0742582758
 122  0.226 -1.042  0.022  0.210 -0.093  0.522   0.0741251247
 124  0.226 -1.042  0.022  0.210 -0.093  0.540   0.0740392639
 126  0.226 -1.042  0.022  0.210 -0.093  0.538   0.0740363811
 136  0.226 -1.042 -0.011  0.210 -0.093  0.538   0.0740122015
 137  0.226 -1.042  0.001  0.210 -0.093  0.538   0.0739737312
 138  0.226 -1.042  0.004  0.210 -0.093  0.538   0.0739716611
 139  0.226 -1.042  0.005  0.210 -0.093  0.538   0.0739713891
 147  0.226 -1.042  0.005  0.322 -0.093  0.538   0.0737903935
 150  0.226 -1.042  0.005  0.361 -0.093  0.538   0.0735494892
 152  0.226 -1.042  0.005  0.360 -0.093  0.538   0.0735494672
 160  0.226 -1.042  0.005  0.360 -0.117  0.538   0.0734564818
 162  0.226 -1.042  0.005  0.360 -0.115  0.538   0.0734487785
 163  0.226 -1.042  0.005  0.360 -0.107  0.538   0.0734273128
 165  0.226 -1.042  0.005  0.360 -0.109  0.538   0.0734245685
 176  0.224 -1.007  0.004  0.353 -0.106  0.513   0.0728064236
 178  0.222 -0.980  0.004  0.347 -0.103  0.493   0.0724700203
 179  0.222 -0.977  0.003  0.347 -0.103  0.491   0.0724447444
 181  0.222 -0.971  0.003  0.346 -0.103  0.487   0.0724272332
 182  0.222 -0.970  0.003  0.345 -0.102  0.486   0.0724269296
  powell nthiter 2: fret = 0.072427
 192  0.319 -0.970  0.003  0.345 -0.102  0.486   0.0713770068
 194  0.286 -0.970  0.003  0.345 -0.102  0.486   0.0710937143
 197  0.279 -0.970  0.003  0.345 -0.102  0.486   0.0710668064
 199  0.278 -0.970  0.003  0.345 -0.102  0.486   0.0710657712
 212  0.278 -0.970  0.003  0.345 -0.102  0.477   0.0710359477
 213  0.278 -0.970  0.003  0.345 -0.102  0.473   0.0710315186
 214  0.278 -0.970  0.003  0.345 -0.102  0.471   0.0710309185
 215  0.278 -0.970  0.003  0.345 -0.102  0.472   0.0710307638
 222  0.278 -0.970 -0.049  0.345 -0.102  0.472   0.0708781673
 223  0.278 -0.970 -0.041  0.345 -0.102  0.472   0.0708571060
 224  0.278 -0.970 -0.035  0.345 -0.102  0.472   0.0708533924
 236  0.278 -0.970 -0.035  0.335 -0.102  0.472   0.0708125613
 247  0.278 -0.970 -0.035  0.335 -0.097  0.472   0.0708063823
 248  0.278 -0.970 -0.035  0.335 -0.098  0.472   0.0708056328
 261  0.278 -0.965 -0.035  0.334 -0.098  0.468   0.0707621349
 262  0.278 -0.961 -0.035  0.333 -0.097  0.465   0.0707599545
 263  0.278 -0.962 -0.035  0.333 -0.097  0.466   0.0707582528
  powell nthiter 3: fret = 0.070758
 275  0.282 -0.962 -0.035  0.333 -0.097  0.466   0.0707257028
 276  0.284 -0.962 -0.035  0.333 -0.097  0.466   0.0707253614
 287  0.284 -0.962 -0.035  0.333 -0.097  0.474   0.0706671997
 288  0.284 -0.962 -0.035  0.333 -0.097  0.489   0.0706420342
 290  0.284 -0.962 -0.035  0.333 -0.097  0.486   0.0706398639
 291  0.284 -0.962 -0.035  0.333 -0.097  0.485   0.0706397602
 300  0.284 -0.962 -0.044  0.333 -0.097  0.485   0.0706383375
 301  0.284 -0.962 -0.042  0.333 -0.097  0.485   0.0706375360
 302  0.284 -0.962 -0.040  0.333 -0.097  0.485   0.0706374445
 312  0.284 -0.962 -0.040  0.325 -0.097  0.485   0.0706339390
 313  0.284 -0.962 -0.040  0.329 -0.097  0.485   0.0706279545
 324  0.284 -0.962 -0.040  0.329 -0.096  0.485   0.0706274871
 338  0.283 -0.957 -0.040  0.327 -0.096  0.482   0.0705838017
 339  0.283 -0.955 -0.040  0.327 -0.096  0.480   0.0705783346
 340  0.283 -0.954 -0.040  0.327 -0.096  0.479   0.0705782466
 342  0.289 -0.945 -0.046  0.321 -0.094  0.493   0.0704517267
 345  0.298 -0.932 -0.055  0.311 -0.091  0.515   0.0704219706
 346  0.295 -0.937 -0.051  0.314 -0.092  0.507   0.0703992933
 350  0.294 -0.937 -0.051  0.315 -0.092  0.506   0.0703988513
 353  0.294 -0.937 -0.051  0.315 -0.092  0.505   0.0703986487
  powell nthiter 4: fret = 0.070399
 367  0.291 -0.937 -0.051  0.315 -0.092  0.505   0.0703831456
 382  0.291 -0.936 -0.051  0.315 -0.092  0.505   0.0703819603
 392  0.291 -0.936 -0.061  0.315 -0.092  0.505   0.0703600282
 393  0.291 -0.936 -0.060  0.315 -0.092  0.505   0.0703598510
 404  0.291 -0.936 -0.060  0.313 -0.092  0.505   0.0703591570
 415  0.291 -0.936 -0.060  0.313 -0.089  0.505   0.0703565261
 417  0.291 -0.936 -0.060  0.313 -0.090  0.505   0.0703556766
 425  0.290 -0.937 -0.060  0.314 -0.090  0.503   0.0703546239
  powell nthiter 5: fret = 0.070355
 501  0.290 -0.938 -0.060  0.314 -0.090  0.503   0.0703546195
Powell done niters = 5
Computing relative cost
 0  -25.0 -25.0 -25.0   1.023234
 1  -25.0 -25.0  25.0   1.013811
 2  -25.0  25.0 -25.0   1.039097
 3  -25.0  25.0  25.0   0.980295
 4   25.0 -25.0 -25.0   1.027465
 5   25.0 -25.0  25.0   1.025434
 6   25.0  25.0 -25.0   0.988571
 7   25.0  25.0  25.0   1.015285
REL:  8  0.070355    8.113192  1.014149 rel = 0.0693731 
Number of iterations     5
Min cost was 0.070355
Number of FunctionCalls   508
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 2.263000 sec
Parameters at optimum (transmm)  0.28983 -0.93756 -0.05951
Parameters at optimum (rotdeg)  0.31443 -0.09025  0.50264 
Final costs ----------------
Number of surface hits 2817
WM  Intensity   387.3349 +/-  86.3302
Ctx Intensity   621.6149 +/- 154.2203
Pct Contrast     44.8747 +/-  25.1604
Cost   0.0704
RelCost   0.2326
Reg at min cost was 
-0.99088   0.12718  -0.04457  -0.60770;
-0.03550   0.07276   0.99672   1.70480;
-0.13001  -0.98921   0.06758  -6.71966;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to ./tmp.bbregister.30815/bbr.pass1.dat, type = 14 
Original Reg 
-0.99135   0.12626  -0.03572  -0.88481;
-0.02751   0.06621   0.99743   2.61356;
-0.12830  -0.98979   0.06216  -6.67321;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00048  -0.00092   0.00885  -0.27711;
 0.00799  -0.00655   0.00071   0.90876;
 0.00171  -0.00058  -0.00542   0.04645;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.826391
Computing change in rh position
Surface-RMS-Diff-mm 1.060134 0.345498 1.734197
mri_segreg done
mri_segreg --mov ./tmp.bbregister.30815/template.nii --init-reg ./tmp.bbregister.30815/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.30815/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc
mri_segreg --mov ./tmp.bbregister.30815/template.nii --init-reg ./tmp.bbregister.30815/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.30815/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode035.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.30815/template.nii
regfile ./tmp.bbregister.30815/bbr.pass1.dat
subject Patient_053
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490669462
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99088   0.12718  -0.04457  -0.60770;
-0.03550   0.07276   0.99672   1.70480;
-0.13001  -0.98921   0.06758  -6.71966;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.013958
 1  -25.0 -25.0  25.0   1.006063
 2  -25.0  25.0 -25.0   1.007852
 3  -25.0  25.0  25.0   1.005085
 4   25.0 -25.0 -25.0   0.989913
 5   25.0 -25.0  25.0   1.008713
 6   25.0  25.0 -25.0   0.987348
 7   25.0  25.0  25.0   0.998814
REL:  8  0.067420    8.017746  1.002218 rel = 0.067271 
Initial costs ----------------
Number of surface hits 281234
WM  Intensity   384.7850 +/-  79.8150
Ctx Intensity   617.8490 +/- 147.4854
Pct Contrast     44.9712 +/-  24.1575
Cost   0.0674
RelCost   0.0673

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.0842   0.0842  0.0
     1  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.0000      0.0806   0.0806  0.0
     2  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.1000      0.0801   0.0801  0.0
     4  -0.1000  -0.1000  -0.1000  -0.1000   0.0000   0.0000      0.0785   0.0785  0.0
     5  -0.1000  -0.1000  -0.1000  -0.1000   0.0000   0.1000      0.0771   0.0771  0.0
    11  -0.1000  -0.1000  -0.1000   0.0000  -0.1000   0.1000      0.0768   0.0768  0.0
    13  -0.1000  -0.1000  -0.1000   0.0000   0.0000   0.0000      0.0759   0.0759  0.0
    14  -0.1000  -0.1000  -0.1000   0.0000   0.0000   0.1000      0.0740   0.0740  0.0
    23  -0.1000  -0.1000  -0.1000   0.1000   0.0000   0.1000      0.0739   0.0739  0.0
    41  -0.1000  -0.1000   0.0000   0.0000   0.0000   0.1000      0.0736   0.0736  0.0
   146  -0.1000   0.0000   0.1000   0.0000  -0.1000   0.1000      0.0733   0.0733  0.0
   266   0.0000  -0.1000  -0.1000   0.1000   0.0000   0.1000      0.0718   0.0718  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0704   0.0704  0.0
Brute Force --------------------------
Min cost was 0.070355
Number of iterations   729
Search time 3.157000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.067420
   7 -0.129  0.000  0.000  0.000  0.000  0.000   0.0663433787
   8 -0.113  0.000  0.000  0.000  0.000  0.000   0.0662884450
   9 -0.105  0.000  0.000  0.000  0.000  0.000   0.0662819475
  11 -0.106  0.000  0.000  0.000  0.000  0.000   0.0662817638
  20 -0.106 -0.074  0.000  0.000  0.000  0.000   0.0657295102
  21 -0.106 -0.080  0.000  0.000  0.000  0.000   0.0657273274
  22 -0.106 -0.079  0.000  0.000  0.000  0.000   0.0657269527
  23 -0.106 -0.078  0.000  0.000  0.000  0.000   0.0657269324
  31 -0.106 -0.078  0.073  0.000  0.000  0.000   0.0655554219
  32 -0.106 -0.078  0.057  0.000  0.000  0.000   0.0655539398
  47 -0.106 -0.078  0.057  0.022  0.000  0.000   0.0655218665
  48 -0.106 -0.078  0.057  0.021  0.000  0.000   0.0655217971
  56 -0.106 -0.078  0.057  0.021  0.044  0.000   0.0655095840
  57 -0.106 -0.078  0.057  0.021  0.024  0.000   0.0654699276
  58 -0.106 -0.078  0.057  0.021  0.023  0.000   0.0654698843
  65 -0.106 -0.078  0.057  0.021  0.023  0.382   0.0636762866
  66 -0.106 -0.078  0.057  0.021  0.023  0.228   0.0627139026
  67 -0.106 -0.078  0.057  0.021  0.023  0.240   0.0627078751
  68 -0.106 -0.078  0.057  0.021  0.023  0.239   0.0627073743
  69 -0.106 -0.078  0.057  0.021  0.023  0.237   0.0627068570
  powell nthiter 1: fret = 0.062707
  80 -0.060 -0.078  0.057  0.021  0.023  0.237   0.0624836942
  82 -0.058 -0.078  0.057  0.021  0.023  0.237   0.0624832700
  90 -0.058 -0.067  0.057  0.021  0.023  0.237   0.0624764907
  94 -0.058 -0.060  0.057  0.021  0.023  0.237   0.0624754055
  95 -0.058 -0.061  0.057  0.021  0.023  0.237   0.0624751949
 103 -0.058 -0.061  0.059  0.021  0.023  0.237   0.0624684363
 114 -0.058 -0.061  0.059  0.060  0.023  0.237   0.0624621127
 115 -0.058 -0.061  0.059  0.042  0.023  0.237   0.0624338871
 117 -0.058 -0.061  0.059  0.043  0.023  0.237   0.0624335012
 126 -0.058 -0.061  0.059  0.043  0.046  0.237   0.0623812702
 127 -0.058 -0.061  0.059  0.043  0.048  0.237   0.0623781806
 130 -0.058 -0.061  0.059  0.043  0.055  0.237   0.0623740015
 139 -0.058 -0.061  0.059  0.043  0.055  0.275   0.0622762950
 141 -0.058 -0.061  0.059  0.043  0.055  0.271   0.0622752155
  powell nthiter 2: fret = 0.062275
 152 -0.051 -0.061  0.059  0.043  0.055  0.271   0.0622712899
 154 -0.049 -0.061  0.059  0.043  0.055  0.271   0.0622712845
 157 -0.050 -0.061  0.059  0.043  0.055  0.271   0.0622711745
 164 -0.050 -0.068  0.059  0.043  0.055  0.271   0.0622541139
 165 -0.050 -0.080  0.059  0.043  0.055  0.271   0.0622441888
 166 -0.050 -0.079  0.059  0.043  0.055  0.271   0.0622436918
 167 -0.050 -0.077  0.059  0.043  0.055  0.271   0.0622434451
 176 -0.050 -0.077  0.044  0.043  0.055  0.271   0.0622260690
 178 -0.050 -0.077  0.045  0.043  0.055  0.271   0.0622259405
 187 -0.050 -0.077  0.045  0.048  0.055  0.271   0.0622193034
 188 -0.050 -0.077  0.045  0.050  0.055  0.271   0.0622187790
 197 -0.050 -0.077  0.045  0.050  0.063  0.271   0.0622138076
 198 -0.050 -0.077  0.045  0.050  0.062  0.271   0.0622137344
 207 -0.050 -0.077  0.045  0.050  0.062  0.275   0.0622117009
  powell nthiter 3: fret = 0.062212
 219 -0.047 -0.077  0.045  0.050  0.062  0.275   0.0622101033
 230 -0.047 -0.076  0.045  0.050  0.062  0.275   0.0622100189
 232 -0.047 -0.075  0.045  0.050  0.062  0.275   0.0622099987
 240 -0.047 -0.075  0.041  0.050  0.062  0.275   0.0622088388
 250 -0.047 -0.075  0.041  0.051  0.062  0.275   0.0622080426
 251 -0.047 -0.075  0.041  0.054  0.062  0.275   0.0622072780
 262 -0.047 -0.075  0.041  0.054  0.061  0.275   0.0622072420
 270 -0.047 -0.075  0.041  0.054  0.061  0.280   0.0622071930
 271 -0.047 -0.075  0.041  0.054  0.061  0.278   0.0622063544
 274 -0.044 -0.073  0.037  0.057  0.060  0.280   0.0622051339
  powell nthiter 4: fret = 0.062206
 301 -0.045 -0.075  0.039  0.054  0.061  0.278   0.0622049661
 302 -0.045 -0.075  0.037  0.054  0.061  0.278   0.0622048116
 312 -0.045 -0.075  0.037  0.055  0.061  0.278   0.0622044813
 321 -0.045 -0.075  0.037  0.055  0.060  0.278   0.0622043869
 322 -0.045 -0.075  0.037  0.055  0.059  0.278   0.0622043166
 333 -0.045 -0.075  0.037  0.055  0.059  0.279   0.0622041825
 335 -0.043 -0.075  0.033  0.056  0.057  0.280   0.0622040452
  powell nthiter 5: fret = 0.062204
 344 -0.043 -0.075  0.037  0.055  0.059  0.279   0.0622038035
 362 -0.043 -0.075  0.036  0.055  0.059  0.279   0.0622037773
 372 -0.043 -0.075  0.036  0.056  0.059  0.279   0.0622037100
 390 -0.043 -0.075  0.036  0.056  0.059  0.280   0.0622035851
 391 -0.042 -0.075  0.035  0.057  0.059  0.281   0.0622035672
 396 -0.041 -0.075  0.034  0.058  0.059  0.281   0.0622035550
 398 -0.041 -0.075  0.034  0.058  0.059  0.281   0.0622035212
 405 -0.041 -0.075  0.034  0.058  0.059  0.281   0.0622035151
  powell nthiter 6: fret = 0.062204
 432 -0.041 -0.075  0.033  0.058  0.059  0.281   0.0622035130
 442 -0.041 -0.075  0.033  0.057  0.059  0.281   0.0622035077
 457 -0.042 -0.075  0.034  0.056  0.059  0.280   0.0622034889
 462 -0.042 -0.075  0.034  0.056  0.059  0.280   0.0622034562
 465 -0.042 -0.075  0.034  0.056  0.059  0.280   0.0622034275
 467 -0.042 -0.075  0.034  0.056  0.059  0.280   0.0622034170
 468 -0.042 -0.075  0.034  0.056  0.059  0.280   0.0622034097
  powell nthiter 7: fret = 0.062203
 496 -0.042 -0.075  0.035  0.056  0.059  0.280   0.0622033020
 542 -0.042 -0.075  0.035  0.056  0.059  0.280   0.0622033012
 543 -0.042 -0.075  0.035  0.056  0.059  0.280   0.0622033005
  powell nthiter 8: fret = 0.062203
 613 -0.042 -0.075  0.035  0.056  0.059  0.280   0.0622033003
Powell done niters = 8
Computing relative cost
 0  -25.0 -25.0 -25.0   1.010742
 1  -25.0 -25.0  25.0   1.004847
 2  -25.0  25.0 -25.0   1.008443
 3  -25.0  25.0  25.0   1.006491
 4   25.0 -25.0 -25.0   0.990316
 5   25.0 -25.0  25.0   1.007719
 6   25.0  25.0 -25.0   0.987153
 7   25.0  25.0  25.0   1.000625
REL:  8  0.062203    8.016335  1.002042 rel = 0.0620765 
Number of iterations     8
Min cost was 0.062203
Number of FunctionCalls   623
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 109.405000 sec
Parameters at optimum (transmm) -0.04224 -0.07514  0.03523
Parameters at optimum (rotdeg)  0.05585  0.05924  0.28038 
Final costs ----------------
Number of surface hits 281236
WM  Intensity   383.3970 +/-  78.3371
Ctx Intensity   615.4795 +/- 141.1354
Pct Contrast     45.1296 +/-  23.4386
Cost   0.0622
RelCost   0.0673
Reg at min cost was 
-0.99082   0.12580  -0.04938  -0.66526;
-0.04022   0.07434   0.99642   1.63318;
-0.12902  -0.98927   0.06860  -6.68214;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.99088   0.12718  -0.04457  -0.60770;
-0.03550   0.07276   0.99672   1.70480;
-0.13001  -0.98921   0.06758  -6.71966;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00005   0.00139   0.00481   0.05756;
 0.00472  -0.00158   0.00030   0.07162;
-0.00099   0.00006  -0.00102  -0.03752;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.174542
Computing change in rh position
Surface-RMS-Diff-mm 0.230564 0.097078 0.443487
mri_segreg done
MinCost: 0.062203 383.397027 615.479498 45.129616 
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.99082   0.12580  -0.04938  -0.66526;
-0.04022   0.07434   0.99642   1.63318;
-0.12902  -0.98927   0.06860  -6.68214;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_053/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.99082   0.12580  -0.04938  -0.66526;
-0.04022   0.07434   0.99642   1.63318;
-0.12902  -0.98927   0.06860  -6.68214;
 0.00000   0.00000   0.00000   1.00000;
Determinant -0.999998
subject = Patient_053
RegMat ---------------------------
-0.99082   0.12580  -0.04938  -0.66526;
-0.04022   0.07434   0.99642   1.63318;
-0.12902  -0.98927   0.06860  -6.68214;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Sat Mar 18 06:40:44 AEST 2017 
Ended   at Sat Mar 18 06:45:15 AEST 2017
BBR-Run-Time-Sec 271
 
bbregister Done
To check results, run:
tkregisterfv --mov biasmeanb0bet.nii.gz --reg register.dat --surfs 
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-JRA2F2/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/biascorr.mif /tmp/dwi2response-tmp-JRA2F2/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-JRA2F2/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-JRA2F2/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,3000 with 12,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 3000 dwi_b3000.mif
[03;34mCommand:[0m mrmath dwi_b3000.mif mean mean_b3000.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b3000.mif -finite mean_b3000.mif 0 -if 0 -le err_b3000.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b3000.mif -divide -log sdm_b3000.mif
[03;34mCommand:[0m mrcalc sdm_b3000.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b3000.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.25569 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.44256 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.84798 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 1.95684 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 1.95684 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 1.95684 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.81435 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.81435 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 553 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 553 -iter_voxels 5530 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-JRA2F2/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.94665 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 604 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 604 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 1849 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 328521 --> 266901 --> 266861[0m
dwi2response: [03;32mWM: 118417 --> 110593 --> 553 (SF)[0m
dwi2response: [03;32mGM: 102331 --> 60396 --> 1208[0m
dwi2response: [03;32mCSF: 46113 --> 18485 --> 1849[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b3000.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb3000.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_053/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-JRA2F2/[0m
