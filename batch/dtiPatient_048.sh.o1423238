dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/dwipreproc_cust-tmp-NKYWWU/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/dwipreproc_cust-tmp-NKYWWU/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/dwipreproc_cust-tmp-NKYWWU/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/dwipreproc_cust-tmp-NKYWWU/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/dwipreproc_cust-tmp-NKYWWU/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 102[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
  -0.999992 -0.00301388  0.00267922        3000
  0.0258177   -0.744305   -0.667341        3000
-0.00361842    0.517421    0.855723        3000
   0.272897    0.827765   -0.490238        3000
  -0.651366    0.404414   -0.642006        3000
   0.507306    0.261176    0.821236        3000
   0.959357    0.280487   0.0310031        3000
   0.534936    0.379985   -0.754622        3000
  -0.316675    0.132964   -0.939169        3000
          0           0           0           0
   0.505185   -0.590307   -0.629544        3000
    0.60072     0.09467   -0.793835        3000
  -0.953718   -0.155497   -0.257378        3000
  -0.527996   -0.742166    0.412808        3000
   0.193738    -0.92485    0.327289        3000
  -0.365108    0.925763  -0.0982858        3000
   0.259503    0.930335    0.259106        3000
  0.0234838    0.509923   -0.859899        3000
   -0.61436    0.788438  -0.0304495        3000
          0           0           0           0
   0.872369   0.0375502    0.487403        3000
   -0.74399   -0.229647    0.627488        3000
   0.487497    0.676091    0.552492        3000
  -0.451631   -0.890441  -0.0560729        3000
  -0.662164   -0.431004   -0.613004        3000
  -0.853556    0.236379   -0.464293        3000
  -0.438822   -0.505674   -0.742785        3000
   0.957528   -0.139801   -0.252181        3000
  -0.703335   -0.594296   -0.390042        3000
          0           0           0           0
  -0.387637   -0.179621    0.904143        3000
   0.142882    -0.68071    0.718483        3000
  -0.803166   -0.595472   0.0183533        3000
  -0.288518   -0.136856   -0.947643        3000
   0.963121   -0.128016    0.236663        3000
  -0.151608   -0.695741     0.70211        3000
 -0.0176315   -0.982909   -0.183248        3000
  -0.377363   -0.897096    0.229819        3000
    0.66827    0.728412    0.151101        3000
          0           0           0           0
  -0.290961   -0.465117    0.836067        3000
   -0.72158   -0.162889   -0.672896        3000
   0.717199   -0.658207    0.228885        3000
   0.428429   -0.580593    0.692359        3000
   0.958923   -0.282488  -0.0258317        3000
   0.493165   -0.295734    0.818125        3000
   -0.89454    0.397732   -0.203981        3000
   0.203779    0.978685  -0.0254803        3000
  -0.230605    0.965611    0.120067        3000
          0           0           0           0
   0.739918    0.599357   -0.305438        3000
    0.84421    0.335608   -0.417943        3000
    0.10504   -0.283705    0.953141        3000
   0.239354    0.398978     0.88517        3000
   0.614141    0.777853   -0.133329        3000
   -0.26663    0.456438   -0.848866        3000
  -0.658621   -0.512499    0.550965        3000
   0.256915   -0.895121   -0.364353        3000
  -0.249322   -0.820154   -0.514961        3000
          0           0           0           0
  -0.572958    0.658466   -0.487997        3000
 -0.0227961   -0.248211   -0.968438        3000
  -0.224479    0.320415    0.920295        3000
   0.836866    0.322589    0.442258        3000
   0.860736    0.464828    0.207532        3000
  -0.487768   -0.809663   -0.326388        3000
   0.106663    0.947244   -0.302244        3000
  -0.542128  0.00466449   -0.840283        3000
   0.250644   -0.576175   -0.777946        3000
          0           0           0           0
   0.228906  -0.0495374   -0.972187        3000
   0.216008     0.65234    0.726494        3000
  -0.961579   -0.144774     0.23325        3000
  -0.311834    0.788257   -0.530481        3000
   0.870626   -0.429252   -0.240319        3000
   -0.84485    0.263886    0.465395        3000
  -0.894794   -0.410885    0.174693        3000
   0.703502   -0.678158   -0.212571        3000
    0.66642   -0.350752   -0.657919        3000
          0           0           0           0
  -0.517217    0.749012    0.414086        3000
   0.719683   -0.133761    0.681296        3000
  0.0413639  -0.0158201    0.999019        3000
  -0.827542     0.56136  0.00695171        3000
  -0.452753    0.385224    0.804125        3000
   0.879671   0.0348343   -0.474306        3000
     0.1489    0.246066   -0.957748        3000
   0.767995    -0.48327    0.420278        3000
   0.478985   -0.133807   -0.867565        3000
          0           0           0           0
   -0.71746     0.53237    0.449259        3000
    0.48249   -0.822052    0.302379        3000
  -0.281816    0.761423    0.583794        3000
 -0.0170849    0.846813   -0.531616        3000
  0.0653616   -0.993208   0.0962546        3000
   0.421805    0.633141   -0.649009        3000
  -0.732913   0.0978053    0.673255        3000
  0.0011924    0.896268    0.443511        3000
   0.476187   -0.861795   -0.174803        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/dwipreproc_cust-tmp-NKYWWU/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-E9N6KO/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-E9N6KO/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-E9N6KO/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-E9N6KO/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-E9N6KO/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
83313
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-HLDE18/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-HLDE18/parc.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/brainFS.nii /tmp/labelsgmfix-tmp-HLDE18/T1.nii -stride -1,+2,+3
labelsgmfix: [03;32mChanging to temporary directory (/tmp/labelsgmfix-tmp-HLDE18/)[0m
[03;34mCommand:[0m run_first_all -s R_Thal,L_Puta,R_Caud,R_Hipp,L_Amyg,R_Pall,R_Amyg,L_Caud,L_Pall,L_Thal,L_Hipp,R_Accu,L_Accu,R_Puta -i T1.nii -b -o first
[03;34mCommand:[0m mrcalc parc.mif 0 -min sgm.mif
[03;34mCommand:[0m meshconvert first-R_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Thal_mask.mif 6 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Puta_mask.mif 3 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Caud_mask.mif 7 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Hipp_mask.mif 13 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Amyg_mask.mif 12 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Pall_mask.mif 9 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Amyg_mask.mif 14 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Caud_mask.mif 2 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Pall_mask.mif 4 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Thal_mask.mif 1 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Hipp_mask.mif 11 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Accu_mask.mif 10 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Accu_mask.mif 5 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Puta_mask.mif 8 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m mrmath R_Thal_mask.mif L_Puta_mask.mif R_Caud_mask.mif R_Hipp_mask.mif L_Amyg_mask.mif R_Pall_mask.mif R_Amyg_mask.mif L_Caud_mask.mif L_Pall_mask.mif L_Thal_mask.mif L_Hipp_mask.mif R_Accu_mask.mif L_Accu_mask.mif R_Puta_mask.mif sum - | mrcalc - 1 -gt sgm_overlap_mask.mif
[03;34mCommand:[0m mrcalc sgm_overlap_mask.mif 0 sgm.mif -if sgm_masked.mif
[03;34mCommand:[0m labelconvert sgm_masked.mif /software/mrtrix3/mrtrix3-AP/scripts/data/FreeSurferSGM.txt /software/mrtrix3/mrtrix3-AP/src/connectome/tables/fs_a2009s.txt sgm_new_labels.mif
[03;34mCommand:[0m mrcalc parc.mif 83 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 78 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 84 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 87 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 81 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 86 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 88 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 77 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 79 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 76 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 80 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 89 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 82 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 85 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc sgm_new_labels.mif 0.5 -gt sgm_new_labels.mif parc.mif -if result.mif -datatype uint32
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/parc_fixsubcort.nii
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc)[0m
labelsgmfix: [03;32mDeleting temporary directory /tmp/labelsgmfix-tmp-HLDE18/[0m
tmp ./tmp.bbregister.11701
Log file is register.dat.log
Sat Mar 18 00:17:39 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc
/software/freesurfer/freesurfer-6.0.0/bin/bbregister --s Patient_048 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.75 2016/05/10 20:02:28 greve Exp $
Linux hpcnode017.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-6.0.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.11701/template.nii
mri_convert.bin biasmeanb0bet.nii.gz ./tmp.bbregister.11701/template.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.998012, -0.0379563, -0.0503225)
j_ras = (0.043749, 0.991868, 0.119516)
k_ras = (0.0453769, -0.12148, 0.991556)
writing to ./tmp.bbregister.11701/template.nii...
fslregister --s Patient_048 --mov ./tmp.bbregister.11701/template.nii --reg ./tmp.bbregister.11701/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.11701/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov

Log file is ./tmp.bbregister.11701/reg.init.dat.fslregister.log

Sat Mar 18 00:17:39 AEST 2017
--s Patient_048 --mov ./tmp.bbregister.11701/template.nii --reg ./tmp.bbregister.11701/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.11701/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov
$Id: fslregister,v 1.40 2016/02/12 21:43:15 zkaufman Exp $
hpcnode017.adqimr.ad.lan
Linux hpcnode017.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc
mri_convert /working/lab_michaebr/alistaiP/Park/FS/Patient_048/mri/brainmask.mgz ./tmp.bbregister.11701/fslregister/refvol.fslregister.nii
mri_convert.bin /working/lab_michaebr/alistaiP/Park/FS/Patient_048/mri/brainmask.mgz ./tmp.bbregister.11701/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/Park/FS/Patient_048/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 1.39698e-09, 0)
j_ras = (0, -7.45058e-09, -1)
k_ras = (-1.86265e-09, 1, 0)
writing to ./tmp.bbregister.11701/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc
mri_convert ./tmp.bbregister.11701/template.nii ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii --frame 0
mri_convert.bin ./tmp.bbregister.11701/template.nii ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from ./tmp.bbregister.11701/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.998012, -0.0379563, -0.0503225)
j_ras = (0.043749, 0.991868, 0.119516)
k_ras = (0.0453769, -0.12148, 0.991556)
keeping frame 0
writing to ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.11701/template.nii
reg file       ./tmp.bbregister.11701/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.11701/template.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.99801   0.03796   0.05032   1.71874;
 0.04538  -0.12148   0.99156  -0.00002;
-0.04375  -0.99187  -0.11952  -0.00001;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
-0.99801   0.03796   0.05032   1.71874;
 0.04538  -0.12148   0.99156  -0.00002;
-0.04375  -0.99187  -0.11952  -0.00001;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.00000  -0.00000  -0.00000   1.71874;
 0.00000   1.00000  -0.00000  -0.00001;
 0.00000  -0.00000   1.00000  -0.00001;
 0.00000   0.00000   0.00000   1.00000;
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc
tkregister2_cmdl --mov ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.11701/fslregister/reg0.11747.dat --regheader --fslregout ./tmp.bbregister.11701/reg.init.dat.fsl.mat0 --s Patient_048 --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.11701/fslregister/reg0.11747.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_048/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.99801  -0.03796  -0.05032   0.96262;
 0.04538  -0.12148   0.99156  -0.24832;
-0.04375  -0.99187  -0.11952  -2.45618;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99801  -0.03796  -0.05032   0.96262;
 0.04538  -0.12148   0.99156  -0.24832;
-0.04375  -0.99187  -0.11952  -2.45618;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_048
RegMat ---------------------------
 0.99801  -0.03796  -0.05032   0.96262;
 0.04538  -0.12148   0.99156  -0.24832;
-0.04375  -0.99187  -0.11952  -2.45618;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Sat Mar 18 00:17:41 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc
flirt.fsl -ref ./tmp.bbregister.11701/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.11701/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/fsl.5.0.2.xyztrans.sch -init ./tmp.bbregister.11701/reg.init.dat.fsl.mat0
Sat Mar 18 00:17:51 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc
flirt.fsl -ref ./tmp.bbregister.11701/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.11701/reg.init.dat.fsl.mat -init ./tmp.bbregister.11701/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_048 --mov ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.11701/reg.init.dat --fslreg ./tmp.bbregister.11701/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.99712  -0.05163  -0.05548   28.81190;
-0.06070  -0.10557  -0.99256   223.93800;
 0.04539   0.99307  -0.10840   20.04800;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.11701/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_048/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.11701/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.99712  -0.04539  -0.06070   0.37455;
 0.05548  -0.10840   0.99256   1.51863;
-0.05163  -0.99307  -0.10557  -2.21117;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99712  -0.04539  -0.06070   0.37455;
 0.05548  -0.10840   0.99256   1.51863;
-0.05163  -0.99307  -0.10557  -2.21117;
 0.00000   0.00000   0.00000   1.00000;
Determinant 0.999999
subject = Patient_048
RegMat ---------------------------
 0.99712  -0.04539  -0.06070   0.37455;
 0.05548  -0.10840   0.99256   1.51863;
-0.05163  -0.99307  -0.10557  -2.21117;
 0.00000   0.00000   0.00000   1.00000;
mri_matrix_multiply -im ./tmp.bbregister.11701/fslregister/swapreg.dat -im ./tmp.bbregister.11701/reg.init.dat -om ./tmp.bbregister.11701/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Sat Mar 18 00:17:39 AEST 2017 
Ended   at Sat Mar 18 00:18:11 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.11701/template.nii --reg ./tmp.bbregister.11701/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.11701/template.nii --init-reg ./tmp.bbregister.11701/reg.init.dat --out-reg ./tmp.bbregister.11701/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc
mri_segreg --mov ./tmp.bbregister.11701/template.nii --init-reg ./tmp.bbregister.11701/reg.init.dat --out-reg ./tmp.bbregister.11701/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode017.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.11701/template.nii
regfile ./tmp.bbregister.11701/reg.init.dat
subject Patient_048
dof 6
outregfile ./tmp.bbregister.11701/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490642674
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99712   0.04539   0.06070   1.34419;
 0.05548  -0.10840   0.99256   1.51862;
-0.05163  -0.99307  -0.10557  -2.21117;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.016474
 1  -25.0 -25.0  25.0   1.018787
 2  -25.0  25.0 -25.0   0.991647
 3  -25.0  25.0  25.0   0.992597
 4   25.0 -25.0 -25.0   1.028153
 5   25.0 -25.0  25.0   0.955525
 6   25.0  25.0 -25.0   1.002845
 7   25.0  25.0  25.0   0.993774
REL:  8  0.091562    7.999803  0.999975 rel = 0.0915642 
Initial costs ----------------
Number of surface hits 2788
WM  Intensity   342.2948 +/-  60.6754
Ctx Intensity   490.6620 +/- 114.9692
Pct Contrast     34.1089 +/-  20.7579
Cost   0.0916
RelCost   0.0916

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      0.9643   0.9643  0.0
     4  -4.0000  -4.0000  -4.0000  -4.0000   0.0000   0.0000      0.9550   0.9550  0.0
     6  -4.0000  -4.0000  -4.0000  -4.0000   4.0000  -4.0000      0.9438   0.9438  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.8913   0.8913  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.8298   0.8298  0.0
    97  -4.0000   0.0000  -4.0000   0.0000   4.0000   0.0000      0.8218   0.8218  0.0
   102  -4.0000   0.0000  -4.0000   4.0000   0.0000  -4.0000      0.8178   0.8178  0.0
   118  -4.0000   0.0000   0.0000   0.0000  -4.0000   0.0000      0.7677   0.7677  0.0
   121  -4.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.7537   0.7537  0.0
   124  -4.0000   0.0000   0.0000   0.0000   4.0000   0.0000      0.7238   0.7238  0.0
   274   0.0000  -4.0000   0.0000  -4.0000   0.0000   0.0000      0.6754   0.6754  0.0
   363   0.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.6035   0.6035  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0916   0.0916  0.0
Brute Force --------------------------
Min cost was 0.091562
Number of iterations   729
Search time 1.006000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.091562
   8  0.031  0.000  0.000  0.000  0.000  0.000   0.0913193430
  10  0.021  0.000  0.000  0.000  0.000  0.000   0.0911977316
  12  0.019  0.000  0.000  0.000  0.000  0.000   0.0911930231
  13  0.018  0.000  0.000  0.000  0.000  0.000   0.0911925224
  19  0.018 -0.618  0.000  0.000  0.000  0.000   0.0852424750
  21  0.018 -0.346  0.000  0.000  0.000  0.000   0.0789648599
  22  0.018 -0.360  0.000  0.000  0.000  0.000   0.0785355997
  23  0.018 -0.426  0.000  0.000  0.000  0.000   0.0772364238
  27  0.018 -0.421  0.000  0.000  0.000  0.000   0.0771800124
  28  0.018 -0.420  0.000  0.000  0.000  0.000   0.0771782567
  36  0.018 -0.420  0.126  0.000  0.000  0.000   0.0740479671
  38  0.018 -0.420  0.123  0.000  0.000  0.000   0.0740465791
  39  0.018 -0.420  0.124  0.000  0.000  0.000   0.0740465458
  49  0.018 -0.420  0.124  0.013  0.000  0.000   0.0739774154
  51  0.018 -0.420  0.124  0.012  0.000  0.000   0.0739762301
  61  0.018 -0.420  0.124  0.012 -0.011  0.000   0.0739331487
  63  0.018 -0.420  0.124  0.012 -0.009  0.000   0.0739303041
  65  0.018 -0.420  0.124  0.012 -0.008  0.000   0.0739286885
  76  0.018 -0.420  0.124  0.012 -0.008 -0.027   0.0739192190
  77  0.018 -0.420  0.124  0.012 -0.008 -0.015   0.0738320292
  78  0.018 -0.420  0.124  0.012 -0.008 -0.014   0.0738297917
  79  0.018 -0.420  0.124  0.012 -0.008 -0.011   0.0738283505
  82  0.018 -0.420  0.124  0.012 -0.008 -0.012   0.0738282775
  powell nthiter 1: fret = 0.073828
  93  0.015 -0.420  0.124  0.012 -0.008 -0.012   0.0738232796
 107  0.015 -0.408  0.124  0.012 -0.008 -0.012   0.0737741085
 108  0.015 -0.409  0.124  0.012 -0.008 -0.012   0.0737717382
 109  0.015 -0.411  0.124  0.012 -0.008 -0.012   0.0737711066
 119  0.015 -0.411  0.122  0.012 -0.008 -0.012   0.0737656558
 120  0.015 -0.411  0.116  0.012 -0.008 -0.012   0.0737537287
 122  0.015 -0.411  0.113  0.012 -0.008 -0.012   0.0737519700
 123  0.015 -0.411  0.112  0.012 -0.008 -0.012   0.0737518065
 133  0.015 -0.411  0.112  0.024 -0.008 -0.012   0.0737326664
 134  0.015 -0.411  0.112  0.020 -0.008 -0.012   0.0737287881
 144  0.015 -0.411  0.112  0.020 -0.015 -0.012   0.0737272409
 145  0.015 -0.411  0.112  0.020 -0.012 -0.012   0.0737239163
 159  0.015 -0.411  0.112  0.020 -0.012 -0.021   0.0737150004
 160  0.015 -0.411  0.112  0.020 -0.012 -0.018   0.0737115457
 161  0.015 -0.411  0.112  0.020 -0.012 -0.017   0.0737109307
 163  0.013 -0.402  0.100  0.029 -0.017 -0.022   0.0736932478
 169  0.014 -0.405  0.104  0.025 -0.015 -0.021   0.0736871012
 170  0.014 -0.404  0.103  0.026 -0.016 -0.021   0.0736868553
 171  0.014 -0.405  0.104  0.026 -0.016 -0.021   0.0736866679
  powell nthiter 2: fret = 0.073687
 210  0.014 -0.405  0.107  0.026 -0.016 -0.021   0.0736843661
 221  0.014 -0.405  0.107  0.029 -0.016 -0.021   0.0736817778
 222  0.014 -0.405  0.107  0.031 -0.016 -0.021   0.0736802420
 224  0.014 -0.405  0.107  0.035 -0.016 -0.021   0.0736795517
 234  0.014 -0.405  0.107  0.035 -0.014 -0.021   0.0736759618
 236  0.014 -0.405  0.107  0.035 -0.013 -0.021   0.0736751996
 237  0.014 -0.405  0.107  0.035 -0.012 -0.021   0.0736751000
 245  0.013 -0.401  0.102  0.038 -0.013 -0.023   0.0736653368
  powell nthiter 3: fret = 0.073665
 272  0.013 -0.401  0.102  0.038 -0.013 -0.061   0.0735805035
 276  0.013 -0.401  0.102  0.038 -0.013 -0.072   0.0735557058
 279  0.013 -0.401  0.102  0.038 -0.013 -0.069   0.0735529514
 280  0.013 -0.401  0.102  0.038 -0.013 -0.070   0.0735523749
 290  0.013 -0.401  0.113  0.038 -0.013 -0.070   0.0735422534
 291  0.013 -0.401  0.109  0.038 -0.013 -0.070   0.0735337251
 292  0.013 -0.401  0.108  0.038 -0.013 -0.070   0.0735337184
 302  0.013 -0.401  0.108  0.044 -0.013 -0.070   0.0735161067
 303  0.013 -0.401  0.108  0.045 -0.013 -0.070   0.0735159209
 312  0.013 -0.401  0.108  0.045 -0.023 -0.070   0.0734627343
 314  0.013 -0.401  0.108  0.045 -0.022 -0.070   0.0734624437
 318  0.010 -0.392  0.096  0.054 -0.026 -0.075   0.0733948921
 323  0.010 -0.393  0.098  0.052 -0.026 -0.074   0.0733925307
 324  0.010 -0.394  0.098  0.052 -0.026 -0.074   0.0733925072
 325  0.010 -0.394  0.098  0.052 -0.026 -0.074   0.0733923970
 327  0.010 -0.394  0.099  0.052 -0.025 -0.074   0.0733923287
  powell nthiter 4: fret = 0.073392
 343  0.018 -0.394  0.099  0.052 -0.025 -0.074   0.0733688123
 345  0.015 -0.394  0.099  0.052 -0.025 -0.074   0.0733615262
 361  0.015 -0.394  0.099  0.052 -0.025 -0.075   0.0733606661
 370  0.015 -0.394  0.107  0.052 -0.025 -0.075   0.0733555830
 371  0.015 -0.394  0.104  0.052 -0.025 -0.075   0.0733521103
 373  0.015 -0.394  0.105  0.052 -0.025 -0.075   0.0733518847
 393  0.015 -0.394  0.105  0.052 -0.027 -0.075   0.0733508988
 396  0.013 -0.385  0.093  0.060 -0.031 -0.080   0.0733365527
 400  0.014 -0.388  0.097  0.057 -0.030 -0.078   0.0733235289
 401  0.014 -0.389  0.099  0.056 -0.029 -0.078   0.0733230714
 410  0.018 -0.384  0.098  0.061 -0.033 -0.081   0.0733067223
 416  0.016 -0.386  0.098  0.059 -0.031 -0.080   0.0733056159
 417  0.017 -0.385  0.098  0.060 -0.032 -0.080   0.0733045427
 418  0.017 -0.385  0.098  0.060 -0.032 -0.080   0.0733045150
 421  0.017 -0.386  0.098  0.060 -0.032 -0.080   0.0733044841
  powell nthiter 5: fret = 0.073304
 435  0.017 -0.386  0.100  0.059 -0.032 -0.080   0.0733034857
 440  0.017 -0.386  0.100  0.059 -0.032 -0.080   0.0733034181
 453  0.017 -0.386  0.100  0.059 -0.032 -0.076   0.0733002063
 454  0.017 -0.386  0.100  0.059 -0.032 -0.077   0.0732975930
 465  0.017 -0.386  0.101  0.059 -0.032 -0.077   0.0732947689
 466  0.017 -0.386  0.102  0.059 -0.032 -0.077   0.0732946697
 487  0.017 -0.386  0.102  0.059 -0.029 -0.077   0.0732903366
 496  0.018 -0.386  0.102  0.060 -0.030 -0.078   0.0732894025
 498  0.017 -0.386  0.102  0.060 -0.030 -0.078   0.0732893911
 502  0.017 -0.386  0.102  0.060 -0.030 -0.078   0.0732892970
 503  0.017 -0.386  0.102  0.060 -0.030 -0.078   0.0732891745
  powell nthiter 6: fret = 0.073289
 511  0.016 -0.382  0.097  0.063 -0.031 -0.080   0.0732833043
 515  0.016 -0.382  0.097  0.063 -0.031 -0.080   0.0732833016
 516  0.016 -0.382  0.097  0.063 -0.031 -0.080   0.0732832051
 519  0.016 -0.382  0.097  0.063 -0.031 -0.080   0.0732831750
 533  0.016 -0.382  0.097  0.063 -0.031 -0.079   0.0732814985
 554  0.016 -0.382  0.097  0.064 -0.031 -0.079   0.0732803437
 565  0.016 -0.382  0.097  0.064 -0.029 -0.079   0.0732726256
 566  0.016 -0.382  0.097  0.064 -0.028 -0.079   0.0732721612
 574  0.016 -0.383  0.097  0.063 -0.028 -0.078   0.0732713834
 575  0.016 -0.383  0.097  0.064 -0.028 -0.078   0.0732712358
 581  0.014 -0.381  0.093  0.067 -0.026 -0.078   0.0732638691
 588  0.014 -0.380  0.092  0.068 -0.025 -0.078   0.0732636060
 594  0.014 -0.380  0.092  0.068 -0.025 -0.078   0.0732635345
  powell nthiter 7: fret = 0.073264
 603  0.014 -0.379  0.091  0.069 -0.026 -0.079   0.0732628129
 604  0.014 -0.379  0.091  0.069 -0.026 -0.079   0.0732627702
 606  0.014 -0.379  0.091  0.069 -0.026 -0.079   0.0732627549
 607  0.014 -0.379  0.091  0.069 -0.026 -0.079   0.0732627074
 609  0.014 -0.379  0.091  0.069 -0.026 -0.079   0.0732625823
 625  0.014 -0.379  0.091  0.069 -0.026 -0.078   0.0732620968
 636  0.014 -0.379  0.093  0.069 -0.026 -0.078   0.0732608116
 654  0.015 -0.379  0.093  0.070 -0.027 -0.078   0.0732597860
 655  0.015 -0.379  0.093  0.069 -0.027 -0.078   0.0732596989
 657  0.014 -0.379  0.093  0.069 -0.026 -0.078   0.0732596977
 661  0.014 -0.379  0.093  0.069 -0.026 -0.078   0.0732596429
 674  0.014 -0.379  0.093  0.070 -0.026 -0.078   0.0732595824
 675  0.014 -0.379  0.093  0.070 -0.026 -0.078   0.0732594919
Powell done niters = 7
Computing relative cost
 0  -25.0 -25.0 -25.0   1.006979
 1  -25.0 -25.0  25.0   1.024415
 2  -25.0  25.0 -25.0   1.002834
 3  -25.0  25.0  25.0   0.996129
 4   25.0 -25.0 -25.0   1.011307
 5   25.0 -25.0  25.0   0.981050
 6   25.0  25.0 -25.0   1.012691
 7   25.0  25.0  25.0   0.981582
REL:  8  0.073259    8.016987  1.002123 rel = 0.0731043 
Number of iterations     7
Min cost was 0.073259
Number of FunctionCalls   682
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 0.938000 sec
Parameters at optimum (transmm)  0.01443 -0.37854  0.09252
Parameters at optimum (rotdeg)  0.06956 -0.02637 -0.07839 
Final costs ----------------
Number of surface hits 2788
WM  Intensity   340.8957 +/-  60.0077
Ctx Intensity   485.5939 +/- 105.1497
Pct Contrast     33.8819 +/-  19.5007
Cost   0.0733
RelCost   0.0916
Reg at min cost was 
-0.99702   0.04570   0.06210   1.36172;
 0.05691  -0.10726   0.99260   1.14093;
-0.05202  -0.99318  -0.10434  -2.11619;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to ./tmp.bbregister.11701/bbr.pass1.dat, type = 14 
Original Reg 
-0.99712   0.04539   0.06070   1.34419;
 0.05548  -0.10840   0.99256   1.51862;
-0.05163  -0.99307  -0.10557  -2.21117;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00010  -0.00031  -0.00141  -0.01753;
-0.00143  -0.00114  -0.00004   0.37770;
 0.00039   0.00011  -0.00123  -0.09499;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.470805
Computing change in rh position
Surface-RMS-Diff-mm 0.423211 0.070949 0.558382
mri_segreg done
mri_segreg --mov ./tmp.bbregister.11701/template.nii --init-reg ./tmp.bbregister.11701/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.11701/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc
mri_segreg --mov ./tmp.bbregister.11701/template.nii --init-reg ./tmp.bbregister.11701/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.11701/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode017.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.11701/template.nii
regfile ./tmp.bbregister.11701/bbr.pass1.dat
subject Patient_048
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490284424
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99702   0.04570   0.06210   1.36172;
 0.05691  -0.10726   0.99260   1.14093;
-0.05202  -0.99318  -0.10434  -2.11619;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.017522
 1  -25.0 -25.0  25.0   1.002777
 2  -25.0  25.0 -25.0   0.999115
 3  -25.0  25.0  25.0   1.004592
 4   25.0 -25.0 -25.0   0.997153
 5   25.0 -25.0  25.0   1.001886
 6   25.0  25.0 -25.0   0.995282
 7   25.0  25.0  25.0   0.974834
REL:  8  0.080650    7.993161  0.999145 rel = 0.0807186 
Initial costs ----------------
Number of surface hits 278570
WM  Intensity   341.4075 +/-  60.4987
Ctx Intensity   488.2336 +/- 109.0550
Pct Contrast     34.1508 +/-  19.5799
Cost   0.0806
RelCost   0.0807

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.0858   0.0858  0.0
     1  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.0000      0.0804   0.0804  0.0
     2  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.1000      0.0774   0.0774  0.0
    11  -0.1000  -0.1000  -0.1000   0.0000  -0.1000   0.1000      0.0774   0.0774  0.0
    14  -0.1000  -0.1000  -0.1000   0.0000   0.0000   0.1000      0.0763   0.0763  0.0
    32  -0.1000  -0.1000   0.0000  -0.1000   0.0000   0.1000      0.0762   0.0762  0.0
    44  -0.1000  -0.1000   0.0000   0.0000   0.1000   0.1000      0.0760   0.0760  0.0
    68  -0.1000  -0.1000   0.1000   0.0000   0.0000   0.1000      0.0756   0.0756  0.0
    95  -0.1000   0.0000  -0.1000   0.0000   0.0000   0.1000      0.0755   0.0755  0.0
   103  -0.1000   0.0000  -0.1000   0.1000   0.0000   0.0000      0.0746   0.0746  0.0
   130  -0.1000   0.0000   0.0000   0.1000   0.0000   0.0000      0.0744   0.0744  0.0
   149  -0.1000   0.0000   0.1000   0.0000   0.0000   0.1000      0.0735   0.0735  0.0
   215  -0.1000   0.1000   0.0000   0.1000   0.1000   0.1000      0.0733   0.0733  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0733   0.0733  0.0
Brute Force --------------------------
Min cost was 0.073259
Number of iterations   729
Search time 1.033000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.080650
   7 -0.074  0.000  0.000  0.000  0.000  0.000   0.0802218746
   8 -0.063  0.000  0.000  0.000  0.000  0.000   0.0802174197
   9 -0.066  0.000  0.000  0.000  0.000  0.000   0.0802161635
  10 -0.065  0.000  0.000  0.000  0.000  0.000   0.0802160999
  18 -0.065  0.122  0.000  0.000  0.000  0.000   0.0791388300
  19 -0.065  0.112  0.000  0.000  0.000  0.000   0.0791359280
  20 -0.065  0.115  0.000  0.000  0.000  0.000   0.0791344884
  21 -0.065  0.116  0.000  0.000  0.000  0.000   0.0791344355
  29 -0.065  0.116  0.035  0.000  0.000  0.000   0.0791071190
  31 -0.065  0.116  0.030  0.000  0.000  0.000   0.0791062018
  40 -0.065  0.116  0.030  0.058  0.000  0.000   0.0790713519
  41 -0.065  0.116  0.030  0.033  0.000  0.000   0.0790288858
  43 -0.065  0.116  0.030  0.030  0.000  0.000   0.0790281074
  46 -0.065  0.116  0.030  0.028  0.000  0.000   0.0790278508
  55 -0.065  0.116  0.030  0.028  0.052  0.000   0.0787267237
  56 -0.065  0.116  0.030  0.028  0.054  0.000   0.0787252937
  58 -0.065  0.116  0.030  0.028  0.055  0.000   0.0787249693
  66 -0.065  0.116  0.030  0.028  0.055  0.126   0.0778824309
  67 -0.065  0.116  0.030  0.028  0.055  0.114   0.0778668855
  69 -0.065  0.116  0.030  0.028  0.055  0.113   0.0778665953
  powell nthiter 1: fret = 0.077867
  78 -0.056  0.116  0.030  0.028  0.055  0.113   0.0778429905
  79 -0.049  0.116  0.030  0.028  0.055  0.113   0.0778355627
  80 -0.045  0.116  0.030  0.028  0.055  0.113   0.0778347116
  81 -0.046  0.116  0.030  0.028  0.055  0.113   0.0778345266
  89 -0.046  0.122  0.030  0.028  0.055  0.113   0.0778236447
  90 -0.046  0.129  0.030  0.028  0.055  0.113   0.0778163516
  91 -0.046  0.132  0.030  0.028  0.055  0.113   0.0778157061
  92 -0.046  0.133  0.030  0.028  0.055  0.113   0.0778156109
  93 -0.046  0.134  0.030  0.028  0.055  0.113   0.0778154917
  98 -0.046  0.137  0.030  0.028  0.055  0.113   0.0778153574
  99 -0.046  0.136  0.030  0.028  0.055  0.113   0.0778152562
 106 -0.046  0.136  0.024  0.028  0.055  0.113   0.0778019557
 107 -0.046  0.136  0.011  0.028  0.055  0.113   0.0777935559
 108 -0.046  0.136  0.013  0.028  0.055  0.113   0.0777931389
 109 -0.046  0.136  0.014  0.028  0.055  0.113   0.0777931301
 117 -0.046  0.136  0.014  0.076  0.055  0.113   0.0777271938
 122 -0.046  0.136  0.014  0.075  0.055  0.113   0.0777270702
 129 -0.046  0.136  0.014  0.075  0.045  0.113   0.0776777245
 130 -0.046  0.136  0.014  0.075  0.024  0.113   0.0776740533
 132 -0.046  0.136  0.014  0.075  0.034  0.113   0.0776617930
 134 -0.046  0.136  0.014  0.075  0.035  0.113   0.0776617774
 143 -0.046  0.136  0.014  0.075  0.035  0.141   0.0776563612
 144 -0.046  0.136  0.014  0.075  0.035  0.128   0.0776315316
 145 -0.046  0.136  0.014  0.075  0.035  0.127   0.0776312222
 146 -0.046  0.136  0.014  0.075  0.035  0.126   0.0776312096
  powell nthiter 2: fret = 0.077631
 156 -0.045  0.136  0.014  0.075  0.035  0.126   0.0776272090
 157 -0.029  0.136  0.014  0.075  0.035  0.126   0.0776213665
 159 -0.036  0.136  0.014  0.075  0.035  0.126   0.0776101136
 160 -0.035  0.136  0.014  0.075  0.035  0.126   0.0776101105
 169 -0.035  0.134  0.014  0.075  0.035  0.126   0.0776099686
 177 -0.035  0.134  0.002  0.075  0.035  0.126   0.0775866211
 178 -0.035  0.134 -0.007  0.075  0.035  0.126   0.0775828554
 179 -0.035  0.134 -0.006  0.075  0.035  0.126   0.0775828116
 187 -0.035  0.134 -0.006  0.079  0.035  0.126   0.0775790603
 188 -0.035  0.134 -0.006  0.083  0.035  0.126   0.0775772209
 200 -0.035  0.134 -0.006  0.083  0.019  0.126   0.0775743573
 202 -0.035  0.134 -0.006  0.083  0.026  0.126   0.0775667197
 212 -0.035  0.134 -0.006  0.083  0.026  0.133   0.0775549088
 213 -0.035  0.134 -0.006  0.083  0.026  0.135   0.0775544719
  powell nthiter 3: fret = 0.077554
 224 -0.031  0.134 -0.006  0.083  0.026  0.135   0.0775504667
 234 -0.031  0.136 -0.006  0.083  0.026  0.135   0.0775501318
 252 -0.031  0.136 -0.006  0.084  0.026  0.135   0.0775499403
 253 -0.031  0.136 -0.006  0.085  0.026  0.135   0.0775499363
 264 -0.031  0.136 -0.006  0.085  0.023  0.135   0.0775484473
 275 -0.031  0.136 -0.006  0.085  0.023  0.138   0.0775474019
 278 -0.026  0.138 -0.006  0.087  0.020  0.141   0.0775457759
 284 -0.028  0.137 -0.006  0.086  0.022  0.139   0.0775456626
 285 -0.027  0.137 -0.006  0.086  0.021  0.140   0.0775455861
 287 -0.027  0.137 -0.006  0.086  0.021  0.140   0.0775455858
 294 -0.027  0.137 -0.006  0.086  0.021  0.140   0.0775455754
 295 -0.027  0.137 -0.006  0.086  0.021  0.140   0.0775455728
  powell nthiter 4: fret = 0.077546
 331 -0.027  0.137 -0.006  0.084  0.021  0.140   0.0775453041
 342 -0.027  0.137 -0.006  0.084  0.022  0.140   0.0775452371
 357 -0.027  0.137 -0.006  0.084  0.022  0.140   0.0775452228
 358 -0.027  0.137 -0.006  0.084  0.022  0.140   0.0775451973
  powell nthiter 5: fret = 0.077545
Powell done niters = 5
Computing relative cost
 0  -25.0 -25.0 -25.0   1.018233
 1  -25.0 -25.0  25.0   1.004086
 2  -25.0  25.0 -25.0   1.001396
 3  -25.0  25.0  25.0   1.004672
 4   25.0 -25.0 -25.0   0.997057
 5   25.0 -25.0  25.0   1.001397
 6   25.0  25.0 -25.0   0.996015
 7   25.0  25.0  25.0   0.975372
REL:  8  0.077545    7.998228  0.999779 rel = 0.0775624 
Number of iterations     5
Min cost was 0.077545
Number of FunctionCalls   426
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 35.440000 sec
Parameters at optimum (transmm) -0.02704  0.13736 -0.00585
Parameters at optimum (rotdeg)  0.08373  0.02179  0.14015 
Final costs ----------------
Number of surface hits 278570
WM  Intensity   341.4793 +/-  60.6030
Ctx Intensity   489.3319 +/- 109.6360
Pct Contrast     34.3404 +/-  19.5221
Cost   0.0775
RelCost   0.0807
Reg at min cost was 
-0.99718   0.04558   0.05963   1.33107;
 0.05455  -0.10569   0.99290   1.28470;
-0.05156  -0.99335  -0.10291  -2.12088;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.99702   0.04570   0.06210   1.36172;
 0.05691  -0.10726   0.99260   1.14093;
-0.05202  -0.99318  -0.10434  -2.11619;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00016   0.00012   0.00247   0.03065;
 0.00236  -0.00156  -0.00030  -0.14378;
-0.00046   0.00017  -0.00143   0.00469;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.201781
Computing change in rh position
Surface-RMS-Diff-mm 0.151431 0.080281 0.328294
mri_segreg done
MinCost: 0.077545 341.479270 489.331852 34.340433 
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.99718   0.04558   0.05963   1.33107;
 0.05455  -0.10569   0.99290   1.28470;
-0.05156  -0.99335  -0.10291  -2.12088;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_048/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.99718   0.04558   0.05963   1.33107;
 0.05455  -0.10569   0.99290   1.28470;
-0.05156  -0.99335  -0.10291  -2.12088;
 0.00000   0.00000   0.00000   1.00000;
Determinant -0.999998
subject = Patient_048
RegMat ---------------------------
-0.99718   0.04558   0.05963   1.33107;
 0.05455  -0.10569   0.99290   1.28470;
-0.05156  -0.99335  -0.10291  -2.12088;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Sat Mar 18 00:17:39 AEST 2017 
Ended   at Sat Mar 18 00:19:05 AEST 2017
BBR-Run-Time-Sec 86
 
bbregister Done
To check results, run:
tkregisterfv --mov biasmeanb0bet.nii.gz --reg register.dat --surfs 
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-FAXIG3/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/biascorr.mif /tmp/dwi2response-tmp-FAXIG3/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-FAXIG3/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-FAXIG3/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,3000 with 12,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 3000 dwi_b3000.mif
[03;34mCommand:[0m mrmath dwi_b3000.mif mean mean_b3000.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b3000.mif -finite mean_b3000.mif 0 -if 0 -le err_b3000.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b3000.mif -divide -log sdm_b3000.mif
[03;34mCommand:[0m mrcalc sdm_b3000.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b3000.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.16368 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.53391 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.95693 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 1.94088 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 1.94088 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 1.94088 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.76871 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.76871 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 630 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 630 -iter_voxels 6300 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-FAXIG3/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.92134 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 750 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 750 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 1814 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 364181 --> 297201 --> 297112[0m
dwi2response: [03;32mWM: 133664 --> 126009 --> 630 (SF)[0m
dwi2response: [03;32mGM: 117460 --> 75006 --> 1500[0m
dwi2response: [03;32mCSF: 45988 --> 18135 --> 1814[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b3000.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb3000.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_048/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-FAXIG3/[0m
