dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/dwipreproc_cust-tmp-ON70DC/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/dwipreproc_cust-tmp-ON70DC/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/dwipreproc_cust-tmp-ON70DC/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/dwipreproc_cust-tmp-ON70DC/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/dwipreproc_cust-tmp-ON70DC/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 103[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
          0           0           0           0
   0.999965 -0.00636203  0.00535812        3000
 -0.0249075   -0.746833    0.664545        3000
 0.00287968    0.520611   -0.853789        3000
  -0.272154     0.82985    0.487114        3000
   0.651235    0.408317    0.639664        3000
  -0.508178    0.264107   -0.819758        3000
   -0.95884    0.282651  -0.0270904        3000
  -0.534654    0.383935    0.752821        3000
   0.316949      0.1365    0.938569        3000
          0           0           0           0
  -0.504711   -0.593283    0.627122        3000
  -0.601086   0.0984947    0.793092        3000
   0.954271   -0.158163    0.253677        3000
   0.526843   -0.744778   -0.409563        3000
  -0.193243   -0.926258    -0.32358        3000
   0.363923    0.926518   0.0955214        3000
  -0.259089    0.931626   -0.254845        3000
 -0.0237367    0.513409    0.857816        3000
   0.612556    0.789406   0.0401776        3000
          0           0           0           0
  -0.873866    0.039833   -0.484533        3000
   0.744302   -0.233607   -0.625654        3000
  -0.487756    0.678903   -0.548803        3000
   0.450846   -0.891397   0.0463598        3000
   0.662824   -0.433857    0.610272        3000
   0.853726    0.240102    0.462064        3000
   0.439386   -0.508506    0.740514        3000
  -0.957962   -0.142087    0.249239        3000
   0.703275   -0.596594    0.386626        3000
          0           0           0           0
   0.387726   -0.183594   -0.903306        3000
  -0.142578   -0.683944   -0.715467        3000
    0.80133   -0.597846  -0.0212134        3000
   0.289053   -0.139172    0.947143        3000
  -0.963258   -0.131489   -0.234191        3000
   0.150793   -0.698955   -0.699088        3000
  0.0176492   -0.983583     0.17959        3000
   0.376028   -0.898468   -0.226622        3000
   -0.66773    0.729821    -0.14662        3000
          0           0           0           0
     0.2905   -0.468946   -0.834086        3000
   0.723043   -0.165491    0.670687        3000
    -0.7158   -0.660774   -0.225849        3000
  -0.428093   -0.583942   -0.689745        3000
  -0.958213   -0.285565   0.0167331        3000
  -0.493596   -0.299587   -0.816462        3000
   0.893652    0.401104    0.201251        3000
   -0.20294    0.978563    0.035068        3000
    0.22988    0.966946   -0.110322        3000
          0           0           0           0
    -0.7386    0.602394    0.302642        3000
  -0.843906    0.339113    0.415722        3000
  -0.104928   -0.287687   -0.951959        3000
    -0.2397    0.401954   -0.883729        3000
  -0.612242    0.779789    0.130723        3000
   0.266666    0.460255    0.846791        3000
   0.657922   -0.516252    -0.54829        3000
  -0.256179   -0.896739    0.360876        3000
   0.249348   -0.822276    0.511554        3000
          0           0           0           0
   0.572208    0.661316    0.485014        3000
  0.0212816   -0.250729    0.967823        3000
    0.22428    0.323383   -0.919305        3000
  -0.837728    0.325045   -0.438813        3000
  -0.860514    0.467141   -0.203209        3000
    0.48766   -0.811288     0.32249        3000
  -0.106099    0.948344    0.298975        3000
    0.54298   0.0130494    0.839644        3000
  -0.249888   -0.579096    0.776018        3000
          0           0           0           0
  -0.229032  -0.0418211     0.97252        3000
  -0.215976     0.65534   -0.723798        3000
   0.961626   -0.148661   -0.230597        3000
   0.310788    0.790879    0.527183        3000
  -0.870377    -0.43168    0.236847        3000
    0.84563    0.266459   -0.462503        3000
   0.893705   -0.414352   -0.172059        3000
  -0.702659   -0.680132    0.209023        3000
  -0.666983   -0.353469    0.655891        3000
          0           0           0           0
   0.516559    0.751449   -0.410477        3000
  -0.720436    -0.13727     -0.6798        3000
 -0.0397609  -0.0235892   -0.998931        2950
   0.825954     0.56373  0.00287304        3000
   0.453159    0.388372    -0.80238        3000
  -0.880254   0.0384535    0.472942        3000
  -0.148153    0.249602    0.956948        3000
  -0.767468   -0.486587   -0.417404        3000
  -0.479396    -0.13629    0.866951        3000
          0           0           0           0
   0.717596    0.534984   -0.445924        3000
  -0.481341   -0.823878   -0.299225        3000
   0.281335    0.764135   -0.580472        3000
  0.0170606    0.848956    0.528187        3000
 -0.0652881   -0.993482  -0.0934379        3000
   -0.42107    0.636315    0.646377        3000
   0.734657   0.0946654   -0.671801        3000
-0.00089379     0.89816   -0.439667        3000
  -0.475023   -0.863228    0.170854        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/dwipreproc_cust-tmp-ON70DC/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-M1E3US/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-M1E3US/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-M1E3US/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-M1E3US/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-M1E3US/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=2999.44 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=2999.44 shell.
35970
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-DD9UW4/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-DD9UW4/parc.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/brainFS.nii /tmp/labelsgmfix-tmp-DD9UW4/T1.nii -stride -1,+2,+3
labelsgmfix: [03;32mChanging to temporary directory (/tmp/labelsgmfix-tmp-DD9UW4/)[0m
[03;34mCommand:[0m run_first_all -s R_Thal,L_Puta,R_Caud,R_Hipp,L_Amyg,R_Pall,R_Amyg,L_Caud,L_Pall,L_Thal,L_Hipp,R_Accu,L_Accu,R_Puta -i T1.nii -b -o first
[03;34mCommand:[0m mrcalc parc.mif 0 -min sgm.mif
[03;34mCommand:[0m meshconvert first-R_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Thal_mask.mif 6 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Puta_mask.mif 3 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Caud_mask.mif 7 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Hipp_mask.mif 13 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Amyg_mask.mif 12 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Pall_mask.mif 9 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Amyg_mask.mif 14 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Caud_mask.mif 2 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Pall_mask.mif 4 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Thal_mask.mif 1 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Hipp_mask.mif 11 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Accu_mask.mif 10 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Accu_mask.mif 5 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Puta_mask.mif 8 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m mrmath R_Thal_mask.mif L_Puta_mask.mif R_Caud_mask.mif R_Hipp_mask.mif L_Amyg_mask.mif R_Pall_mask.mif R_Amyg_mask.mif L_Caud_mask.mif L_Pall_mask.mif L_Thal_mask.mif L_Hipp_mask.mif R_Accu_mask.mif L_Accu_mask.mif R_Puta_mask.mif sum - | mrcalc - 1 -gt sgm_overlap_mask.mif
[03;34mCommand:[0m mrcalc sgm_overlap_mask.mif 0 sgm.mif -if sgm_masked.mif
[03;34mCommand:[0m labelconvert sgm_masked.mif /software/mrtrix3/mrtrix3-AP/scripts/data/FreeSurferSGM.txt /software/mrtrix3/mrtrix3-AP/src/connectome/tables/fs_a2009s.txt sgm_new_labels.mif
[03;34mCommand:[0m mrcalc parc.mif 83 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 78 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 84 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 87 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 81 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 86 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 88 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 77 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 79 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 76 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 80 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 89 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 82 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 85 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc sgm_new_labels.mif 0.5 -gt sgm_new_labels.mif parc.mif -if result.mif -datatype uint32
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/parc_fixsubcort.nii
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc)[0m
labelsgmfix: [03;32mDeleting temporary directory /tmp/labelsgmfix-tmp-DD9UW4/[0m
tmp ./tmp.bbregister.37296
Log file is register.dat.log
Sat Mar 18 07:09:23 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc
/software/freesurfer/freesurfer-6.0.0/bin/bbregister --s Patient_060 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.75 2016/05/10 20:02:28 greve Exp $
Linux hpcnode037.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-6.0.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.37296/template.nii
mri_convert.bin biasmeanb0bet.nii.gz ./tmp.bbregister.37296/template.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.996201, 0.0745171, 0.0450716)
j_ras = (-0.0773531, 0.994893, 0.0648463)
k_ras = (-0.0400093, -0.0680864, 0.996877)
writing to ./tmp.bbregister.37296/template.nii...
fslregister --s Patient_060 --mov ./tmp.bbregister.37296/template.nii --reg ./tmp.bbregister.37296/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.37296/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov

Log file is ./tmp.bbregister.37296/reg.init.dat.fslregister.log

Sat Mar 18 07:09:23 AEST 2017
--s Patient_060 --mov ./tmp.bbregister.37296/template.nii --reg ./tmp.bbregister.37296/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.37296/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov
$Id: fslregister,v 1.40 2016/02/12 21:43:15 zkaufman Exp $
hpcnode037.adqimr.ad.lan
Linux hpcnode037.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc
mri_convert /working/lab_michaebr/alistaiP/Park/FS/Patient_060/mri/brainmask.mgz ./tmp.bbregister.37296/fslregister/refvol.fslregister.nii
mri_convert.bin /working/lab_michaebr/alistaiP/Park/FS/Patient_060/mri/brainmask.mgz ./tmp.bbregister.37296/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/Park/FS/Patient_060/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 1.62981e-09, -3.72529e-09)
j_ras = (-3.72529e-09, 7.45058e-09, -1)
k_ras = (-1.39698e-09, 1, 0)
writing to ./tmp.bbregister.37296/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc
mri_convert ./tmp.bbregister.37296/template.nii ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii --frame 0
mri_convert.bin ./tmp.bbregister.37296/template.nii ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from ./tmp.bbregister.37296/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.996201, 0.0745171, 0.0450716)
j_ras = (-0.0773531, 0.994893, 0.0648463)
k_ras = (-0.0400093, -0.0680864, 0.996877)
keeping frame 0
writing to ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.37296/template.nii
reg file       ./tmp.bbregister.37296/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.37296/template.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.99620  -0.07452  -0.04507   1.71874;
-0.04001  -0.06809   0.99688   0.00002;
 0.07735  -0.99489  -0.06485  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
-0.99620  -0.07452  -0.04507   1.71874;
-0.04001  -0.06809   0.99688   0.00002;
 0.07735  -0.99489  -0.06485  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.00000   0.00000   0.00000   1.71874;
-0.00000   1.00000   0.00000   0.00002;
 0.00000   0.00000   1.00000  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc
tkregister2_cmdl --mov ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.37296/fslregister/reg0.37336.dat --regheader --fslregout ./tmp.bbregister.37296/reg.init.dat.fsl.mat0 --s Patient_060 --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.37296/fslregister/reg0.37336.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_060/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.99620   0.07452   0.04507   1.00004;
-0.04001  -0.06809   0.99688  -0.35001;
 0.07735  -0.99489  -0.06485   0.71873;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99620   0.07452   0.04507   1.00004;
-0.04001  -0.06809   0.99688  -0.35001;
 0.07735  -0.99489  -0.06485   0.71873;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_060
RegMat ---------------------------
 0.99620   0.07452   0.04507   1.00004;
-0.04001  -0.06809   0.99688  -0.35001;
 0.07735  -0.99489  -0.06485   0.71873;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Sat Mar 18 07:09:25 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc
flirt.fsl -ref ./tmp.bbregister.37296/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.37296/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/fsl.5.0.2.xyztrans.sch -init ./tmp.bbregister.37296/reg.init.dat.fsl.mat0
Sat Mar 18 07:09:59 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc
flirt.fsl -ref ./tmp.bbregister.37296/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.37296/reg.init.dat.fsl.mat -init ./tmp.bbregister.37296/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_060 --mov ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.37296/reg.init.dat --fslreg ./tmp.bbregister.37296/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.99605   0.07770   0.04297   7.83430;
 0.04872  -0.07367  -0.99609   207.19299;
-0.07423   0.99425  -0.07717   33.81540;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.37296/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_060/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.37296/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.99605   0.07423   0.04872   1.15872;
-0.04297  -0.07717   0.99609   0.27902;
 0.07770  -0.99425  -0.07367   1.18553;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99605   0.07423   0.04872   1.15872;
-0.04297  -0.07717   0.99609   0.27902;
 0.07770  -0.99425  -0.07367   1.18553;
 0.00000   0.00000   0.00000   1.00000;
Determinant 0.999998
subject = Patient_060
RegMat ---------------------------
 0.99605   0.07423   0.04872   1.15872;
-0.04297  -0.07717   0.99609   0.27902;
 0.07770  -0.99425  -0.07367   1.18553;
 0.00000   0.00000   0.00000   1.00000;
mri_matrix_multiply -im ./tmp.bbregister.37296/fslregister/swapreg.dat -im ./tmp.bbregister.37296/reg.init.dat -om ./tmp.bbregister.37296/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Sat Mar 18 07:09:23 AEST 2017 
Ended   at Sat Mar 18 07:11:14 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.37296/template.nii --reg ./tmp.bbregister.37296/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.37296/template.nii --init-reg ./tmp.bbregister.37296/reg.init.dat --out-reg ./tmp.bbregister.37296/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc
mri_segreg --mov ./tmp.bbregister.37296/template.nii --init-reg ./tmp.bbregister.37296/reg.init.dat --out-reg ./tmp.bbregister.37296/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode037.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.37296/template.nii
regfile ./tmp.bbregister.37296/reg.init.dat
subject Patient_060
dof 6
outregfile ./tmp.bbregister.37296/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490696950
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99605  -0.07423  -0.04872   0.56002;
-0.04297  -0.07717   0.99609   0.27904;
 0.07770  -0.99425  -0.07367   1.18552;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.009601
 1  -25.0 -25.0  25.0   1.030822
 2  -25.0  25.0 -25.0   1.001612
 3  -25.0  25.0  25.0   1.013567
 4   25.0 -25.0 -25.0   0.992052
 5   25.0 -25.0  25.0   1.027591
 6   25.0  25.0 -25.0   0.999016
 7   25.0  25.0  25.0   0.990615
REL:  8  0.100210    8.064875  1.008109 rel = 0.0994042 
Initial costs ----------------
Number of surface hits 3226
WM  Intensity   390.2089 +/-  71.9819
Ctx Intensity   564.7016 +/- 126.3564
Pct Contrast     35.3668 +/-  22.5958
Cost   0.1002
RelCost   0.0994

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      0.9851   0.9851  0.0
     1  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000   0.0000      0.9829   0.9829  0.0
     4  -4.0000  -4.0000  -4.0000  -4.0000   0.0000   0.0000      0.9755   0.9755  0.0
     6  -4.0000  -4.0000  -4.0000  -4.0000   4.0000  -4.0000      0.9352   0.9352  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.9143   0.9143  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.8599   0.8599  0.0
    19  -4.0000  -4.0000  -4.0000   4.0000  -4.0000   0.0000      0.8253   0.8253  0.0
   102  -4.0000   0.0000  -4.0000   4.0000   0.0000  -4.0000      0.8146   0.8146  0.0
   118  -4.0000   0.0000   0.0000   0.0000  -4.0000   0.0000      0.8073   0.8073  0.0
   120  -4.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.7226   0.7226  0.0
   274   0.0000  -4.0000   0.0000  -4.0000   0.0000   0.0000      0.6947   0.6947  0.0
   346   0.0000   0.0000  -4.0000   4.0000   0.0000   0.0000      0.6188   0.6188  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.1002   0.1002  0.0
Brute Force --------------------------
Min cost was 0.100210
Number of iterations   729
Search time 4.340000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.100210
   9  0.006  0.000  0.000  0.000  0.000  0.000   0.1002057229
  10  0.004  0.000  0.000  0.000  0.000  0.000   0.1002004218
  17  0.004 -0.618  0.000  0.000  0.000  0.000   0.0714893183
  19  0.004 -0.523  0.000  0.000  0.000  0.000   0.0708721508
  20  0.004 -0.543  0.000  0.000  0.000  0.000   0.0708240807
  21  0.004 -0.544  0.000  0.000  0.000  0.000   0.0708231880
  22  0.004 -0.549  0.000  0.000  0.000  0.000   0.0708215026
  24  0.004 -0.548  0.000  0.000  0.000  0.000   0.0708214787
  25  0.004 -0.547  0.000  0.000  0.000  0.000   0.0708214763
  32  0.004 -0.547  0.382  0.000  0.000  0.000   0.0638322344
  35  0.004 -0.547  0.375  0.000  0.000  0.000   0.0638287456
  44  0.004 -0.547  0.375  0.115  0.000  0.000   0.0617641370
  45  0.004 -0.547  0.375  0.127  0.000  0.000   0.0616759416
  47  0.004 -0.547  0.375  0.143  0.000  0.000   0.0616653524
  48  0.004 -0.547  0.375  0.136  0.000  0.000   0.0616547663
  57  0.004 -0.547  0.375  0.136 -0.118  0.000   0.0615495853
  58  0.004 -0.547  0.375  0.136 -0.063  0.000   0.0601253138
  59  0.004 -0.547  0.375  0.136 -0.060  0.000   0.0600922178
  62  0.004 -0.547  0.375  0.136 -0.057  0.000   0.0600826311
  70  0.004 -0.547  0.375  0.136 -0.057  0.382   0.0594519846
  71  0.004 -0.547  0.375  0.136 -0.057  0.202   0.0580107516
  72  0.004 -0.547  0.375  0.136 -0.057  0.208   0.0579408163
  73  0.004 -0.547  0.375  0.136 -0.057  0.257   0.0578416374
  75  0.004 -0.547  0.375  0.136 -0.057  0.238   0.0577665024
  76  0.004 -0.547  0.375  0.136 -0.057  0.237   0.0577661257
  powell nthiter 1: fret = 0.057766
  85  0.017 -0.547  0.375  0.136 -0.057  0.237   0.0576010141
  86  0.053 -0.547  0.375  0.136 -0.057  0.237   0.0574007065
  88  0.044 -0.547  0.375  0.136 -0.057  0.237   0.0573853886
  90  0.047 -0.547  0.375  0.136 -0.057  0.237   0.0573831539
  99  0.047 -0.520  0.375  0.136 -0.057  0.237   0.0569026297
 100  0.047 -0.467  0.375  0.136 -0.057  0.237   0.0566895916
 102  0.047 -0.481  0.375  0.136 -0.057  0.237   0.0564961477
 103  0.047 -0.489  0.375  0.136 -0.057  0.237   0.0564197255
 104  0.047 -0.500  0.375  0.136 -0.057  0.237   0.0563280770
 105  0.047 -0.508  0.375  0.136 -0.057  0.237   0.0562950279
 116  0.047 -0.508  0.257  0.136 -0.057  0.237   0.0561632002
 117  0.047 -0.508  0.306  0.136 -0.057  0.237   0.0558728875
 118  0.047 -0.508  0.311  0.136 -0.057  0.237   0.0558715037
 127  0.047 -0.508  0.311  0.118 -0.057  0.237   0.0558397703
 128  0.047 -0.508  0.311  0.119 -0.057  0.237   0.0558386506
 129  0.047 -0.508  0.311  0.121 -0.057  0.237   0.0558376321
 141  0.047 -0.508  0.311  0.121 -0.056  0.237   0.0558358927
 142  0.047 -0.508  0.311  0.121 -0.055  0.237   0.0558344742
 144  0.047 -0.508  0.311  0.121 -0.054  0.237   0.0558341801
  powell nthiter 2: fret = 0.055834
 164  0.042 -0.508  0.311  0.121 -0.054  0.237   0.0558036841
 165  0.037 -0.508  0.311  0.121 -0.054  0.237   0.0557951167
 175  0.037 -0.509  0.311  0.121 -0.054  0.237   0.0557941010
 176  0.037 -0.511  0.311  0.121 -0.054  0.237   0.0557938446
 186  0.037 -0.511  0.310  0.121 -0.054  0.237   0.0557937540
 195  0.037 -0.511  0.310  0.124 -0.054  0.237   0.0557930934
 196  0.037 -0.511  0.310  0.123 -0.054  0.237   0.0557930027
 206  0.037 -0.511  0.310  0.123 -0.053  0.237   0.0557925864
 216  0.037 -0.511  0.310  0.123 -0.053  0.231   0.0557836243
 225  0.033 -0.512  0.309  0.124 -0.052  0.229   0.0557827096
 226  0.034 -0.511  0.309  0.124 -0.052  0.230   0.0557818303
  powell nthiter 3: fret = 0.055782
 249  0.034 -0.502  0.309  0.124 -0.052  0.230   0.0557797660
 251  0.034 -0.506  0.309  0.124 -0.052  0.230   0.0557775638
 271  0.034 -0.506  0.309  0.127 -0.052  0.230   0.0557772085
 273  0.034 -0.506  0.309  0.126 -0.052  0.230   0.0557771562
 283  0.034 -0.506  0.309  0.126 -0.051  0.230   0.0557769921
 292  0.032 -0.506  0.309  0.126 -0.051  0.229   0.0557757710
 304  0.031 -0.505  0.309  0.127 -0.051  0.228   0.0557754462
 305  0.031 -0.505  0.309  0.127 -0.051  0.228   0.0557753300
  powell nthiter 4: fret = 0.055775
 321  0.031 -0.505  0.309  0.127 -0.051  0.226   0.0557740809
 330  0.032 -0.505  0.309  0.127 -0.051  0.226   0.0557738741
 332  0.032 -0.505  0.309  0.127 -0.051  0.226   0.0557738698
 333  0.032 -0.505  0.309  0.127 -0.051  0.226   0.0557738059
 338  0.032 -0.505  0.309  0.127 -0.051  0.226   0.0557737221
 375  0.030 -0.503  0.309  0.128 -0.050  0.225   0.0557735433
 376  0.031 -0.504  0.309  0.127 -0.051  0.225   0.0557734501
 382  0.031 -0.504  0.309  0.127 -0.051  0.225   0.0557733914
Powell done niters = 4
Computing relative cost
 0  -25.0 -25.0 -25.0   1.006333
 1  -25.0 -25.0  25.0   1.033842
 2  -25.0  25.0 -25.0   0.995062
 3  -25.0  25.0  25.0   1.002380
 4   25.0 -25.0 -25.0   0.992719
 5   25.0 -25.0  25.0   1.030441
 6   25.0  25.0 -25.0   1.016355
 7   25.0  25.0  25.0   1.002610
REL:  8  0.055773    8.079741  1.009968 rel = 0.0552229 
Number of iterations     4
Min cost was 0.055773
Number of FunctionCalls   386
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 2.290000 sec
Parameters at optimum (transmm)  0.03059 -0.50407  0.30894
Parameters at optimum (rotdeg)  0.12742 -0.05061  0.22548 
Final costs ----------------
Number of surface hits 3226
WM  Intensity   383.9759 +/-  67.0531
Ctx Intensity   562.1999 +/- 108.7475
Pct Contrast     36.9131 +/-  20.5801
Cost   0.0558
RelCost   0.0994
Reg at min cost was 
-0.99594  -0.07306  -0.05258   0.58847;
-0.04706  -0.07524   0.99605  -0.22547;
 0.07672  -0.99449  -0.07150   1.49557;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to ./tmp.bbregister.37296/bbr.pass1.dat, type = 14 
Original Reg 
-0.99605  -0.07423  -0.04872   0.56002;
-0.04297  -0.07717   0.99609   0.27904;
 0.07770  -0.99425  -0.07367   1.18552;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00011  -0.00117   0.00386  -0.02845;
 0.00409  -0.00192   0.00004   0.50451;
 0.00098   0.00023  -0.00217  -0.31006;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.562045
Computing change in rh position
Surface-RMS-Diff-mm 0.644178 0.123889 0.911922
mri_segreg done
mri_segreg --mov ./tmp.bbregister.37296/template.nii --init-reg ./tmp.bbregister.37296/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.37296/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc
mri_segreg --mov ./tmp.bbregister.37296/template.nii --init-reg ./tmp.bbregister.37296/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.37296/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode037.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.37296/template.nii
regfile ./tmp.bbregister.37296/bbr.pass1.dat
subject Patient_060
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490002083
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99594  -0.07306  -0.05258   0.58847;
-0.04706  -0.07524   0.99605  -0.22547;
 0.07672  -0.99449  -0.07150   1.49557;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   0.996223
 1  -25.0 -25.0  25.0   1.012299
 2  -25.0  25.0 -25.0   0.991216
 3  -25.0  25.0  25.0   1.021532
 4   25.0 -25.0 -25.0   1.013772
 5   25.0 -25.0  25.0   1.022344
 6   25.0  25.0 -25.0   1.004489
 7   25.0  25.0  25.0   0.994585
REL:  8  0.061644    8.056460  1.007058 rel = 0.0612123 
Initial costs ----------------
Number of surface hits 321286
WM  Intensity   384.4208 +/-  71.2393
Ctx Intensity   561.2361 +/- 106.1978
Pct Contrast     36.7680 +/-  20.6114
Cost   0.0616
RelCost   0.0612

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.0610   0.0610  0.0
     3  -0.1000  -0.1000  -0.1000  -0.1000   0.0000  -0.1000      0.0598   0.0598  0.0
    12  -0.1000  -0.1000  -0.1000   0.0000   0.0000  -0.1000      0.0592   0.0592  0.0
    39  -0.1000  -0.1000   0.0000   0.0000   0.0000  -0.1000      0.0587   0.0587  0.0
    93  -0.1000   0.0000  -0.1000   0.0000   0.0000  -0.1000      0.0585   0.0585  0.0
    94  -0.1000   0.0000  -0.1000   0.0000   0.0000   0.0000      0.0584   0.0584  0.0
    97  -0.1000   0.0000  -0.1000   0.0000   0.1000   0.0000      0.0584   0.0584  0.0
   120  -0.1000   0.0000   0.0000   0.0000   0.0000  -0.1000      0.0581   0.0581  0.0
   121  -0.1000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0579   0.0579  0.0
   301   0.0000  -0.1000   0.1000  -0.1000   0.0000   0.0000      0.0577   0.0577  0.0
   334   0.0000   0.0000  -0.1000   0.0000  -0.1000   0.0000      0.0574   0.0574  0.0
   337   0.0000   0.0000  -0.1000   0.0000   0.0000   0.0000      0.0566   0.0566  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0558   0.0558  0.0
Brute Force --------------------------
Min cost was 0.055773
Number of iterations   729
Search time 4.063000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.061644
   7 -0.033  0.000  0.000  0.000  0.000  0.000   0.0615813649
  10 -0.032  0.000  0.000  0.000  0.000  0.000   0.0615813600
  18 -0.032 -0.017  0.000  0.000  0.000  0.000   0.0615465826
  19 -0.032 -0.021  0.000  0.000  0.000  0.000   0.0615433355
  20 -0.032 -0.027  0.000  0.000  0.000  0.000   0.0615409453
  31 -0.032 -0.027 -0.001  0.000  0.000  0.000   0.0615409077
  40 -0.032 -0.027 -0.001  0.053  0.000  0.000   0.0613753342
  43 -0.032 -0.027 -0.001  0.054  0.000  0.000   0.0613752250
  49 -0.032 -0.027 -0.001  0.055  0.000  0.000   0.0613752101
  56 -0.032 -0.027 -0.001  0.055 -0.045  0.000   0.0612370714
  59 -0.032 -0.027 -0.001  0.055 -0.044  0.000   0.0612370498
  66 -0.032 -0.027 -0.001  0.055 -0.044 -0.025   0.0611753436
  67 -0.032 -0.027 -0.001  0.055 -0.044 -0.033   0.0611693332
  69 -0.032 -0.027 -0.001  0.055 -0.044 -0.034   0.0611692398
  powell nthiter 1: fret = 0.061169
  78 -0.030 -0.027 -0.001  0.055 -0.044 -0.034   0.0611668756
  79 -0.024 -0.027 -0.001  0.055 -0.044 -0.034   0.0611630105
  81 -0.023 -0.027 -0.001  0.055 -0.044 -0.034   0.0611627487
  82 -0.022 -0.027 -0.001  0.055 -0.044 -0.034   0.0611626333
  91 -0.022  0.005 -0.001  0.055 -0.044 -0.034   0.0611272296
  92 -0.022 -0.004 -0.001  0.055 -0.044 -0.034   0.0611243702
  93 -0.022 -0.002 -0.001  0.055 -0.044 -0.034   0.0611242874
 101 -0.022 -0.002 -0.023  0.055 -0.044 -0.034   0.0610904736
 102 -0.022 -0.002 -0.027  0.055 -0.044 -0.034   0.0610895081
 103 -0.022 -0.002 -0.028  0.055 -0.044 -0.034   0.0610894712
 112 -0.022 -0.002 -0.028  0.059 -0.044 -0.034   0.0610886564
 121 -0.022 -0.002 -0.028  0.059 -0.050 -0.034   0.0610781851
 122 -0.022 -0.002 -0.028  0.059 -0.059 -0.034   0.0610736142
 132 -0.022 -0.002 -0.028  0.059 -0.059 -0.031   0.0610729815
  powell nthiter 2: fret = 0.061073
 142 -0.027 -0.002 -0.028  0.059 -0.059 -0.031   0.0610721884
 143 -0.025 -0.002 -0.028  0.059 -0.059 -0.031   0.0610718358
 152 -0.025 -0.001 -0.028  0.059 -0.059 -0.031   0.0610718037
 161 -0.025 -0.001 -0.029  0.059 -0.059 -0.031   0.0610717529
 170 -0.025 -0.001 -0.029  0.057 -0.059 -0.031   0.0610714722
 188 -0.025 -0.001 -0.029  0.057 -0.059 -0.033   0.0610712968
  powell nthiter 3: fret = 0.061071
 244 -0.025 -0.001 -0.029  0.057 -0.059 -0.032   0.0610712943
Powell done niters = 3
Computing relative cost
 0  -25.0 -25.0 -25.0   0.995666
 1  -25.0 -25.0  25.0   1.012324
 2  -25.0  25.0 -25.0   0.991546
 3  -25.0  25.0  25.0   1.022166
 4   25.0 -25.0 -25.0   1.013241
 5   25.0 -25.0  25.0   1.022822
 6   25.0  25.0 -25.0   1.003566
 7   25.0  25.0  25.0   0.994534
REL:  8  0.061071    8.055865  1.006983 rel = 0.0606478 
Number of iterations     3
Min cost was 0.061071
Number of FunctionCalls   247
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 50.943000 sec
Parameters at optimum (transmm) -0.02535 -0.00138 -0.02918
Parameters at optimum (rotdeg)  0.05708 -0.05927 -0.03234 
Final costs ----------------
Number of surface hits 321288
WM  Intensity   384.3116 +/-  71.1426
Ctx Intensity   561.1286 +/- 105.8377
Pct Contrast     36.7846 +/-  20.5647
Cost   0.0611
RelCost   0.0612
Reg at min cost was 
-0.99604  -0.07207  -0.05194   0.56145;
-0.04658  -0.07421   0.99615  -0.22868;
 0.07565  -0.99463  -0.07056   1.46678;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.99594  -0.07306  -0.05258   0.58847;
-0.04706  -0.07524   0.99605  -0.22547;
 0.07672  -0.99449  -0.07150   1.49557;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00011  -0.00099  -0.00064   0.02702;
-0.00049  -0.00103  -0.00010   0.00321;
 0.00108   0.00015  -0.00094   0.02879;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.078798
Computing change in rh position
Surface-RMS-Diff-mm 0.079241 0.034061 0.166302
mri_segreg done
MinCost: 0.061071 384.311585 561.128571 36.784564 
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.99604  -0.07207  -0.05194   0.56145;
-0.04658  -0.07421   0.99615  -0.22868;
 0.07565  -0.99463  -0.07056   1.46678;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_060/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.99604  -0.07207  -0.05194   0.56145;
-0.04658  -0.07421   0.99615  -0.22868;
 0.07565  -0.99463  -0.07056   1.46678;
 0.00000   0.00000   0.00000   1.00000;
Determinant -0.999998
subject = Patient_060
RegMat ---------------------------
-0.99604  -0.07207  -0.05194   0.56145;
-0.04658  -0.07421   0.99615  -0.22868;
 0.07565  -0.99463  -0.07056   1.46678;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Sat Mar 18 07:09:23 AEST 2017 
Ended   at Sat Mar 18 07:12:52 AEST 2017
BBR-Run-Time-Sec 209
 
bbregister Done
To check results, run:
tkregisterfv --mov biasmeanb0bet.nii.gz --reg register.dat --surfs 
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-N9C8I6/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/biascorr.mif /tmp/dwi2response-tmp-N9C8I6/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-N9C8I6/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-N9C8I6/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,2999 with 13,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 2999 dwi_b2999.mif
[03;34mCommand:[0m mrmath dwi_b2999.mif mean mean_b2999.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b2999.mif -finite mean_b2999.mif 0 -if 0 -le err_b2999.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b2999.mif -divide -log sdm_b2999.mif
[03;34mCommand:[0m mrcalc sdm_b2999.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b2999.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.03202 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.46752 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.90072 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 1.90211 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 1.90211 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 1.90211 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.63661 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.63661 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 659 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 659 -iter_voxels 6590 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-N9C8I6/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.89036 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 837 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 837 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 1425 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 375955 --> 307745 --> 307681[0m
dwi2response: [03;32mWM: 139031 --> 131823 --> 659 (SF)[0m
dwi2response: [03;32mGM: 129030 --> 83712 --> 1674[0m
dwi2response: [03;32mCSF: 39620 --> 14250 --> 1425[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b2999.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb2999.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_060/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-N9C8I6/[0m
