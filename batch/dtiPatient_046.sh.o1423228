dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/dwipreproc_cust-tmp-F8VBAU/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/dwipreproc_cust-tmp-F8VBAU/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/dwipreproc_cust-tmp-F8VBAU/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/dwipreproc_cust-tmp-F8VBAU/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/dwipreproc_cust-tmp-F8VBAU/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 102[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
  -0.999993  0.00301479 -0.00234523        3000
  0.0264858   -0.744279   -0.667344        3000
-0.00447799    0.517417    0.855722        3000
   0.272182    0.827812   -0.490554        3000
  -0.651796    0.404275   -0.641656        3000
   0.507432    0.261153    0.821165        3000
   0.959305    0.279983   0.0366475        3000
   0.534341    0.380124   -0.754974        3000
  -0.317119    0.132928   -0.939024        3000
          0           0           0           0
   0.505021   -0.590177   -0.629797        3000
   0.600387    0.089472   -0.794689        3000
  -0.953843   -0.155393   -0.256977        3000
  -0.527571    -0.74243    0.412877        3000
   0.194371   -0.924746    0.327206        3000
  -0.365772    0.925509  -0.0982001        3000
   0.259619    0.930356    0.258913        3000
  0.0240602    0.509909   -0.859892        3000
  -0.614744     0.78814  -0.0304221        3000
          0           0           0           0
   0.872439   0.0375406    0.487279        3000
  -0.743587   -0.229593    0.627985        3000
   0.487793     0.67609    0.552232        3000
  -0.451175   -0.890689  -0.0558118        3000
  -0.662247   -0.431058   -0.612876        3000
   -0.85383    0.236403   -0.463776        3000
  -0.439163   -0.505681   -0.742578        3000
   0.957541   -0.139536   -0.252281        3000
  -0.703491   -0.594297   -0.389759        3000
          0           0           0           0
  -0.386994   -0.179665    0.904409        3000
   0.143827   -0.680619    0.718381        3000
  -0.802939   -0.595779   0.0183711        3000
  -0.288668   -0.136684   -0.947622        3000
   0.963147   -0.127838    0.236655        3000
  -0.150889   -0.695793    0.702214        3000
 -0.0172435   -0.982916   -0.183244        3000
  -0.376612   -0.897339      0.2301        3000
   0.668419     0.72829    0.151029        3000
          0           0           0           0
  -0.290208   -0.465117    0.836329        3000
   -0.72169   -0.162913   -0.672772        3000
   0.717423   -0.657941    0.228948        3000
   0.428818   -0.580528    0.692172        3000
   0.958867   -0.283142  -0.0201153        3000
   0.493749   -0.295663    0.817799        3000
  -0.894699    0.397511   -0.203714        3000
   0.203113    0.978815  -0.0258218        3000
  -0.230787    0.966264    0.114333        3000
          0           0           0           0
   0.739601    0.599616   -0.305697        3000
   0.843964     0.33561   -0.418438        3000
   0.105446   -0.283715    0.953093        3000
   0.239736    0.398824    0.885136        3000
   0.613516    0.778293   -0.133635        3000
  -0.267154     0.45652   -0.848657        3000
  -0.658257   -0.512616    0.551292        3000
   0.256835   -0.895141   -0.364361        3000
  -0.249688   -0.820096   -0.514878        3000
          0           0           0           0
  -0.573496      0.6583    -0.48759        3000
 -0.0219052   -0.248228   -0.968454        3000
  -0.224487    0.320318    0.920327        3000
   0.837029    0.322396    0.442089        3000
   0.860822    0.464719    0.207415        3000
  -0.488033   -0.809548   -0.326276        3000
   0.105908    0.947296   -0.302348        3000
  -0.542255  0.00494795     -0.8402        3000
   0.250365   -0.576133   -0.778067        3000
          0           0           0           0
   0.228906  -0.0495374   -0.972187        3000
   0.216046    0.652455    0.726379        3000
   -0.96153   -0.144597    0.233563        3000
  -0.312053    0.788163   -0.530491        3000
   0.870556    -0.42936    -0.24038        3000
  -0.844769    0.263949    0.465507        3000
  -0.894615   -0.411215    0.174833        3000
   0.703491   -0.678148   -0.212638        3000
   0.666199   -0.350753   -0.658142        3000
          0           0           0           0
  -0.517027    0.749186     0.41401        3000
   0.719906   -0.133904    0.681033        3000
  0.0403498  -0.0157941    0.999061        3000
  -0.827162    0.561961   0.0014793        3000
  -0.452633     0.38525     0.80418        3000
   0.879383   0.0296307   -0.475191        3000
   0.148111    0.245995   -0.957888        3000
   0.768256   -0.483017    0.420091        3000
   0.478985   -0.133807   -0.867565        3000
          0           0           0           0
  -0.717465    0.532266    0.449374        3000
   0.482884   -0.821868    0.302252        3000
   -0.28173    0.761443    0.583809        3000
 -0.0175472    0.846886   -0.531486        3000
  0.0657432   -0.993182   0.0962717        3000
   0.421098    0.633187   -0.649423        3000
  -0.732962    0.097616    0.673229        3000
 0.00059774    0.896269    0.443511        3000
   0.476155   -0.861843   -0.174654        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/dwipreproc_cust-tmp-F8VBAU/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-GZMQ4P/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-GZMQ4P/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-GZMQ4P/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-GZMQ4P/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-GZMQ4P/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
25991
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-UW8GTL/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-UW8GTL/parc.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/brainFS.nii /tmp/labelsgmfix-tmp-UW8GTL/T1.nii -stride -1,+2,+3
labelsgmfix: [03;32mChanging to temporary directory (/tmp/labelsgmfix-tmp-UW8GTL/)[0m
[03;34mCommand:[0m run_first_all -s R_Thal,L_Puta,R_Caud,R_Hipp,L_Amyg,R_Pall,R_Amyg,L_Caud,L_Pall,L_Thal,L_Hipp,R_Accu,L_Accu,R_Puta -i T1.nii -b -o first
[03;34mCommand:[0m mrcalc parc.mif 0 -min sgm.mif
[03;34mCommand:[0m meshconvert first-R_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Thal_mask.mif 6 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Puta_mask.mif 3 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Caud_mask.mif 7 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Hipp_mask.mif 13 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Amyg_mask.mif 12 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Pall_mask.mif 9 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Amyg_mask.mif 14 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Caud_mask.mif 2 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Pall_mask.mif 4 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Thal_mask.mif 1 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Hipp_mask.mif 11 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Accu_mask.mif 10 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Accu_mask.mif 5 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Puta_mask.mif 8 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m mrmath R_Thal_mask.mif L_Puta_mask.mif R_Caud_mask.mif R_Hipp_mask.mif L_Amyg_mask.mif R_Pall_mask.mif R_Amyg_mask.mif L_Caud_mask.mif L_Pall_mask.mif L_Thal_mask.mif L_Hipp_mask.mif R_Accu_mask.mif L_Accu_mask.mif R_Puta_mask.mif sum - | mrcalc - 1 -gt sgm_overlap_mask.mif
[03;34mCommand:[0m mrcalc sgm_overlap_mask.mif 0 sgm.mif -if sgm_masked.mif
[03;34mCommand:[0m labelconvert sgm_masked.mif /software/mrtrix3/mrtrix3-AP/scripts/data/FreeSurferSGM.txt /software/mrtrix3/mrtrix3-AP/src/connectome/tables/fs_a2009s.txt sgm_new_labels.mif
[03;34mCommand:[0m mrcalc parc.mif 83 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 78 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 84 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 87 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 81 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 86 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 88 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 77 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 79 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 76 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 80 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 89 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 82 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 85 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc sgm_new_labels.mif 0.5 -gt sgm_new_labels.mif parc.mif -if result.mif -datatype uint32
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/parc_fixsubcort.nii
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc)[0m
labelsgmfix: [03;32mDeleting temporary directory /tmp/labelsgmfix-tmp-UW8GTL/[0m
tmp ./tmp.bbregister.19449
Log file is register.dat.log
Sat Mar 18 07:08:08 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc
/software/freesurfer/freesurfer-6.0.0/bin/bbregister --s Patient_046 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.75 2016/05/10 20:02:28 greve Exp $
Linux hpcnode060.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-6.0.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.19449/template.nii
mri_convert.bin biasmeanb0bet.nii.gz ./tmp.bbregister.19449/template.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.994641, 0.0298151, 0.0990004)
j_ras = (-0.0402966, 0.993589, 0.105623)
k_ras = (-0.0952166, -0.109046, 0.989466)
writing to ./tmp.bbregister.19449/template.nii...
fslregister --s Patient_046 --mov ./tmp.bbregister.19449/template.nii --reg ./tmp.bbregister.19449/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.19449/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov

Log file is ./tmp.bbregister.19449/reg.init.dat.fslregister.log

Sat Mar 18 07:08:08 AEST 2017
--s Patient_046 --mov ./tmp.bbregister.19449/template.nii --reg ./tmp.bbregister.19449/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.19449/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov
$Id: fslregister,v 1.40 2016/02/12 21:43:15 zkaufman Exp $
hpcnode060.adqimr.ad.lan
Linux hpcnode060.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc
mri_convert /working/lab_michaebr/alistaiP/Park/FS/Patient_046/mri/brainmask.mgz ./tmp.bbregister.19449/fslregister/refvol.fslregister.nii
mri_convert.bin /working/lab_michaebr/alistaiP/Park/FS/Patient_046/mri/brainmask.mgz ./tmp.bbregister.19449/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/Park/FS/Patient_046/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, -1.86265e-09, 7.45058e-09)
j_ras = (1.49012e-08, 1.49012e-08, -1)
k_ras = (-9.31323e-10, 1, 0)
writing to ./tmp.bbregister.19449/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc
mri_convert ./tmp.bbregister.19449/template.nii ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii --frame 0
mri_convert.bin ./tmp.bbregister.19449/template.nii ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from ./tmp.bbregister.19449/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.994641, 0.0298151, 0.0990004)
j_ras = (-0.0402966, 0.993589, 0.105623)
k_ras = (-0.0952166, -0.109046, 0.989466)
keeping frame 0
writing to ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.19449/template.nii
reg file       ./tmp.bbregister.19449/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.19449/template.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.99464  -0.02982  -0.09900   1.71877;
-0.09522  -0.10905   0.98947   0.00003;
 0.04030  -0.99359  -0.10562  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
-0.99464  -0.02982  -0.09900   1.71877;
-0.09522  -0.10905   0.98947   0.00003;
 0.04030  -0.99359  -0.10562  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.00000   0.00000  -0.00000   1.71876;
 0.00000   1.00000   0.00000   0.00005;
 0.00000   0.00000   1.00000  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc
tkregister2_cmdl --mov ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.19449/fslregister/reg0.19489.dat --regheader --fslregout ./tmp.bbregister.19449/reg.init.dat.fsl.mat0 --s Patient_046 --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.19449/fslregister/reg0.19489.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_046/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.99464   0.02982   0.09900   1.10291;
-0.09522  -0.10905   0.98947   2.02602;
 0.04030  -0.99359  -0.10562  -9.52016;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99464   0.02982   0.09900   1.10291;
-0.09522  -0.10905   0.98947   2.02602;
 0.04030  -0.99359  -0.10562  -9.52016;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_046
RegMat ---------------------------
 0.99464   0.02982   0.09900   1.10291;
-0.09522  -0.10905   0.98947   2.02602;
 0.04030  -0.99359  -0.10562  -9.52016;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Sat Mar 18 07:08:11 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc
flirt.fsl -ref ./tmp.bbregister.19449/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.19449/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/fsl.5.0.2.xyztrans.sch -init ./tmp.bbregister.19449/reg.init.dat.fsl.mat0
Sat Mar 18 07:08:44 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc
flirt.fsl -ref ./tmp.bbregister.19449/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.19449/reg.init.dat.fsl.mat -init ./tmp.bbregister.19449/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_046 --mov ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.19449/reg.init.dat --fslreg ./tmp.bbregister.19449/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.99458   0.02867   0.09997   7.81012;
 0.10241  -0.10231  -0.98947   208.59900;
-0.01814   0.99434  -0.10469   21.21980;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.19449/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_046/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.19449/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.99458   0.01814   0.10241   0.65251;
-0.09997  -0.10469   0.98947   4.08651;
 0.02867  -0.99434  -0.10231  -7.86728;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99458   0.01814   0.10241   0.65251;
-0.09997  -0.10469   0.98947   4.08651;
 0.02867  -0.99434  -0.10231  -7.86728;
 0.00000   0.00000   0.00000   1.00000;
Determinant 0.999998
subject = Patient_046
RegMat ---------------------------
 0.99458   0.01814   0.10241   0.65251;
-0.09997  -0.10469   0.98947   4.08651;
 0.02867  -0.99434  -0.10231  -7.86728;
 0.00000   0.00000   0.00000   1.00000;
mri_matrix_multiply -im ./tmp.bbregister.19449/fslregister/swapreg.dat -im ./tmp.bbregister.19449/reg.init.dat -om ./tmp.bbregister.19449/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Sat Mar 18 07:08:08 AEST 2017 
Ended   at Sat Mar 18 07:09:53 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.19449/template.nii --reg ./tmp.bbregister.19449/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.19449/template.nii --init-reg ./tmp.bbregister.19449/reg.init.dat --out-reg ./tmp.bbregister.19449/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc
mri_segreg --mov ./tmp.bbregister.19449/template.nii --init-reg ./tmp.bbregister.19449/reg.init.dat --out-reg ./tmp.bbregister.19449/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode060.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.19449/template.nii
regfile ./tmp.bbregister.19449/reg.init.dat
subject Patient_046
dof 6
outregfile ./tmp.bbregister.19449/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490323507
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99458  -0.01814  -0.10241   1.06625;
-0.09997  -0.10469   0.98947   4.08656;
 0.02867  -0.99434  -0.10231  -7.86729;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.039399
 1  -25.0 -25.0  25.0   1.035278
 2  -25.0  25.0 -25.0   0.982343
 3  -25.0  25.0  25.0   1.040753
 4   25.0 -25.0 -25.0   0.977326
 5   25.0 -25.0  25.0   0.999667
 6   25.0  25.0 -25.0   1.009883
 7   25.0  25.0  25.0   1.006197
REL:  8  0.098390    8.090845  1.011356 rel = 0.0972851 
Initial costs ----------------
Number of surface hits 2914
WM  Intensity   351.7085 +/-  92.0502
Ctx Intensity   577.9284 +/- 196.5551
Pct Contrast     45.2616 +/-  28.2255
Cost   0.0984
RelCost   0.0973

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      0.9325   0.9325  0.0
     6  -4.0000  -4.0000  -4.0000  -4.0000   4.0000  -4.0000      0.9191   0.9191  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.8984   0.8984  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.8297   0.8297  0.0
    19  -4.0000  -4.0000  -4.0000   4.0000  -4.0000   0.0000      0.8287   0.8287  0.0
    33  -4.0000  -4.0000   0.0000  -4.0000   4.0000  -4.0000      0.8056   0.8056  0.0
    34  -4.0000  -4.0000   0.0000  -4.0000   4.0000   0.0000      0.7965   0.7965  0.0
   118  -4.0000   0.0000   0.0000   0.0000  -4.0000   0.0000      0.7751   0.7751  0.0
   120  -4.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.7005   0.7005  0.0
   274   0.0000  -4.0000   0.0000  -4.0000   0.0000   0.0000      0.6540   0.6540  0.0
   363   0.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.5532   0.5532  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0984   0.0984  0.0
Brute Force --------------------------
Min cost was 0.098390
Number of iterations   729
Search time 3.642000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.098390
   8 -0.010  0.000  0.000  0.000  0.000  0.000   0.0983173949
  10 -0.099  0.000  0.000  0.000  0.000  0.000   0.0961079864
  12 -0.065  0.000  0.000  0.000  0.000  0.000   0.0956722025
  13 -0.073  0.000  0.000  0.000  0.000  0.000   0.0955860704
  14 -0.075  0.000  0.000  0.000  0.000  0.000   0.0955843376
  16 -0.074  0.000  0.000  0.000  0.000  0.000   0.0955838493
  21 -0.074 -0.618  0.000  0.000  0.000  0.000   0.0688379437
  24 -0.074 -0.581  0.000  0.000  0.000  0.000   0.0688249918
  26 -0.074 -0.567  0.000  0.000  0.000  0.000   0.0688002818
  28 -0.074 -0.561  0.000  0.000  0.000  0.000   0.0687961502
  29 -0.074 -0.560  0.000  0.000  0.000  0.000   0.0687961495
  37 -0.074 -0.560  0.138  0.000  0.000  0.000   0.0663423988
  39 -0.074 -0.560  0.140  0.000  0.000  0.000   0.0663423444
  47 -0.074 -0.560  0.140  0.001  0.000  0.000   0.0663325431
  48 -0.074 -0.560  0.140  0.037  0.000  0.000   0.0661309348
  52 -0.074 -0.560  0.140  0.035  0.000  0.000   0.0661303494
  60 -0.074 -0.560  0.140  0.035 -0.065  0.000   0.0641889712
  62 -0.074 -0.560  0.140  0.035 -0.105  0.000   0.0641747655
  64 -0.074 -0.560  0.140  0.035 -0.129  0.000   0.0641181350
  65 -0.074 -0.560  0.140  0.035 -0.144  0.000   0.0640884465
  67 -0.074 -0.560  0.140  0.035 -0.139  0.000   0.0640719285
  68 -0.074 -0.560  0.140  0.035 -0.140  0.000   0.0640715664
  76 -0.074 -0.560  0.140  0.035 -0.140 -0.026   0.0638747121
  77 -0.074 -0.560  0.140  0.035 -0.140 -0.060   0.0636900432
  82 -0.074 -0.560  0.140  0.035 -0.140 -0.059   0.0636898979
  powell nthiter 1: fret = 0.063690
  92 -0.068 -0.560  0.140  0.035 -0.140 -0.059   0.0636727416
 101 -0.068 -0.564  0.140  0.035 -0.140 -0.059   0.0636559041
 103 -0.068 -0.570  0.140  0.035 -0.140 -0.059   0.0636521081
 104 -0.068 -0.568  0.140  0.035 -0.140 -0.059   0.0636511120
 113 -0.068 -0.568  0.199  0.035 -0.140 -0.059   0.0630744896
 114 -0.068 -0.568  0.195  0.035 -0.140 -0.059   0.0629970183
 115 -0.068 -0.568  0.179  0.035 -0.140 -0.059   0.0628462550
 116 -0.068 -0.568  0.180  0.035 -0.140 -0.059   0.0628459224
 126 -0.068 -0.568  0.180  0.029 -0.140 -0.059   0.0628380118
 127 -0.068 -0.568  0.180  0.031 -0.140 -0.059   0.0628367308
 135 -0.068 -0.568  0.180  0.031 -0.105 -0.059   0.0624010250
 138 -0.068 -0.568  0.180  0.031 -0.108 -0.059   0.0623949570
 147 -0.068 -0.568  0.180  0.031 -0.108 -0.040   0.0623400403
 149 -0.068 -0.568  0.180  0.031 -0.108 -0.043   0.0623338731
 151 -0.068 -0.568  0.180  0.031 -0.108 -0.044   0.0623332104
 159 -0.066 -0.572  0.195  0.029 -0.096 -0.038   0.0620886627
 162 -0.066 -0.572  0.193  0.029 -0.097 -0.039   0.0620884325
 164 -0.066 -0.572  0.194  0.029 -0.096 -0.039   0.0620883214
 165 -0.066 -0.572  0.194  0.029 -0.096 -0.039   0.0620883038
 166 -0.066 -0.572  0.194  0.029 -0.096 -0.039   0.0620882268
  powell nthiter 2: fret = 0.062088
 178 -0.064 -0.572  0.194  0.029 -0.096 -0.039   0.0620874066
 181 -0.065 -0.572  0.194  0.029 -0.096 -0.039   0.0620860573
 190 -0.065 -0.566  0.194  0.029 -0.096 -0.039   0.0620770908
 191 -0.065 -0.565  0.194  0.029 -0.096 -0.039   0.0620763491
 193 -0.065 -0.564  0.194  0.029 -0.096 -0.039   0.0620761879
 200 -0.065 -0.564  0.194  0.029 -0.096 -0.036   0.0620613477
 202 -0.065 -0.564  0.194  0.029 -0.096 -0.027   0.0620101842
 204 -0.065 -0.564  0.194  0.029 -0.096 -0.024   0.0620069371
 217 -0.065 -0.564  0.194  0.032 -0.096 -0.024   0.0620065481
 219 -0.065 -0.564  0.194  0.031 -0.096 -0.024   0.0620056311
 236 -0.065 -0.565  0.197  0.031 -0.093 -0.023   0.0619942727
 237 -0.065 -0.565  0.197  0.031 -0.093 -0.023   0.0619942678
 238 -0.065 -0.565  0.197  0.031 -0.094 -0.023   0.0619941970
 240 -0.065 -0.565  0.197  0.031 -0.094 -0.023   0.0619938791
 242 -0.065 -0.565  0.197  0.031 -0.094 -0.023   0.0619938500
  powell nthiter 3: fret = 0.061994
 254 -0.063 -0.565  0.197  0.031 -0.094 -0.023   0.0619902387
 264 -0.063 -0.562  0.197  0.031 -0.094 -0.023   0.0619860189
 265 -0.063 -0.561  0.197  0.031 -0.094 -0.023   0.0619857898
 275 -0.063 -0.561  0.197  0.031 -0.094 -0.022   0.0619824366
 276 -0.063 -0.561  0.197  0.031 -0.094 -0.019   0.0619812359
 278 -0.063 -0.561  0.197  0.031 -0.094 -0.020   0.0619804975
 290 -0.063 -0.561  0.197  0.029 -0.094 -0.020   0.0619769263
 291 -0.063 -0.561  0.197  0.027 -0.094 -0.020   0.0619764669
 294 -0.063 -0.561  0.197  0.028 -0.094 -0.020   0.0619759790
 311 -0.063 -0.561  0.200  0.028 -0.092 -0.019   0.0619709446
 312 -0.063 -0.561  0.199  0.028 -0.092 -0.019   0.0619703228
 317 -0.061 -0.558  0.202  0.025 -0.090 -0.015   0.0619598163
  powell nthiter 4: fret = 0.061970
 384 -0.061 -0.560  0.202  0.025 -0.090 -0.016   0.0619574838
 385 -0.061 -0.559  0.201  0.025 -0.090 -0.017   0.0619563420
 386 -0.061 -0.559  0.201  0.025 -0.090 -0.017   0.0619562590
 391 -0.059 -0.557  0.203  0.022 -0.089 -0.014   0.0619490940
 396 -0.057 -0.556  0.204  0.020 -0.088 -0.013   0.0619480579
 398 -0.057 -0.556  0.204  0.020 -0.088 -0.013   0.0619479909
 400 -0.058 -0.556  0.204  0.020 -0.088 -0.013   0.0619479790
 401 -0.058 -0.556  0.204  0.020 -0.088 -0.013   0.0619478514
 402 -0.057 -0.556  0.204  0.020 -0.088 -0.013   0.0619478311
 407 -0.058 -0.556  0.204  0.020 -0.088 -0.013   0.0619477442
  powell nthiter 5: fret = 0.061948
 430 -0.058 -0.557  0.204  0.020 -0.088 -0.013   0.0619471746
 441 -0.058 -0.557  0.204  0.020 -0.088 -0.014   0.0619466981
 449 -0.057 -0.558  0.204  0.020 -0.088 -0.014   0.0619461362
 450 -0.057 -0.558  0.205  0.020 -0.088 -0.014   0.0619461307
 451 -0.057 -0.558  0.205  0.020 -0.088 -0.014   0.0619459972
 467 -0.055 -0.556  0.206  0.017 -0.086 -0.012   0.0619455995
 471 -0.056 -0.556  0.206  0.018 -0.087 -0.012   0.0619452336
 472 -0.056 -0.557  0.206  0.018 -0.087 -0.013   0.0619449554
Powell done niters = 5
Computing relative cost
 0  -25.0 -25.0 -25.0   1.050058
 1  -25.0 -25.0  25.0   1.026565
 2  -25.0  25.0 -25.0   0.990392
 3  -25.0  25.0  25.0   1.035547
 4   25.0 -25.0 -25.0   0.949887
 5   25.0 -25.0  25.0   0.995315
 6   25.0  25.0 -25.0   0.997046
 7   25.0  25.0  25.0   1.014166
REL:  8  0.061945    8.058976  1.007372 rel = 0.0614916 
Number of iterations     5
Min cost was 0.061945
Number of FunctionCalls   483
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 2.386000 sec
Parameters at optimum (transmm) -0.05629 -0.55659  0.20560
Parameters at optimum (rotdeg)  0.01811 -0.08682 -0.01263 
Final costs ----------------
Number of surface hits 2914
WM  Intensity   347.4298 +/-  87.4950
Ctx Intensity   562.3030 +/- 170.4119
Pct Contrast     45.0536 +/-  24.5724
Cost   0.0619
RelCost   0.0973
Reg at min cost was 
-0.99464  -0.01665  -0.10204   1.02278;
-0.09976  -0.10438   0.98952   3.53222;
 0.02713  -0.99440  -0.10215  -7.65878;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to ./tmp.bbregister.19449/bbr.pass1.dat, type = 14 
Original Reg 
-0.99458  -0.01814  -0.10241   1.06625;
-0.09997  -0.10469   0.98947   4.08656;
 0.02867  -0.99434  -0.10231  -7.86729;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00006  -0.00148  -0.00037   0.04347;
-0.00021  -0.00032  -0.00005   0.55434;
 0.00154   0.00006  -0.00016  -0.20852;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.629848
Computing change in rh position
Surface-RMS-Diff-mm 0.609475 0.030690 0.671540
mri_segreg done
mri_segreg --mov ./tmp.bbregister.19449/template.nii --init-reg ./tmp.bbregister.19449/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.19449/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc
mri_segreg --mov ./tmp.bbregister.19449/template.nii --init-reg ./tmp.bbregister.19449/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.19449/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode060.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.19449/template.nii
regfile ./tmp.bbregister.19449/bbr.pass1.dat
subject Patient_046
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490504187
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99464  -0.01665  -0.10204   1.02278;
-0.09976  -0.10438   0.98952   3.53222;
 0.02713  -0.99440  -0.10215  -7.65878;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.031983
 1  -25.0 -25.0  25.0   1.010717
 2  -25.0  25.0 -25.0   0.991084
 3  -25.0  25.0  25.0   1.030178
 4   25.0 -25.0 -25.0   0.982212
 5   25.0 -25.0  25.0   1.003280
 6   25.0  25.0 -25.0   1.017534
 7   25.0  25.0  25.0   0.995638
REL:  8  0.073520    8.062628  1.007828 rel = 0.0729489 
Initial costs ----------------
Number of surface hits 291439
WM  Intensity   346.9195 +/-  82.4405
Ctx Intensity   558.3695 +/- 165.8042
Pct Contrast     44.5027 +/-  24.8210
Cost   0.0735
RelCost   0.0729

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.0720   0.0720  0.0
     3  -0.1000  -0.1000  -0.1000  -0.1000   0.0000  -0.1000      0.0705   0.0705  0.0
     5  -0.1000  -0.1000  -0.1000  -0.1000   0.0000   0.1000      0.0691   0.0691  0.0
    13  -0.1000  -0.1000  -0.1000   0.0000   0.0000   0.0000      0.0687   0.0687  0.0
    36  -0.1000  -0.1000   0.0000   0.0000  -0.1000  -0.1000      0.0682   0.0682  0.0
    39  -0.1000  -0.1000   0.0000   0.0000   0.0000  -0.1000      0.0675   0.0675  0.0
    94  -0.1000   0.0000  -0.1000   0.0000   0.0000   0.0000      0.0668   0.0668  0.0
   102  -0.1000   0.0000  -0.1000   0.1000   0.0000  -0.1000      0.0664   0.0664  0.0
   120  -0.1000   0.0000   0.0000   0.0000   0.0000  -0.1000      0.0648   0.0648  0.0
   255   0.0000  -0.1000  -0.1000   0.0000   0.0000  -0.1000      0.0642   0.0642  0.0
   282   0.0000  -0.1000   0.0000   0.0000   0.0000  -0.1000      0.0642   0.0642  0.0
   283   0.0000  -0.1000   0.0000   0.0000   0.0000   0.0000      0.0638   0.0638  0.0
   336   0.0000   0.0000  -0.1000   0.0000   0.0000  -0.1000      0.0637   0.0637  0.0
   363   0.0000   0.0000   0.0000   0.0000   0.0000  -0.1000      0.0625   0.0625  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0619   0.0619  0.0
Brute Force --------------------------
Min cost was 0.061945
Number of iterations   729
Search time 3.590000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.073520
   7  0.061  0.000  0.000  0.000  0.000  0.000   0.0731926654
   8  0.055  0.000  0.000  0.000  0.000  0.000   0.0731916781
   9  0.057  0.000  0.000  0.000  0.000  0.000   0.0731906532
  19  0.057  0.006  0.000  0.000  0.000  0.000   0.0731897361
  21  0.057  0.004  0.000  0.000  0.000  0.000   0.0731891769
  30  0.057  0.004 -0.194  0.000  0.000  0.000   0.0708178059
  32  0.057  0.004 -0.210  0.000  0.000  0.000   0.0708052039
  41  0.057  0.004 -0.210  0.080  0.000  0.000   0.0705837400
  42  0.057  0.004 -0.210  0.056  0.000  0.000   0.0705352515
  43  0.057  0.004 -0.210  0.057  0.000  0.000   0.0705348364
  44  0.057  0.004 -0.210  0.058  0.000  0.000   0.0705345595
  53  0.057  0.004 -0.210  0.058  0.004  0.000   0.0705304221
  56  0.057  0.004 -0.210  0.058  0.005  0.000   0.0705301879
  63  0.057  0.004 -0.210  0.058  0.005  0.101   0.0697042280
  64  0.057  0.004 -0.210  0.058  0.005  0.103   0.0697006204
  65  0.057  0.004 -0.210  0.058  0.005  0.119   0.0696969133
  67  0.057  0.004 -0.210  0.058  0.005  0.112   0.0696922233
  70  0.057  0.004 -0.210  0.058  0.005  0.111   0.0696919288
  powell nthiter 1: fret = 0.069692
  79  0.111  0.004 -0.210  0.058  0.005  0.111   0.0695397198
  80  0.097  0.004 -0.210  0.058  0.005  0.111   0.0695280100
  92  0.097 -0.004 -0.210  0.058  0.005  0.111   0.0695269752
  93  0.097 -0.002 -0.210  0.058  0.005  0.111   0.0695267918
 102  0.097 -0.002 -0.255  0.058  0.005  0.111   0.0694198042
 104  0.097 -0.002 -0.251  0.058  0.005  0.111   0.0694150396
 105  0.097 -0.002 -0.247  0.058  0.005  0.111   0.0694142632
 106  0.097 -0.002 -0.248  0.058  0.005  0.111   0.0694140904
 115  0.097 -0.002 -0.248  0.076  0.005  0.111   0.0693584213
 116  0.097 -0.002 -0.248  0.077  0.005  0.111   0.0693579185
 124  0.097 -0.002 -0.248  0.077 -0.004  0.111   0.0693445758
 126  0.097 -0.002 -0.248  0.077 -0.003  0.111   0.0693445645
 134  0.097 -0.002 -0.248  0.077 -0.003  0.120   0.0693130632
 135  0.097 -0.002 -0.248  0.077 -0.003  0.136   0.0692785570
 138  0.097 -0.002 -0.248  0.077 -0.003  0.141   0.0692753886
 140  0.097 -0.002 -0.248  0.077 -0.003  0.140   0.0692753834
  powell nthiter 2: fret = 0.069275
 149  0.124 -0.002 -0.248  0.077 -0.003  0.140   0.0692616336
 150  0.113 -0.002 -0.248  0.077 -0.003  0.140   0.0692576526
 153  0.114 -0.002 -0.248  0.077 -0.003  0.140   0.0692576017
 161  0.114 -0.001 -0.248  0.077 -0.003  0.140   0.0692576015
 171  0.114 -0.001 -0.249  0.077 -0.003  0.140   0.0692574211
 172  0.114 -0.001 -0.250  0.077 -0.003  0.140   0.0692574152
 182  0.114 -0.001 -0.250  0.078 -0.003  0.140   0.0692570699
 183  0.114 -0.001 -0.250  0.079 -0.003  0.140   0.0692569437
 192  0.114 -0.001 -0.250  0.079 -0.007  0.140   0.0692528533
 194  0.114 -0.001 -0.250  0.079 -0.008  0.140   0.0692523386
 203  0.114 -0.001 -0.250  0.079 -0.008  0.149   0.0692395955
 206  0.114 -0.001 -0.250  0.079 -0.008  0.152   0.0692378510
  powell nthiter 3: fret = 0.069238
 217  0.118 -0.001 -0.250  0.079 -0.008  0.153   0.0692328886
 218  0.120 -0.001 -0.250  0.079 -0.008  0.153   0.0692322146
 238  0.120 -0.001 -0.251  0.079 -0.008  0.153   0.0692322086
 249  0.120 -0.001 -0.251  0.078 -0.008  0.153   0.0692321727
 259  0.120 -0.001 -0.251  0.078 -0.009  0.153   0.0692321057
 267  0.120 -0.001 -0.251  0.078 -0.009  0.154   0.0692316876
 269  0.120 -0.001 -0.251  0.078 -0.009  0.155   0.0692316083
 276  0.122 -0.001 -0.252  0.078 -0.010  0.156   0.0692315382
 277  0.121 -0.001 -0.252  0.078 -0.009  0.156   0.0692313877
 278  0.121 -0.001 -0.252  0.078 -0.009  0.156   0.0692313846
 280  0.121 -0.001 -0.252  0.078 -0.009  0.155   0.0692313790
 285  0.121 -0.001 -0.252  0.078 -0.009  0.155   0.0692313548
 287  0.121 -0.001 -0.252  0.078 -0.009  0.155   0.0692313452
  powell nthiter 4: fret = 0.069231
 315  0.121 -0.001 -0.249  0.078 -0.009  0.155   0.0692312359
 317  0.121 -0.001 -0.250  0.078 -0.009  0.155   0.0692311701
 342  0.121 -0.001 -0.251  0.078 -0.009  0.156   0.0692311602
 344  0.122 -0.001 -0.251  0.078 -0.010  0.156   0.0692311544
 348  0.122 -0.001 -0.251  0.078 -0.010  0.156   0.0692311391
 350  0.122 -0.001 -0.251  0.078 -0.010  0.156   0.0692311312
 352  0.122 -0.001 -0.251  0.078 -0.010  0.156   0.0692311059
  powell nthiter 5: fret = 0.069231
 383  0.122 -0.001 -0.249  0.078 -0.010  0.156   0.0692311008
 394  0.122 -0.001 -0.249  0.077 -0.010  0.156   0.0692309385
 402  0.122 -0.001 -0.249  0.077 -0.008  0.156   0.0692309324
 410  0.121 -0.001 -0.249  0.077 -0.008  0.156   0.0692308150
  powell nthiter 6: fret = 0.069231
 435  0.121 -0.000 -0.249  0.077 -0.008  0.156   0.0692305820
 436  0.121  0.001 -0.249  0.077 -0.008  0.156   0.0692305765
 446  0.121  0.001 -0.248  0.077 -0.008  0.156   0.0692303326
 456  0.121  0.001 -0.248  0.076 -0.008  0.156   0.0692300715
 472  0.122  0.001 -0.248  0.075 -0.008  0.156   0.0692300446
 473  0.122  0.001 -0.248  0.076 -0.008  0.156   0.0692300256
 474  0.121  0.001 -0.248  0.076 -0.008  0.156   0.0692300115
 480  0.121  0.001 -0.248  0.076 -0.008  0.156   0.0692300100
  powell nthiter 7: fret = 0.069230
 491  0.121  0.001 -0.248  0.076 -0.008  0.157   0.0692298940
 511  0.121  0.001 -0.247  0.076 -0.008  0.157   0.0692298559
 537  0.122  0.001 -0.247  0.075 -0.008  0.157   0.0692296159
 542  0.122  0.001 -0.247  0.075 -0.008  0.157   0.0692296158
 543  0.122  0.001 -0.247  0.075 -0.008  0.157   0.0692295978
  powell nthiter 8: fret = 0.069230
Powell done niters = 8
Computing relative cost
 0  -25.0 -25.0 -25.0   1.031327
 1  -25.0 -25.0  25.0   1.008187
 2  -25.0  25.0 -25.0   0.989555
 3  -25.0  25.0  25.0   1.027164
 4   25.0 -25.0 -25.0   0.984007
 5   25.0 -25.0  25.0   1.003376
 6   25.0  25.0 -25.0   1.017652
 7   25.0  25.0  25.0   0.995160
REL:  8  0.069230    8.056429  1.007054 rel = 0.0687447 
Number of iterations     8
Min cost was 0.069230
Number of FunctionCalls   609
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 115.420000 sec
Parameters at optimum (transmm)  0.12242  0.00085 -0.24698
Parameters at optimum (rotdeg)  0.07532 -0.00800  0.15711 
Final costs ----------------
Number of surface hits 291439
WM  Intensity   346.9791 +/-  82.8522
Ctx Intensity   556.8324 +/- 161.1265
Pct Contrast     44.4510 +/-  24.1473
Cost   0.0692
RelCost   0.0729
Reg at min cost was 
-0.99437  -0.01623  -0.10473   1.13656;
-0.10253  -0.10311   0.98937   3.54593;
 0.02686  -0.99454  -0.10087  -7.90096;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.99464  -0.01665  -0.10204   1.02278;
-0.09976  -0.10438   0.98952   3.53222;
 0.02713  -0.99440  -0.10215  -7.65878;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00027  -0.00042   0.00270  -0.11377;
 0.00276  -0.00126   0.00015  -0.01371;
 0.00027   0.00014  -0.00129   0.24218;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.267101
Computing change in rh position
Surface-RMS-Diff-mm 0.272078 0.052863 0.401351
mri_segreg done
MinCost: 0.069230 346.979081 556.832361 44.450954 
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.99437  -0.01623  -0.10473   1.13656;
-0.10253  -0.10311   0.98937   3.54593;
 0.02686  -0.99454  -0.10087  -7.90096;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_046/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.99437  -0.01623  -0.10473   1.13656;
-0.10253  -0.10311   0.98937   3.54593;
 0.02686  -0.99454  -0.10087  -7.90096;
 0.00000   0.00000   0.00000   1.00000;
Determinant -0.999998
subject = Patient_046
RegMat ---------------------------
-0.99437  -0.01623  -0.10473   1.13656;
-0.10253  -0.10311   0.98937   3.54593;
 0.02686  -0.99454  -0.10087  -7.90096;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Sat Mar 18 07:08:08 AEST 2017 
Ended   at Sat Mar 18 07:12:32 AEST 2017
BBR-Run-Time-Sec 264
 
bbregister Done
To check results, run:
tkregisterfv --mov biasmeanb0bet.nii.gz --reg register.dat --surfs 
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-PPOXAE/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/biascorr.mif /tmp/dwi2response-tmp-PPOXAE/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-PPOXAE/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-PPOXAE/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,3000 with 12,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 3000 dwi_b3000.mif
[03;34mCommand:[0m mrmath dwi_b3000.mif mean mean_b3000.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b3000.mif -finite mean_b3000.mif 0 -if 0 -le err_b3000.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b3000.mif -divide -log sdm_b3000.mif
[03;34mCommand:[0m mrcalc sdm_b3000.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b3000.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.37064 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.4257 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.86873 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 1.91235 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 1.91235 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 1.91235 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.81226 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.81226 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 592 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 592 -iter_voxels 5920 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-PPOXAE/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.9025 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 620 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 620 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 2931 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 367567 --> 299395 --> 299349[0m
dwi2response: [03;32mWM: 126234 --> 118377 --> 592 (SF)[0m
dwi2response: [03;32mGM: 109310 --> 62021 --> 1240[0m
dwi2response: [03;32mCSF: 63805 --> 29310 --> 2931[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b3000.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb3000.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_046/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-PPOXAE/[0m
