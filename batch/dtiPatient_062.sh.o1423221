dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/dwipreproc_cust-tmp-JDGGF4/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/dwipreproc_cust-tmp-JDGGF4/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/dwipreproc_cust-tmp-JDGGF4/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/dwipreproc_cust-tmp-JDGGF4/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/dwipreproc_cust-tmp-JDGGF4/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 103[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
          0           0           0           0
   0.999986 -0.00502201 -0.00134121        3000
  -0.025431   -0.746679    0.664698        3000
  0.0028835    0.520221   -0.854027        3000
  -0.271704    0.829793    0.487463        3000
   0.650789    0.408466    0.640023        3000
  -0.508265    0.263619   -0.819861        2950
  -0.959013    0.282122  -0.0264867        3000
  -0.534361     0.38421    0.752888        3000
   0.316808     0.13702     0.93854        3000
          0           0           0           0
  -0.505341   -0.593007    0.626876        3000
  -0.600757   0.0988592    0.793296        3000
   0.954545   -0.157219     0.25323        3000
   0.526352    -0.74498   -0.409827        3000
  -0.192893   -0.926137   -0.324135        3000
   0.363985    0.925767    0.102323        3000
  -0.259008    0.931673   -0.254755        3000
 -0.0236881    0.513563    0.857725        3000
   0.613117    0.788944   0.0406853        3000
          0           0           0           0
  -0.873387   0.0335491   -0.485871        3000
   0.743877   -0.233999   -0.626012        3000
  -0.487891    0.678603   -0.549055        3000
   0.450974   -0.891351   0.0460034        3000
     0.6631   -0.433496     0.61023        3000
   0.853245    0.240796     0.46259        3000
   0.439469   -0.508273    0.740625        3000
  -0.958263   -0.141302    0.248528        3000
   0.703654   -0.596235     0.38649        3000
          0           0           0           0
   0.387423   -0.183974   -0.903359        3000
  -0.142747    -0.68396   -0.715417        3000
   0.801739      -0.597   -0.028386        3000
    0.28862    -0.13328    0.948122        3000
  -0.962943   -0.132125   -0.235127        3000
    0.15072   -0.698938   -0.699121        3000
  0.0173479   -0.983658    0.179209        3000
   0.375768   -0.896885   -0.233231        3000
  -0.667829    0.729777    -0.14639        3000
          0           0           0           0
   0.290465   -0.469155   -0.833981        3000
   0.722843   -0.159467    0.672361        3000
  -0.715323   -0.661042   -0.226575        3000
   -0.42783   -0.583998   -0.689861        3000
  -0.958437   -0.284854   0.0159982        3000
  -0.493155   -0.300007   -0.816575        3000
   0.893383    0.401363    0.201928        3000
  -0.202656    0.978596    0.035784        3000
    0.23015     0.96691    -0.11007        3000
          0           0           0           0
  -0.738182    0.602574    0.303301        3000
  -0.843368    0.339738    0.416303        3000
  -0.104759   -0.287959   -0.951896        3000
  -0.239583    0.401539   -0.883949        3000
  -0.612274    0.778582    0.137591        3000
   0.266407    0.460476    0.846752        3000
   0.657496   -0.516426   -0.548637        3000
  -0.256552   -0.896726    0.360644        3000
   0.249565   -0.822202    0.511567        3000
          0           0           0           0
   0.571715    0.661423     0.48545        3000
  0.0211329   -0.244974    0.969299        3000
   0.224551    0.322909   -0.919405        2950
  -0.837991    0.324527   -0.438695        3000
  -0.860878    0.466542   -0.203046        3000
   0.487812   -0.811266    0.322315        3000
   -0.10594    0.948173    0.299574        3000
   0.542704   0.0137865    0.839811        3000
  -0.250196     -0.5789    0.776065        3000
          0           0           0           0
  -0.229034  -0.0410338    0.972553        3000
  -0.215894    0.655059   -0.724077        3000
   0.961348   -0.148973   -0.231555        3000
   0.310667    0.790611    0.527655        3000
  -0.870822   -0.430987    0.236474        3000
   0.846086    0.265717   -0.462095        3000
   0.893326   -0.414925   -0.172646        3000
  -0.703174   -0.679689     0.20873        3000
  -0.667527   -0.352916    0.655636        3000
          0           0           0           0
   0.517138    0.751151   -0.410294        3000
  -0.719985   -0.138065   -0.680117        3000
 -0.0397011  -0.0242334   -0.998918        3000
   0.826372    0.563115  0.00333961        3000
   0.453635    0.387808   -0.802384        3000
  -0.879933   0.0390276    0.473492        3000
  -0.148227    0.249912    0.956856        3000
  -0.766941   -0.486987   -0.417906        3000
  -0.479802   -0.130321    0.867644        3000
          0           0           0           0
   0.718023    0.534619   -0.445675        3000
  -0.481096   -0.823831   -0.299748        3000
   0.281925    0.763873   -0.580531        3000
  0.0172057    0.848797    0.528438        3000
 -0.0650898   -0.992823   -0.100324        3000
  -0.420594    0.636373     0.64663        3000
   0.734319   0.0941269   -0.672247        3000
-0.00089556    0.898108   -0.439773        3000
  -0.475638   -0.862952    0.170535        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/dwipreproc_cust-tmp-JDGGF4/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-XVG8WY/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-XVG8WY/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-XVG8WY/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-XVG8WY/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-XVG8WY/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=2998.89 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=2998.89 shell.
24587
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-DAD3WC/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-DAD3WC/parc.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/brainFS.nii /tmp/labelsgmfix-tmp-DAD3WC/T1.nii -stride -1,+2,+3
labelsgmfix: [03;32mChanging to temporary directory (/tmp/labelsgmfix-tmp-DAD3WC/)[0m
[03;34mCommand:[0m run_first_all -s R_Thal,L_Puta,R_Caud,R_Hipp,L_Amyg,R_Pall,R_Amyg,L_Caud,L_Pall,L_Thal,L_Hipp,R_Accu,L_Accu,R_Puta -i T1.nii -b -o first
[03;34mCommand:[0m mrcalc parc.mif 0 -min sgm.mif
[03;34mCommand:[0m meshconvert first-R_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Thal_mask.mif 6 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Puta_mask.mif 3 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Caud_mask.mif 7 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Hipp_mask.mif 13 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Amyg_mask.mif 12 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Pall_mask.mif 9 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Amyg_mask.mif 14 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Caud_mask.mif 2 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Pall_mask.mif 4 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Thal_mask.mif 1 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Hipp_mask.mif 11 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Accu_mask.mif 10 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Accu_mask.mif 5 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Puta_mask.mif 8 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m mrmath R_Thal_mask.mif L_Puta_mask.mif R_Caud_mask.mif R_Hipp_mask.mif L_Amyg_mask.mif R_Pall_mask.mif R_Amyg_mask.mif L_Caud_mask.mif L_Pall_mask.mif L_Thal_mask.mif L_Hipp_mask.mif R_Accu_mask.mif L_Accu_mask.mif R_Puta_mask.mif sum - | mrcalc - 1 -gt sgm_overlap_mask.mif
[03;34mCommand:[0m mrcalc sgm_overlap_mask.mif 0 sgm.mif -if sgm_masked.mif
[03;34mCommand:[0m labelconvert sgm_masked.mif /software/mrtrix3/mrtrix3-AP/scripts/data/FreeSurferSGM.txt /software/mrtrix3/mrtrix3-AP/src/connectome/tables/fs_a2009s.txt sgm_new_labels.mif
[03;34mCommand:[0m mrcalc parc.mif 83 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 78 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 84 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 87 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 81 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 86 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 88 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 77 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 79 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 76 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 80 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 89 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 82 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 85 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc sgm_new_labels.mif 0.5 -gt sgm_new_labels.mif parc.mif -if result.mif -datatype uint32
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/parc_fixsubcort.nii
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc)[0m
labelsgmfix: [03;32mDeleting temporary directory /tmp/labelsgmfix-tmp-DAD3WC/[0m
tmp ./tmp.bbregister.13463
Log file is register.dat.log
Sat Mar 18 07:00:38 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc
/software/freesurfer/freesurfer-6.0.0/bin/bbregister --s Patient_062 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.75 2016/05/10 20:02:28 greve Exp $
Linux hpcnode038.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-6.0.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.13463/template.nii
mri_convert.bin biasmeanb0bet.nii.gz ./tmp.bbregister.13463/template.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.999478, 0.0305666, 0.0104616)
j_ras = (-0.032283, 0.957481, 0.286684)
k_ras = (-0.0012538, -0.286872, 0.957968)
writing to ./tmp.bbregister.13463/template.nii...
fslregister --s Patient_062 --mov ./tmp.bbregister.13463/template.nii --reg ./tmp.bbregister.13463/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.13463/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov

Log file is ./tmp.bbregister.13463/reg.init.dat.fslregister.log

Sat Mar 18 07:00:38 AEST 2017
--s Patient_062 --mov ./tmp.bbregister.13463/template.nii --reg ./tmp.bbregister.13463/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.13463/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov
$Id: fslregister,v 1.40 2016/02/12 21:43:15 zkaufman Exp $
hpcnode038.adqimr.ad.lan
Linux hpcnode038.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc
mri_convert /working/lab_michaebr/alistaiP/Park/FS/Patient_062/mri/brainmask.mgz ./tmp.bbregister.13463/fslregister/refvol.fslregister.nii
mri_convert.bin /working/lab_michaebr/alistaiP/Park/FS/Patient_062/mri/brainmask.mgz ./tmp.bbregister.13463/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/Park/FS/Patient_062/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, -9.31323e-10, 3.49246e-10)
j_ras = (6.98492e-10, -2.98023e-08, -1)
k_ras = (7.27596e-10, 1, 2.98023e-08)
writing to ./tmp.bbregister.13463/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc
mri_convert ./tmp.bbregister.13463/template.nii ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii --frame 0
mri_convert.bin ./tmp.bbregister.13463/template.nii ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from ./tmp.bbregister.13463/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.999478, 0.0305666, 0.0104616)
j_ras = (-0.032283, 0.957481, 0.286684)
k_ras = (-0.0012538, -0.286872, 0.957968)
keeping frame 0
writing to ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.13463/template.nii
reg file       ./tmp.bbregister.13463/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.13463/template.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.99948  -0.03057  -0.01046   1.71874;
-0.00125  -0.28687   0.95797   0.00003;
 0.03228  -0.95748  -0.28668  -0.00001;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
-0.99948  -0.03057  -0.01046   1.71874;
-0.00125  -0.28687   0.95797   0.00003;
 0.03228  -0.95748  -0.28668  -0.00001;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.00000  -0.00000  -0.00000   1.71874;
 0.00000   1.00000   0.00000   0.00004;
-0.00000   0.00000   1.00000  -0.00001;
 0.00000   0.00000   0.00000   1.00000;
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc
tkregister2_cmdl --mov ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.13463/fslregister/reg0.13503.dat --regheader --fslregout ./tmp.bbregister.13463/reg.init.dat.fsl.mat0 --s Patient_062 --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.13463/fslregister/reg0.13503.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_062/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.99948   0.03057   0.01046   2.23972;
-0.00125  -0.28687   0.95797  -0.35002;
 0.03228  -0.95748  -0.28668  -6.09964;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99948   0.03057   0.01046   2.23972;
-0.00125  -0.28687   0.95797  -0.35002;
 0.03228  -0.95748  -0.28668  -6.09964;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_062
RegMat ---------------------------
 0.99948   0.03057   0.01046   2.23972;
-0.00125  -0.28687   0.95797  -0.35002;
 0.03228  -0.95748  -0.28668  -6.09964;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Sat Mar 18 07:00:41 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc
flirt.fsl -ref ./tmp.bbregister.13463/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.13463/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/fsl.5.0.2.xyztrans.sch -init ./tmp.bbregister.13463/reg.init.dat.fsl.mat0
Sat Mar 18 07:01:11 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc
flirt.fsl -ref ./tmp.bbregister.13463/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.13463/reg.init.dat.fsl.mat -init ./tmp.bbregister.13463/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_062 --mov ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.13463/reg.init.dat --fslreg ./tmp.bbregister.13463/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.99964   0.02661  -0.00317   17.16610;
 0.00500  -0.30108  -0.95359   234.20100;
-0.02633   0.95323  -0.30110   42.60990;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.13463/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_062/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.13463/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.99964   0.02633   0.00500   1.98483;
 0.00317  -0.30110   0.95359  -1.28990;
 0.02661  -0.95323  -0.30108  -6.32037;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99964   0.02633   0.00500   1.98483;
 0.00317  -0.30110   0.95359  -1.28990;
 0.02661  -0.95323  -0.30108  -6.32037;
 0.00000   0.00000   0.00000   1.00000;
Determinant 0.999999
subject = Patient_062
RegMat ---------------------------
 0.99964   0.02633   0.00500   1.98483;
 0.00317  -0.30110   0.95359  -1.28990;
 0.02661  -0.95323  -0.30108  -6.32037;
 0.00000   0.00000   0.00000   1.00000;
mri_matrix_multiply -im ./tmp.bbregister.13463/fslregister/swapreg.dat -im ./tmp.bbregister.13463/reg.init.dat -om ./tmp.bbregister.13463/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Sat Mar 18 07:00:38 AEST 2017 
Ended   at Sat Mar 18 07:02:36 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.13463/template.nii --reg ./tmp.bbregister.13463/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.13463/template.nii --init-reg ./tmp.bbregister.13463/reg.init.dat --out-reg ./tmp.bbregister.13463/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc
mri_segreg --mov ./tmp.bbregister.13463/template.nii --init-reg ./tmp.bbregister.13463/reg.init.dat --out-reg ./tmp.bbregister.13463/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode038.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.13463/template.nii
regfile ./tmp.bbregister.13463/reg.init.dat
subject Patient_062
dof 6
outregfile ./tmp.bbregister.13463/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490070632
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99964  -0.02633  -0.00500  -0.26608;
 0.00316  -0.30110   0.95359  -1.28986;
 0.02661  -0.95323  -0.30108  -6.32038;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.014140
 1  -25.0 -25.0  25.0   1.011499
 2  -25.0  25.0 -25.0   1.005546
 3  -25.0  25.0  25.0   0.987656
 4   25.0 -25.0 -25.0   1.016714
 5   25.0 -25.0  25.0   1.028906
 6   25.0  25.0 -25.0   0.980367
 7   25.0  25.0  25.0   1.033506
REL:  8  0.146394    8.078334  1.009792 rel = 0.144975 
Initial costs ----------------
Number of surface hits 2264
WM  Intensity   390.4479 +/-  67.4383
Ctx Intensity   546.4590 +/- 124.0402
Pct Contrast     31.7688 +/-  22.7126
Cost   0.1464
RelCost   0.1450

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      1.0254   1.0254  0.0
     1  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000   0.0000      0.9974   0.9974  0.0
     2  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000   4.0000      0.9498   0.9498  0.0
     6  -4.0000  -4.0000  -4.0000  -4.0000   4.0000  -4.0000      0.9401   0.9401  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.9268   0.9268  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.8719   0.8719  0.0
    33  -4.0000  -4.0000   0.0000  -4.0000   4.0000  -4.0000      0.8114   0.8114  0.0
    34  -4.0000  -4.0000   0.0000  -4.0000   4.0000   0.0000      0.7929   0.7929  0.0
   105  -4.0000   0.0000  -4.0000   4.0000   4.0000  -4.0000      0.7928   0.7928  0.0
   120  -4.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.7684   0.7684  0.0
   123  -4.0000   0.0000   0.0000   0.0000   4.0000  -4.0000      0.7395   0.7395  0.0
   274   0.0000  -4.0000   0.0000  -4.0000   0.0000   0.0000      0.6831   0.6831  0.0
   355   0.0000   0.0000   0.0000  -4.0000   0.0000   0.0000      0.6771   0.6771  0.0
   361   0.0000   0.0000   0.0000   0.0000  -4.0000   0.0000      0.6500   0.6500  0.0
   363   0.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.5496   0.5496  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.1464   0.1464  0.0
Brute Force --------------------------
Min cost was 0.146394
Number of iterations   729
Search time 2.780000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.146394
   7  0.020  0.000  0.000  0.000  0.000  0.000   0.1459786779
   8  0.069  0.000  0.000  0.000  0.000  0.000   0.1451749261
  12  0.061  0.000  0.000  0.000  0.000  0.000   0.1451515690
  13  0.062  0.000  0.000  0.000  0.000  0.000   0.1451494031
  14  0.063  0.000  0.000  0.000  0.000  0.000   0.1451491501
  20  0.063 -0.618  0.000  0.000  0.000  0.000   0.1229603415
  22  0.063 -0.443  0.000  0.000  0.000  0.000   0.1226791839
  23  0.063 -0.521  0.000  0.000  0.000  0.000   0.1221965136
  24  0.063 -0.520  0.000  0.000  0.000  0.000   0.1221854008
  25  0.063 -0.496  0.000  0.000  0.000  0.000   0.1220535685
  27  0.063 -0.497  0.000  0.000  0.000  0.000   0.1220520378
  31  0.063 -0.497  1.000  0.000  0.000  0.000   0.1071691905
  35  0.063 -0.497  0.618  0.000  0.000  0.000   0.0975049743
  37  0.063 -0.497  0.662  0.000  0.000  0.000   0.0972936461
  39  0.063 -0.497  0.651  0.000  0.000  0.000   0.0972708158
  41  0.063 -0.497  0.652  0.000  0.000  0.000   0.0972705528
  47  0.063 -0.497  0.652 -0.618  0.000  0.000   0.0948462799
  49  0.063 -0.497  0.652 -0.334  0.000  0.000   0.0909654478
  50  0.063 -0.497  0.652 -0.346  0.000  0.000   0.0909413460
  52  0.063 -0.497  0.652 -0.347  0.000  0.000   0.0909413020
  62  0.063 -0.497  0.652 -0.347 -0.066  0.000   0.0893778782
  63  0.063 -0.497  0.652 -0.347 -0.084  0.000   0.0892317726
  65  0.063 -0.497  0.652 -0.347 -0.087  0.000   0.0892290697
  74  0.063 -0.497  0.652 -0.347 -0.087  0.140   0.0873532852
  75  0.063 -0.497  0.652 -0.347 -0.087  0.160   0.0872245593
  77  0.063 -0.497  0.652 -0.347 -0.087  0.159   0.0872208656
  78  0.063 -0.497  0.652 -0.347 -0.087  0.157   0.0872198033
  powell nthiter 1: fret = 0.087220
  89  0.005 -0.497  0.652 -0.347 -0.087  0.157   0.0870425874
  91 -0.063 -0.497  0.652 -0.347 -0.087  0.157   0.0867537371
  94 -0.073 -0.497  0.652 -0.347 -0.087  0.157   0.0867207237
  95 -0.085 -0.497  0.652 -0.347 -0.087  0.157   0.0866816002
  97 -0.089 -0.497  0.652 -0.347 -0.087  0.157   0.0866730185
 109 -0.089 -0.496  0.652 -0.347 -0.087  0.157   0.0866715671
 110 -0.089 -0.494  0.652 -0.347 -0.087  0.157   0.0866702948
 119 -0.089 -0.494  0.736 -0.347 -0.087  0.157   0.0858439121
 120 -0.089 -0.494  0.746 -0.347 -0.087  0.157   0.0855901390
 121 -0.089 -0.494  0.856 -0.347 -0.087  0.157   0.0839284483
 123 -0.089 -0.494  0.830 -0.347 -0.087  0.157   0.0836217719
 125 -0.089 -0.494  0.817 -0.347 -0.087  0.157   0.0835171142
 126 -0.089 -0.494  0.815 -0.347 -0.087  0.157   0.0835104703
 127 -0.089 -0.494  0.811 -0.347 -0.087  0.157   0.0835101113
 129 -0.089 -0.494  0.813 -0.347 -0.087  0.157   0.0835078461
 137 -0.089 -0.494  0.813 -0.393 -0.087  0.157   0.0827932535
 140 -0.089 -0.494  0.813 -0.398 -0.087  0.157   0.0827798987
 141 -0.089 -0.494  0.813 -0.400 -0.087  0.157   0.0827789531
 150 -0.089 -0.494  0.813 -0.400 -0.084  0.157   0.0826762078
 151 -0.089 -0.494  0.813 -0.400 -0.061  0.157   0.0821556434
 169 -0.089 -0.494  0.813 -0.400 -0.061  0.160   0.0821546817
 170 -0.089 -0.494  0.813 -0.400 -0.061  0.165   0.0821536463
 172 -0.089 -0.494  0.813 -0.400 -0.061  0.164   0.0821536383
  powell nthiter 2: fret = 0.082154
 185 -0.103 -0.494  0.813 -0.400 -0.061  0.164   0.0820289463
 186 -0.102 -0.494  0.813 -0.400 -0.061  0.164   0.0820287653
 194 -0.102 -0.454  0.813 -0.400 -0.061  0.164   0.0819565353
 195 -0.102 -0.466  0.813 -0.400 -0.061  0.164   0.0818812142
 196 -0.102 -0.471  0.813 -0.400 -0.061  0.164   0.0818757429
 197 -0.102 -0.470  0.813 -0.400 -0.061  0.164   0.0818757147
 207 -0.102 -0.470  0.816 -0.400 -0.061  0.164   0.0818468990
 208 -0.102 -0.470  0.824 -0.400 -0.061  0.164   0.0818297230
 210 -0.102 -0.470  0.821 -0.400 -0.061  0.164   0.0818233223
 219 -0.102 -0.470  0.821 -0.401 -0.061  0.164   0.0818078758
 221 -0.102 -0.470  0.821 -0.442 -0.061  0.164   0.0817430837
 222 -0.102 -0.470  0.821 -0.424 -0.061  0.164   0.0816366134
 223 -0.102 -0.470  0.821 -0.425 -0.061  0.164   0.0816340542
 224 -0.102 -0.470  0.821 -0.427 -0.061  0.164   0.0816331763
 227 -0.102 -0.470  0.821 -0.426 -0.061  0.164   0.0816327184
 236 -0.102 -0.470  0.821 -0.426 -0.056  0.164   0.0815510497
 237 -0.102 -0.470  0.821 -0.426 -0.051  0.164   0.0815312005
 238 -0.102 -0.470  0.821 -0.426 -0.052  0.164   0.0815299520
 252 -0.102 -0.470  0.821 -0.426 -0.052  0.165   0.0815295766
  powell nthiter 3: fret = 0.081530
 266 -0.104 -0.470  0.821 -0.426 -0.052  0.165   0.0815255583
 275 -0.104 -0.468  0.821 -0.426 -0.052  0.165   0.0815163924
 277 -0.104 -0.462  0.821 -0.426 -0.052  0.165   0.0815020159
 278 -0.104 -0.460  0.821 -0.426 -0.052  0.165   0.0815018408
 288 -0.104 -0.460  0.822 -0.426 -0.052  0.165   0.0814970320
 289 -0.104 -0.460  0.826 -0.426 -0.052  0.165   0.0814932459
 291 -0.104 -0.460  0.825 -0.426 -0.052  0.165   0.0814914860
 302 -0.104 -0.460  0.825 -0.434 -0.052  0.165   0.0814458819
 329 -0.104 -0.460  0.825 -0.434 -0.052  0.163   0.0814448320
  powell nthiter 4: fret = 0.081445
 345 -0.103 -0.460  0.825 -0.434 -0.052  0.163   0.0814447963
 356 -0.103 -0.459  0.825 -0.434 -0.052  0.163   0.0814439019
 357 -0.103 -0.458  0.825 -0.434 -0.052  0.163   0.0814435324
 370 -0.103 -0.458  0.828 -0.434 -0.052  0.163   0.0814414647
 372 -0.103 -0.458  0.827 -0.434 -0.052  0.163   0.0814398342
 384 -0.103 -0.458  0.827 -0.436 -0.052  0.163   0.0814310681
 411 -0.103 -0.458  0.827 -0.436 -0.052  0.164   0.0814305277
 413 -0.102 -0.456  0.829 -0.438 -0.052  0.165   0.0814260986
 420 -0.102 -0.456  0.829 -0.438 -0.052  0.165   0.0814259441
 427 -0.102 -0.456  0.829 -0.438 -0.052  0.165   0.0814258661
  powell nthiter 5: fret = 0.081426
 439 -0.103 -0.456  0.829 -0.438 -0.052  0.165   0.0814256466
 451 -0.103 -0.457  0.829 -0.438 -0.052  0.165   0.0814246813
 452 -0.103 -0.458  0.829 -0.438 -0.052  0.165   0.0814242628
 490 -0.102 -0.456  0.831 -0.440 -0.052  0.166   0.0814238858
 494 -0.103 -0.457  0.830 -0.440 -0.052  0.166   0.0814228096
 497 -0.103 -0.457  0.830 -0.439 -0.052  0.166   0.0814227262
 505 -0.103 -0.457  0.830 -0.439 -0.052  0.166   0.0814226496
Powell done niters = 5
Computing relative cost
 0  -25.0 -25.0 -25.0   1.024595
 1  -25.0 -25.0  25.0   1.001355
 2  -25.0  25.0 -25.0   1.019477
 3  -25.0  25.0  25.0   0.995173
 4   25.0 -25.0 -25.0   0.974464
 5   25.0 -25.0  25.0   1.013142
 6   25.0  25.0 -25.0   0.980410
 7   25.0  25.0  25.0   1.046675
REL:  8  0.081423    8.055290  1.006911 rel = 0.0808638 
Number of iterations     5
Min cost was 0.081423
Number of FunctionCalls   508
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 2.000000 sec
Parameters at optimum (transmm) -0.10278 -0.45703  0.83010
Parameters at optimum (rotdeg) -0.43936 -0.05161  0.16576 
Final costs ----------------
Number of surface hits 2264
WM  Intensity   384.8897 +/-  60.7866
Ctx Intensity   542.7115 +/- 105.3717
Pct Contrast     33.0812 +/-  19.2234
Cost   0.0814
RelCost   0.1450
Reg at min cost was 
-0.99967  -0.02458  -0.00747  -0.35931;
 0.00048  -0.30847   0.95123  -1.79607;
 0.02569  -0.95091  -0.30838  -5.48044;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to ./tmp.bbregister.13463/bbr.pass1.dat, type = 14 
Original Reg 
-0.99964  -0.02633  -0.00500  -0.26608;
 0.00316  -0.30110   0.95359  -1.28986;
 0.02661  -0.95323  -0.30108  -6.32038;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00003  -0.00175   0.00247   0.09322;
 0.00269   0.00737   0.00235   0.50620;
 0.00093  -0.00231   0.00731  -0.83994;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.889105
Computing change in rh position
Surface-RMS-Diff-mm 0.892508 0.182495 1.345010
mri_segreg done
mri_segreg --mov ./tmp.bbregister.13463/template.nii --init-reg ./tmp.bbregister.13463/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.13463/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc
mri_segreg --mov ./tmp.bbregister.13463/template.nii --init-reg ./tmp.bbregister.13463/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.13463/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode038.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.13463/template.nii
regfile ./tmp.bbregister.13463/bbr.pass1.dat
subject Patient_062
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490450310
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99967  -0.02458  -0.00747  -0.35931;
 0.00048  -0.30847   0.95123  -1.79607;
 0.02569  -0.95091  -0.30838  -5.48044;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.007268
 1  -25.0 -25.0  25.0   1.019294
 2  -25.0  25.0 -25.0   1.008691
 3  -25.0  25.0  25.0   1.027413
 4   25.0 -25.0 -25.0   0.996338
 5   25.0 -25.0  25.0   0.996153
 6   25.0  25.0 -25.0   1.003072
 7   25.0  25.0  25.0   1.021999
REL:  8  0.095097    8.080229  1.010029 rel = 0.0941524 
Initial costs ----------------
Number of surface hits 225069
WM  Intensity   386.2325 +/-  62.4797
Ctx Intensity   542.7190 +/- 105.5487
Pct Contrast     32.7369 +/-  19.6730
Cost   0.0951
RelCost   0.0942

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.0967   0.0967  0.0
     3  -0.1000  -0.1000  -0.1000  -0.1000   0.0000  -0.1000      0.0880   0.0880  0.0
     6  -0.1000  -0.1000  -0.1000  -0.1000   0.1000  -0.1000      0.0845   0.0845  0.0
    33  -0.1000  -0.1000   0.0000  -0.1000   0.1000  -0.1000      0.0832   0.0832  0.0
   273   0.0000  -0.1000   0.0000  -0.1000   0.0000  -0.1000      0.0830   0.0830  0.0
   283   0.0000  -0.1000   0.0000   0.0000   0.0000   0.0000      0.0827   0.0827  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0814   0.0814  0.0
Brute Force --------------------------
Min cost was 0.081423
Number of iterations   729
Search time 2.805000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.095097
   6  0.382  0.000  0.000  0.000  0.000  0.000   0.0942078423
   7  0.201  0.000  0.000  0.000  0.000  0.000   0.0906148758
   8  0.202  0.000  0.000  0.000  0.000  0.000   0.0906127899
   9  0.210  0.000  0.000  0.000  0.000  0.000   0.0906057024
  11  0.209  0.000  0.000  0.000  0.000  0.000   0.0906054963
  19  0.209  0.032  0.000  0.000  0.000  0.000   0.0905653509
  20  0.209  0.022  0.000  0.000  0.000  0.000   0.0905605140
  21  0.209  0.024  0.000  0.000  0.000  0.000   0.0905603501
  22  0.209  0.025  0.000  0.000  0.000  0.000   0.0905602976
  31  0.209  0.025 -0.126  0.000  0.000  0.000   0.0888482118
  32  0.209  0.025 -0.136  0.000  0.000  0.000   0.0888138824
  34  0.209  0.025 -0.144  0.000  0.000  0.000   0.0888030046
  35  0.209  0.025 -0.145  0.000  0.000  0.000   0.0888029529
  45  0.209  0.025 -0.145 -0.003  0.000  0.000   0.0888013732
  46  0.209  0.025 -0.145 -0.004  0.000  0.000   0.0888013708
  54  0.209  0.025 -0.145 -0.004  0.032  0.000   0.0887704074
  55  0.209  0.025 -0.145 -0.004  0.021  0.000   0.0887501341
  56  0.209  0.025 -0.145 -0.004  0.019  0.000   0.0887499523
  64  0.209  0.025 -0.145 -0.004  0.019 -0.180   0.0866748742
  66  0.209  0.025 -0.145 -0.004  0.019 -0.191   0.0866610019
  68  0.209  0.025 -0.145 -0.004  0.019 -0.213   0.0866475536
  70  0.209  0.025 -0.145 -0.004  0.019 -0.214   0.0866474547
  71  0.209  0.025 -0.145 -0.004  0.019 -0.215   0.0866472653
  powell nthiter 1: fret = 0.086647
  80  0.133  0.025 -0.145 -0.004  0.019 -0.215   0.0858001692
  81  0.119  0.025 -0.145 -0.004  0.019 -0.215   0.0857790348
  83  0.121  0.025 -0.145 -0.004  0.019 -0.215   0.0857782525
  93  0.121  0.019 -0.145 -0.004  0.019 -0.215   0.0857749286
  94  0.121  0.020 -0.145 -0.004  0.019 -0.215   0.0857745681
 103  0.121  0.020 -0.149 -0.004  0.019 -0.215   0.0857723420
 104  0.121  0.020 -0.151 -0.004  0.019 -0.215   0.0857722422
 112  0.121  0.020 -0.151  0.004  0.019 -0.215   0.0857674700
 122  0.121  0.020 -0.151  0.004  0.024 -0.215   0.0857608027
 123  0.121  0.020 -0.151  0.004  0.027 -0.215   0.0857588593
 132  0.121  0.020 -0.151  0.004  0.027 -0.217   0.0857548405
 133  0.121  0.020 -0.151  0.004  0.027 -0.235   0.0857536370
 135  0.121  0.020 -0.151  0.004  0.027 -0.226   0.0857446010
 137  0.121  0.020 -0.151  0.004  0.027 -0.225   0.0857444691
 147  0.118  0.020 -0.151  0.004  0.027 -0.226   0.0857364567
 148  0.113  0.020 -0.151  0.005  0.028 -0.226   0.0857324377
 151  0.113  0.020 -0.151  0.005  0.028 -0.226   0.0857324257
 152  0.113  0.020 -0.151  0.005  0.028 -0.226   0.0857323981
  powell nthiter 2: fret = 0.085732
 162  0.113  0.020 -0.151  0.005  0.028 -0.230   0.0857292813
 171  0.113  0.021 -0.151  0.005  0.028 -0.230   0.0857286181
 172  0.113  0.023 -0.151  0.005  0.028 -0.230   0.0857283727
 175  0.113  0.022 -0.151  0.005  0.028 -0.230   0.0857282412
 183  0.113  0.022 -0.153  0.005  0.028 -0.230   0.0857282008
 185  0.113  0.022 -0.152  0.005  0.028 -0.230   0.0857281249
 192  0.113  0.022 -0.152  0.004  0.028 -0.230   0.0857278845
 193  0.113  0.022 -0.152  0.003  0.028 -0.230   0.0857277222
 195  0.113  0.022 -0.152  0.001  0.028 -0.230   0.0857276950
 214  0.111  0.022 -0.152  0.001  0.028 -0.231   0.0857271144
 215  0.112  0.022 -0.152  0.001  0.028 -0.231   0.0857270994
 217  0.112  0.022 -0.152  0.001  0.028 -0.231   0.0857270457
 219  0.112  0.022 -0.152  0.001  0.028 -0.231   0.0857270165
 220  0.112  0.022 -0.152  0.001  0.028 -0.231   0.0857269891
  powell nthiter 3: fret = 0.085727
 230  0.112  0.022 -0.152  0.001  0.028 -0.232   0.0857265165
 239  0.112  0.021 -0.152  0.001  0.028 -0.232   0.0857263526
 248  0.112  0.021 -0.153  0.001  0.028 -0.232   0.0857263168
 277  0.111  0.021 -0.153  0.001  0.028 -0.233   0.0857262421
 278  0.111  0.021 -0.153  0.001  0.028 -0.233   0.0857261043
 279  0.112  0.021 -0.153  0.001  0.028 -0.232   0.0857260976
  powell nthiter 4: fret = 0.085726
Powell done niters = 4
Computing relative cost
 0  -25.0 -25.0 -25.0   1.004073
 1  -25.0 -25.0  25.0   1.020304
 2  -25.0  25.0 -25.0   1.007256
 3  -25.0  25.0  25.0   1.028966
 4   25.0 -25.0 -25.0   0.995414
 5   25.0 -25.0  25.0   0.997630
 6   25.0  25.0 -25.0   0.999786
 7   25.0  25.0  25.0   1.023948
REL:  8  0.085726    8.077376  1.009672 rel = 0.0849049 
Number of iterations     4
Min cost was 0.085726
Number of FunctionCalls   338
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 52.547000 sec
Parameters at optimum (transmm)  0.11153  0.02112 -0.15345
Parameters at optimum (rotdeg)  0.00111  0.02803 -0.23249 
Final costs ----------------
Number of surface hits 225069
WM  Intensity   385.9920 +/-  62.0188
Ctx Intensity   541.7841 +/- 100.8542
Pct Contrast     32.7754 +/-  18.8315
Cost   0.0857
RelCost   0.0942
Reg at min cost was 
-0.99965  -0.02630  -0.00376  -0.25774;
 0.00453  -0.30835   0.95126  -1.77335;
 0.02618  -0.95091  -0.30836  -5.63375;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.99967  -0.02458  -0.00747  -0.35931;
 0.00048  -0.30847   0.95123  -1.79607;
 0.02569  -0.95091  -0.30838  -5.48044;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
-0.00002   0.00172  -0.00371  -0.10157;
-0.00406  -0.00012  -0.00003  -0.02271;
-0.00049  -0.00001  -0.00002   0.15331;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.267408
Computing change in rh position
Surface-RMS-Diff-mm 0.269647 0.056829 0.400830
mri_segreg done
MinCost: 0.085726 385.991953 541.784080 32.775386 
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.99965  -0.02630  -0.00376  -0.25774;
 0.00453  -0.30835   0.95126  -1.77335;
 0.02618  -0.95091  -0.30836  -5.63375;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_062/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.99965  -0.02630  -0.00376  -0.25774;
 0.00453  -0.30835   0.95126  -1.77335;
 0.02618  -0.95091  -0.30836  -5.63375;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = Patient_062
RegMat ---------------------------
-0.99965  -0.02630  -0.00376  -0.25774;
 0.00453  -0.30835   0.95126  -1.77335;
 0.02618  -0.95091  -0.30836  -5.63375;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Sat Mar 18 07:00:38 AEST 2017 
Ended   at Sat Mar 18 07:04:04 AEST 2017
BBR-Run-Time-Sec 206
 
bbregister Done
To check results, run:
tkregisterfv --mov biasmeanb0bet.nii.gz --reg register.dat --surfs 
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-269CBT/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/biascorr.mif /tmp/dwi2response-tmp-269CBT/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-269CBT/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-269CBT/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,2999 with 13,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 2999 dwi_b2999.mif
[03;34mCommand:[0m mrmath dwi_b2999.mif mean mean_b2999.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b2999.mif -finite mean_b2999.mif 0 -if 0 -le err_b2999.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b2999.mif -divide -log sdm_b2999.mif
[03;34mCommand:[0m mrcalc sdm_b2999.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b2999.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.36438 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.57846 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 2.06258 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 2.00665 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 2.00665 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 2.00665 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.87456 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.87456 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 467 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 467 -iter_voxels 4670 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-269CBT/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.98547 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 591 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 591 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 2106 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 306032 --> 246774 --> 246751[0m
dwi2response: [03;32mWM: 99186 --> 93452 --> 467 (SF)[0m
dwi2response: [03;32mGM: 97481 --> 59094 --> 1182[0m
dwi2response: [03;32mCSF: 50084 --> 21060 --> 2106[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b2999.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb2999.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_062/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-269CBT/[0m
