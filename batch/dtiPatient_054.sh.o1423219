dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/dwipreproc_cust-tmp-GLWM78/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/dwipreproc_cust-tmp-GLWM78/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/dwipreproc_cust-tmp-GLWM78/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/dwipreproc_cust-tmp-GLWM78/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/dwipreproc_cust-tmp-GLWM78/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 102[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
  -0.999992 -0.00335079  0.00234612        3000
  0.0260661   -0.744304   -0.667332        3000
-0.00407599    0.517427    0.855718        3000
   0.273356    0.827636   -0.490199        3000
  -0.651187    0.404438   -0.642172        3000
   0.507106    0.261436    0.821276        3000
   0.959323    0.280568   0.0313327        3000
   0.535221    0.380149   -0.754338        3000
  -0.316592    0.128029   -0.939882        3000
          0           0           0           0
   0.505163   -0.590245    -0.62962        3000
    0.60072   0.0894214   -0.794443        3000
   -0.95366   -0.155592   -0.257534        3000
  -0.528329   -0.741999    0.412682        3000
   0.193731   -0.924922    0.327089        3000
  -0.364985    0.925805  -0.0983361        3000
   0.259073    0.930439     0.25916        3000
  0.0236676    0.509915   -0.859899        3000
  -0.614296    0.788487  -0.0304695        3000
          0           0           0           0
    0.87223   0.0375567    0.487652        3000
  -0.744114   -0.229532    0.627383        3000
   0.487497    0.676091    0.552492        3000
   -0.45187   -0.890319  -0.0560838        3000
  -0.661839   -0.431142   -0.613258        3000
  -0.853585    0.236245   -0.464306        3000
  -0.438622   -0.505613   -0.742944        3000
   0.957511   -0.139693   -0.252306        3000
  -0.703107   -0.594432   -0.390245        3000
          0           0           0           0
  -0.387748   -0.179611    0.904097        3000
   0.142904   -0.680588    0.718595        3000
  -0.803267   -0.595342   0.0181509        3000
  -0.288077   -0.136844   -0.947779        3000
   0.963135   -0.127744    0.236756        3000
  -0.151881   -0.695686    0.702106        3000
 -0.0172969   -0.982868   -0.183496        3000
  -0.377471   -0.897053    0.229808        3000
   0.668146    0.728521    0.151123        3000
          0           0           0           0
  -0.291051   -0.465104    0.836043        3000
  -0.721183   -0.163364   -0.673207        3000
   0.717193   -0.658164     0.22903        3000
   0.428207   -0.580532    0.692547        3000
   0.958897   -0.282575  -0.0258396        3000
   0.493165   -0.295734    0.818125        3000
  -0.894656    0.397475   -0.203973        3000
    0.20391    0.978658  -0.0254881        3000
  -0.230389    0.965656    0.120122        3000
          0           0           0           0
   0.740119    0.599119   -0.305419        3000
   0.844323    0.335429   -0.417859        3000
   0.106014   -0.283646    0.953051        3000
   0.239291    0.398874    0.885234        3000
   0.614268    0.777755   -0.133312        3000
   -0.26639     0.45623   -0.849053        3000
  -0.658746   -0.512425    0.550885        3000
   0.257223    -0.89494   -0.364579        3000
    -0.2493   -0.820082   -0.515088        3000
          0           0           0           0
  -0.572856    0.658537   -0.488021        3000
 -0.0227889   -0.248133   -0.968458        3000
   -0.22488     0.32067    0.920109        3000
   0.836698     0.32274    0.442466        3000
   0.860543    0.465104    0.207711        3000
  -0.487451   -0.809786   -0.326555        3000
   0.107024    0.947264   -0.302055        3000
   -0.54187  0.00466392   -0.840449        3000
   0.250765   -0.576162   -0.777917        3000
          0           0           0           0
   0.229191  -0.0498718   -0.972103        3000
   0.215483    0.652318    0.726669        3000
  -0.961669   -0.144376    0.233128        3000
  -0.311449    0.788296    -0.53065        3000
   0.870581   -0.429266   -0.240455        3000
  -0.844795    0.263887    0.465494        3000
  -0.894939   -0.410704    0.174375        3000
   0.703623   -0.677998   -0.212681        3000
   0.666568   -0.350597   -0.657851        3000
          0           0           0           0
  -0.517227    0.748974    0.414143        3000
   0.719755   -0.128649    0.682204        3000
  0.0413642  -0.0154846    0.999024        3000
  -0.827454    0.561487  0.00722983        3000
  -0.452895    0.385426    0.803949        3000
   0.879502   0.0293046   -0.474991        3000
   0.148969    0.245859    -0.95779        3000
   0.767979   -0.483104    0.420499        3000
   0.479226   -0.134085   -0.867389        3000
          0           0           0           0
  -0.717572    0.532164    0.449325        3000
   0.482399     -0.8221    0.302396        3000
   -0.28211    0.761293    0.583821        3000
 -0.0179121    0.846872   -0.531495        3000
   0.065055   -0.993225   0.0962905        3000
   0.421944    0.633025   -0.649031        3000
  -0.733024   0.0978202    0.673132        3000
 0.00089307    0.896237    0.443574        3000
   0.475893   -0.860809   -0.180372        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/dwipreproc_cust-tmp-GLWM78/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-O1NOG1/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-O1NOG1/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-O1NOG1/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-O1NOG1/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-O1NOG1/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
19924
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-ZO52N6/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-ZO52N6/parc.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/brainFS.nii /tmp/labelsgmfix-tmp-ZO52N6/T1.nii -stride -1,+2,+3
labelsgmfix: [03;32mChanging to temporary directory (/tmp/labelsgmfix-tmp-ZO52N6/)[0m
[03;34mCommand:[0m run_first_all -s R_Thal,L_Puta,R_Caud,R_Hipp,L_Amyg,R_Pall,R_Amyg,L_Caud,L_Pall,L_Thal,L_Hipp,R_Accu,L_Accu,R_Puta -i T1.nii -b -o first
[03;34mCommand:[0m mrcalc parc.mif 0 -min sgm.mif
[03;34mCommand:[0m meshconvert first-R_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Thal_mask.mif 6 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Puta_mask.mif 3 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Caud_mask.mif 7 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Hipp_mask.mif 13 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Amyg_mask.mif 12 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Pall_mask.mif 9 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Amyg_mask.mif 14 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Caud_mask.mif 2 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Pall_mask.mif 4 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Thal_mask.mif 1 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Hipp_mask.mif 11 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Accu_mask.mif 10 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Accu_mask.mif 5 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Puta_mask.mif 8 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m mrmath R_Thal_mask.mif L_Puta_mask.mif R_Caud_mask.mif R_Hipp_mask.mif L_Amyg_mask.mif R_Pall_mask.mif R_Amyg_mask.mif L_Caud_mask.mif L_Pall_mask.mif L_Thal_mask.mif L_Hipp_mask.mif R_Accu_mask.mif L_Accu_mask.mif R_Puta_mask.mif sum - | mrcalc - 1 -gt sgm_overlap_mask.mif
[03;34mCommand:[0m mrcalc sgm_overlap_mask.mif 0 sgm.mif -if sgm_masked.mif
[03;34mCommand:[0m labelconvert sgm_masked.mif /software/mrtrix3/mrtrix3-AP/scripts/data/FreeSurferSGM.txt /software/mrtrix3/mrtrix3-AP/src/connectome/tables/fs_a2009s.txt sgm_new_labels.mif
[03;34mCommand:[0m mrcalc parc.mif 83 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 78 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 84 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 87 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 81 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 86 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 88 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 77 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 79 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 76 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 80 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 89 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 82 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 85 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc sgm_new_labels.mif 0.5 -gt sgm_new_labels.mif parc.mif -if result.mif -datatype uint32
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/parc_fixsubcort.nii
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc)[0m
labelsgmfix: [03;32mDeleting temporary directory /tmp/labelsgmfix-tmp-ZO52N6/[0m
tmp ./tmp.bbregister.4864
Log file is register.dat.log
Sat Mar 18 06:55:39 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc
/software/freesurfer/freesurfer-6.0.0/bin/bbregister --s Patient_054 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.75 2016/05/10 20:02:28 greve Exp $
Linux hpcnode038.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-6.0.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.4864/template.nii
mri_convert.bin biasmeanb0bet.nii.gz ./tmp.bbregister.4864/template.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.991217, -0.0253312, -0.129798)
j_ras = (0.0467447, 0.985237, 0.164693)
k_ras = (0.12371, -0.169314, 0.977767)
writing to ./tmp.bbregister.4864/template.nii...
fslregister --s Patient_054 --mov ./tmp.bbregister.4864/template.nii --reg ./tmp.bbregister.4864/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.4864/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov

Log file is ./tmp.bbregister.4864/reg.init.dat.fslregister.log

Sat Mar 18 06:55:39 AEST 2017
--s Patient_054 --mov ./tmp.bbregister.4864/template.nii --reg ./tmp.bbregister.4864/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.4864/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov
$Id: fslregister,v 1.40 2016/02/12 21:43:15 zkaufman Exp $
hpcnode038.adqimr.ad.lan
Linux hpcnode038.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc
mri_convert /working/lab_michaebr/alistaiP/Park/FS/Patient_054/mri/brainmask.mgz ./tmp.bbregister.4864/fslregister/refvol.fslregister.nii
mri_convert.bin /working/lab_michaebr/alistaiP/Park/FS/Patient_054/mri/brainmask.mgz ./tmp.bbregister.4864/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/Park/FS/Patient_054/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, 0, 0)
j_ras = (-7.45058e-09, -1.49012e-08, -1)
k_ras = (0, 1, 0)
writing to ./tmp.bbregister.4864/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc
mri_convert ./tmp.bbregister.4864/template.nii ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii --frame 0
mri_convert.bin ./tmp.bbregister.4864/template.nii ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from ./tmp.bbregister.4864/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.991217, -0.0253312, -0.129798)
j_ras = (0.0467447, 0.985237, 0.164693)
k_ras = (0.12371, -0.169314, 0.977767)
keeping frame 0
writing to ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.4864/template.nii
reg file       ./tmp.bbregister.4864/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.4864/template.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.99122   0.02533   0.12980   1.71872;
 0.12371  -0.16931   0.97777   0.00000;
-0.04674  -0.98524  -0.16469   0.00000;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
-0.99122   0.02533   0.12980   1.71872;
 0.12371  -0.16931   0.97777   0.00000;
-0.04674  -0.98524  -0.16469   0.00000;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.00000   0.00000  -0.00000   1.71871;
 0.00000   1.00000   0.00000   0.00002;
 0.00000  -0.00000   1.00000   0.00000;
 0.00000   0.00000   0.00000   1.00000;
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc
tkregister2_cmdl --mov ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.4864/fslregister/reg0.4905.dat --regheader --fslregout ./tmp.bbregister.4864/reg.init.dat.fsl.mat0 --s Patient_054 --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.4864/fslregister/reg0.4905.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_054/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.99122  -0.02533  -0.12980   2.54916;
 0.12371  -0.16931   0.97777  -4.14355;
-0.04674  -0.98524  -0.16469  -6.25151;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99122  -0.02533  -0.12980   2.54916;
 0.12371  -0.16931   0.97777  -4.14355;
-0.04674  -0.98524  -0.16469  -6.25151;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_054
RegMat ---------------------------
 0.99122  -0.02533  -0.12980   2.54916;
 0.12371  -0.16931   0.97777  -4.14355;
-0.04674  -0.98524  -0.16469  -6.25151;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Sat Mar 18 06:55:42 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc
flirt.fsl -ref ./tmp.bbregister.4864/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.4864/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/fsl.5.0.2.xyztrans.sch -init ./tmp.bbregister.4864/reg.init.dat.fsl.mat0
Sat Mar 18 06:56:17 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc
flirt.fsl -ref ./tmp.bbregister.4864/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.4864/reg.init.dat.fsl.mat -init ./tmp.bbregister.4864/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_054 --mov ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.4864/reg.init.dat --fslreg ./tmp.bbregister.4864/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.98768  -0.05549  -0.14634   38.23270;
-0.15256  -0.13251  -0.97937   232.88400;
 0.03496   0.98963  -0.13934   19.98720;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.4864/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_054/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.4864/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.98768  -0.03496  -0.15255   1.56264;
 0.14634  -0.13934   0.97937  -1.96707;
-0.05549  -0.98963  -0.13251  -5.80919;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.98768  -0.03496  -0.15255   1.56264;
 0.14634  -0.13934   0.97937  -1.96707;
-0.05549  -0.98963  -0.13251  -5.80919;
 0.00000   0.00000   0.00000   1.00000;
Determinant 0.999999
subject = Patient_054
RegMat ---------------------------
 0.98768  -0.03496  -0.15255   1.56264;
 0.14634  -0.13934   0.97937  -1.96707;
-0.05549  -0.98963  -0.13251  -5.80919;
 0.00000   0.00000   0.00000   1.00000;
mri_matrix_multiply -im ./tmp.bbregister.4864/fslregister/swapreg.dat -im ./tmp.bbregister.4864/reg.init.dat -om ./tmp.bbregister.4864/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Sat Mar 18 06:55:39 AEST 2017 
Ended   at Sat Mar 18 06:57:47 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.4864/template.nii --reg ./tmp.bbregister.4864/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.4864/template.nii --init-reg ./tmp.bbregister.4864/reg.init.dat --out-reg ./tmp.bbregister.4864/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc
mri_segreg --mov ./tmp.bbregister.4864/template.nii --init-reg ./tmp.bbregister.4864/reg.init.dat --out-reg ./tmp.bbregister.4864/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode038.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.4864/template.nii
regfile ./tmp.bbregister.4864/reg.init.dat
subject Patient_054
dof 6
outregfile ./tmp.bbregister.4864/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490772462
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.98768   0.03496   0.15256   0.15608;
 0.14634  -0.13934   0.97937  -1.96705;
-0.05549  -0.98963  -0.13251  -5.80919;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   0.994449
 1  -25.0 -25.0  25.0   0.983510
 2  -25.0  25.0 -25.0   0.999773
 3  -25.0  25.0  25.0   1.065852
 4   25.0 -25.0 -25.0   1.021489
 5   25.0 -25.0  25.0   0.986946
 6   25.0  25.0 -25.0   0.991161
 7   25.0  25.0  25.0   1.027296
REL:  8  0.237513    8.070476  1.008809 rel = 0.235439 
Initial costs ----------------
Number of surface hits 3059
WM  Intensity   372.7034 +/-  85.1851
Ctx Intensity   554.8605 +/- 180.5581
Pct Contrast     35.4697 +/-  31.7482
Cost   0.2375
RelCost   0.2354

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      0.9586   0.9586  0.0
     1  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000   0.0000      0.9533   0.9533  0.0
     2  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000   4.0000      0.9351   0.9351  0.0
     6  -4.0000  -4.0000  -4.0000  -4.0000   4.0000  -4.0000      0.9269   0.9269  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.8795   0.8795  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.8200   0.8200  0.0
    19  -4.0000  -4.0000  -4.0000   4.0000  -4.0000   0.0000      0.8135   0.8135  0.0
    33  -4.0000  -4.0000   0.0000  -4.0000   4.0000  -4.0000      0.7917   0.7917  0.0
   120  -4.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.7325   0.7325  0.0
   274   0.0000  -4.0000   0.0000  -4.0000   0.0000   0.0000      0.6428   0.6428  0.0
   363   0.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.6398   0.6398  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.2375   0.2375  0.0
Brute Force --------------------------
Min cost was 0.237513
Number of iterations   729
Search time 3.724000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.237513
   9 -0.033  0.000  0.000  0.000  0.000  0.000   0.2367792454
  11 -0.040  0.000  0.000  0.000  0.000  0.000   0.2366792175
  14 -0.041  0.000  0.000  0.000  0.000  0.000   0.2366790892
  17 -0.041 -1.618  0.000  0.000  0.000  0.000   0.1738078466
  18 -0.041 -1.117  0.000  0.000  0.000  0.000   0.1355664097
  25 -0.041 -1.149  0.000  0.000  0.000  0.000   0.1349230427
  27 -0.041 -1.150  0.000  0.000  0.000  0.000   0.1349223671
  35 -0.041 -1.150 -0.197  0.000  0.000  0.000   0.1331587684
  36 -0.041 -1.150 -0.157  0.000  0.000  0.000   0.1326475118
  37 -0.041 -1.150 -0.131  0.000  0.000  0.000   0.1325266274
  46 -0.041 -1.150 -0.131 -0.618  0.000  0.000   0.1225752745
  48 -0.041 -1.150 -0.131 -0.378  0.000  0.000   0.1185240097
  49 -0.041 -1.150 -0.131 -0.401  0.000  0.000   0.1179095484
  50 -0.041 -1.150 -0.131 -0.456  0.000  0.000   0.1167912446
  54 -0.041 -1.150 -0.131 -0.459  0.000  0.000   0.1167858125
  56 -0.041 -1.150 -0.131 -0.461  0.000  0.000   0.1167855540
  58 -0.041 -1.150 -0.131 -0.460  0.000  0.000   0.1167851599
  65 -0.041 -1.150 -0.131 -0.460 -0.049  0.000   0.1159149456
  68 -0.041 -1.150 -0.131 -0.460 -0.059  0.000   0.1159091945
  69 -0.041 -1.150 -0.131 -0.460 -0.058  0.000   0.1159085301
  70 -0.041 -1.150 -0.131 -0.460 -0.056  0.000   0.1159067664
  71 -0.041 -1.150 -0.131 -0.460 -0.054  0.000   0.1159059968
  72 -0.041 -1.150 -0.131 -0.460 -0.055  0.000   0.1159057330
  78 -0.041 -1.150 -0.131 -0.460 -0.055  0.382   0.1137316625
  79 -0.041 -1.150 -0.131 -0.460 -0.055  0.223   0.1126044113
  81 -0.041 -1.150 -0.131 -0.460 -0.055  0.138   0.1124097847
  82 -0.041 -1.150 -0.131 -0.460 -0.055  0.172   0.1117467190
  84 -0.041 -1.150 -0.131 -0.460 -0.055  0.169   0.1117388258
  powell nthiter 1: fret = 0.111739
  96 -0.060 -1.150 -0.131 -0.460 -0.055  0.169   0.1114853140
  97 -0.059 -1.150 -0.131 -0.460 -0.055  0.169   0.1114741318
  98 -0.056 -1.150 -0.131 -0.460 -0.055  0.169   0.1114578091
 108 -0.056 -1.232 -0.131 -0.460 -0.055  0.169   0.1101969002
 109 -0.056 -1.255 -0.131 -0.460 -0.055  0.169   0.1100637830
 111 -0.056 -1.265 -0.131 -0.460 -0.055  0.169   0.1100444980
 113 -0.056 -1.264 -0.131 -0.460 -0.055  0.169   0.1100444802
 122 -0.056 -1.264 -0.046 -0.460 -0.055  0.169   0.1095616082
 123 -0.056 -1.264 -0.059 -0.460 -0.055  0.169   0.1095446407
 124 -0.056 -1.264 -0.060 -0.460 -0.055  0.169   0.1095368373
 125 -0.056 -1.264 -0.087 -0.460 -0.055  0.169   0.1092334774
 127 -0.056 -1.264 -0.090 -0.460 -0.055  0.169   0.1092171614
 128 -0.056 -1.264 -0.093 -0.460 -0.055  0.169   0.1092125966
 138 -0.056 -1.264 -0.093 -0.459 -0.055  0.169   0.1092061076
 140 -0.056 -1.264 -0.093 -0.454 -0.055  0.169   0.1091867539
 141 -0.056 -1.264 -0.093 -0.452 -0.055  0.169   0.1091861997
 149 -0.056 -1.264 -0.093 -0.452 -0.085  0.169   0.1083564768
 151 -0.056 -1.264 -0.093 -0.452 -0.117  0.169   0.1083280413
 152 -0.056 -1.264 -0.093 -0.452 -0.102  0.169   0.1082609352
 154 -0.056 -1.264 -0.093 -0.452 -0.096  0.169   0.1082509658
 155 -0.056 -1.264 -0.093 -0.452 -0.097  0.169   0.1082497863
 166 -0.056 -1.264 -0.093 -0.452 -0.097  0.191   0.1081232101
 167 -0.056 -1.264 -0.093 -0.452 -0.097  0.188   0.1081112758
 168 -0.056 -1.264 -0.093 -0.452 -0.097  0.186   0.1081055897
 170 -0.056 -1.264 -0.093 -0.452 -0.097  0.184   0.1081036766
  powell nthiter 2: fret = 0.108104
 179 -0.080 -1.264 -0.093 -0.452 -0.097  0.184   0.1079391444
 181 -0.071 -1.264 -0.093 -0.452 -0.097  0.184   0.1079387228
 182 -0.076 -1.264 -0.093 -0.452 -0.097  0.184   0.1079233935
 191 -0.076 -1.263 -0.093 -0.452 -0.097  0.184   0.1079160091
 192 -0.076 -1.241 -0.093 -0.452 -0.097  0.184   0.1078258332
 197 -0.076 -1.243 -0.093 -0.452 -0.097  0.184   0.1078256544
 208 -0.076 -1.243 -0.105 -0.452 -0.097  0.184   0.1077340759
 209 -0.076 -1.243 -0.107 -0.452 -0.097  0.184   0.1077311678
 210 -0.076 -1.243 -0.110 -0.452 -0.097  0.184   0.1077292944
 212 -0.076 -1.243 -0.109 -0.452 -0.097  0.184   0.1077289977
 220 -0.076 -1.243 -0.109 -0.389 -0.097  0.184   0.1076743887
 225 -0.076 -1.243 -0.109 -0.399 -0.097  0.184   0.1076344849
 227 -0.076 -1.243 -0.109 -0.398 -0.097  0.184   0.1076311218
 229 -0.076 -1.243 -0.109 -0.396 -0.097  0.184   0.1076301667
 239 -0.076 -1.243 -0.109 -0.396 -0.116  0.184   0.1074840081
 240 -0.076 -1.243 -0.109 -0.396 -0.112  0.184   0.1074668705
 254 -0.076 -1.243 -0.109 -0.396 -0.112  0.168   0.1072691796
 255 -0.076 -1.243 -0.109 -0.396 -0.112  0.159   0.1072653049
 256 -0.076 -1.243 -0.109 -0.396 -0.112  0.163   0.1072557932
  powell nthiter 3: fret = 0.107256
 269 -0.069 -1.243 -0.109 -0.396 -0.112  0.163   0.1072123336
 270 -0.070 -1.243 -0.109 -0.396 -0.112  0.163   0.1072120751
 291 -0.070 -1.243 -0.114 -0.396 -0.112  0.163   0.1072082792
 292 -0.070 -1.243 -0.111 -0.396 -0.112  0.163   0.1072046592
 301 -0.070 -1.243 -0.111 -0.395 -0.112  0.163   0.1072029134
 304 -0.070 -1.243 -0.111 -0.394 -0.112  0.163   0.1072023430
 313 -0.070 -1.243 -0.111 -0.394 -0.113  0.163   0.1072019084
 325 -0.070 -1.243 -0.111 -0.394 -0.113  0.166   0.1071864848
 326 -0.070 -1.243 -0.111 -0.394 -0.113  0.168   0.1071861069
 328 -0.065 -1.243 -0.114 -0.392 -0.114  0.173   0.1071667161
 335 -0.065 -1.243 -0.114 -0.393 -0.114  0.173   0.1071662318
 342 -0.065 -1.243 -0.114 -0.393 -0.114  0.173   0.1071662247
 343 -0.065 -1.243 -0.114 -0.393 -0.114  0.173   0.1071661585
  powell nthiter 4: fret = 0.107166
 356 -0.065 -1.243 -0.114 -0.393 -0.114  0.172   0.1071652096
 365 -0.065 -1.242 -0.114 -0.393 -0.114  0.172   0.1071639699
 366 -0.065 -1.241 -0.114 -0.393 -0.114  0.172   0.1071636085
 385 -0.065 -1.241 -0.114 -0.392 -0.114  0.172   0.1071615870
 388 -0.065 -1.241 -0.114 -0.391 -0.114  0.172   0.1071611049
 397 -0.065 -1.241 -0.114 -0.391 -0.113  0.172   0.1071604609
 408 -0.065 -1.241 -0.114 -0.391 -0.113  0.172   0.1071603972
 410 -0.065 -1.241 -0.114 -0.391 -0.113  0.172   0.1071603163
 414 -0.065 -1.241 -0.114 -0.391 -0.113  0.172   0.1071602764
Powell done niters = 4
Computing relative cost
 0  -25.0 -25.0 -25.0   0.998959
 1  -25.0 -25.0  25.0   1.014059
 2  -25.0  25.0 -25.0   1.018351
 3  -25.0  25.0  25.0   1.051887
 4   25.0 -25.0 -25.0   1.019007
 5   25.0 -25.0  25.0   0.977730
 6   25.0  25.0 -25.0   1.011026
 7   25.0  25.0  25.0   0.995521
REL:  8  0.107160    8.086539  1.010817 rel = 0.106013 
Number of iterations     4
Min cost was 0.107160
Number of FunctionCalls   415
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 2.064000 sec
Parameters at optimum (transmm) -0.06527 -1.24059 -0.11413
Parameters at optimum (rotdeg) -0.39059 -0.11260  0.17187 
Final costs ----------------
Number of surface hits 3059
WM  Intensity   361.6908 +/-  68.1507
Ctx Intensity   526.2338 +/- 113.5302
Pct Contrast     35.6930 +/-  23.1608
Cost   0.1072
RelCost   0.2354
Reg at min cost was 
-0.98800   0.03734   0.14989   0.10822;
 0.14300  -0.14598   0.97890  -3.24669;
-0.05843  -0.98858  -0.13888  -5.90945;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to ./tmp.bbregister.4864/bbr.pass1.dat, type = 14 
Original Reg 
-0.98768   0.03496   0.15256   0.15608;
 0.14634  -0.13934   0.97937  -1.96705;
-0.05549  -0.98963  -0.13251  -5.80919;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00032  -0.00238   0.00266   0.04786;
 0.00334   0.00663   0.00047   1.27963;
 0.00294  -0.00104   0.00637   0.10026;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 1.103553
Computing change in rh position
Surface-RMS-Diff-mm 1.190306 0.287659 1.826438
mri_segreg done
mri_segreg --mov ./tmp.bbregister.4864/template.nii --init-reg ./tmp.bbregister.4864/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.4864/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc
mri_segreg --mov ./tmp.bbregister.4864/template.nii --init-reg ./tmp.bbregister.4864/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.4864/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode038.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.4864/template.nii
regfile ./tmp.bbregister.4864/bbr.pass1.dat
subject Patient_054
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490571524
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.98800   0.03734   0.14989   0.10822;
 0.14300  -0.14598   0.97890  -3.24669;
-0.05843  -0.98858  -0.13888  -5.90945;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   0.997311
 1  -25.0 -25.0  25.0   1.019289
 2  -25.0  25.0 -25.0   1.004045
 3  -25.0  25.0  25.0   1.035244
 4   25.0 -25.0 -25.0   1.014879
 5   25.0 -25.0  25.0   0.996992
 6   25.0  25.0 -25.0   0.998292
 7   25.0  25.0  25.0   1.000905
REL:  8  0.106954    8.066957  1.008370 rel = 0.106066 
Initial costs ----------------
Number of surface hits 306680
WM  Intensity   361.9451 +/-  67.1637
Ctx Intensity   525.8229 +/- 110.9638
Pct Contrast     35.6121 +/-  22.8024
Cost   0.1070
RelCost   0.1061

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.1203   0.1203  0.0
     1  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.0000      0.1164   0.1164  0.0
     4  -0.1000  -0.1000  -0.1000  -0.1000   0.0000   0.0000      0.1164   0.1164  0.0
     5  -0.1000  -0.1000  -0.1000  -0.1000   0.0000   0.1000      0.1138   0.1138  0.0
    32  -0.1000  -0.1000   0.0000  -0.1000   0.0000   0.1000      0.1123   0.1123  0.0
    44  -0.1000  -0.1000   0.0000   0.0000   0.1000   0.1000      0.1105   0.1105  0.0
    62  -0.1000  -0.1000   0.1000  -0.1000   0.1000   0.1000      0.1092   0.1092  0.0
    71  -0.1000  -0.1000   0.1000   0.0000   0.1000   0.1000      0.1091   0.1091  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.1072   0.1072  0.0
   698   0.1000   0.1000   0.0000   0.1000   0.0000   0.1000      0.1063   0.1063  0.1
Brute Force --------------------------
Min cost was 0.106346
Number of iterations   729
Search time 3.620000 sec
Parameters at best (transmm, rotdeg)
  0.100   0.100   0.000  0.100  0.000  0.100 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0.1
1 0.1
2 0
3 0.1
4 0
5 0.1
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.107800
   7  0.033  0.100  0.000  0.100  0.000  0.100   0.1074704825
   8  0.047  0.100  0.000  0.100  0.000  0.100   0.1074670747
   9  0.041  0.100  0.000  0.100  0.000  0.100   0.1074669076
  20  0.041  0.064  0.000  0.100  0.000  0.100   0.1074533142
  21  0.041  0.080  0.000  0.100  0.000  0.100   0.1074095010
  30  0.041  0.080 -0.014  0.100  0.000  0.100   0.1072764807
  31  0.041  0.080 -0.068  0.100  0.000  0.100   0.1072594446
  33  0.041  0.080 -0.042  0.100  0.000  0.100   0.1071733719
  35  0.041  0.080 -0.041  0.100  0.000  0.100   0.1071733182
  44  0.041  0.080 -0.041  0.035  0.000  0.100   0.1063485691
  45  0.041  0.080 -0.041  0.013  0.000  0.100   0.1063334275
  46  0.041  0.080 -0.041  0.021  0.000  0.100   0.1063274575
  55  0.041  0.080 -0.041  0.021  0.049  0.100   0.1060204206
  65  0.041  0.080 -0.041  0.021  0.049  0.102   0.1060198466
  68  0.041  0.080 -0.041  0.021  0.049  0.103   0.1060197581
  powell nthiter 1: fret = 0.106020
  77  0.013  0.080 -0.041  0.021  0.049  0.103   0.1060117748
  78  0.026  0.080 -0.041  0.021  0.049  0.103   0.1059779706
  87  0.026  0.026 -0.041  0.021  0.049  0.103   0.1059743836
  88  0.026  0.053 -0.041  0.021  0.049  0.103   0.1058770613
  89  0.026  0.054 -0.041  0.021  0.049  0.103   0.1058766869
  97  0.026  0.054  0.016  0.021  0.049  0.103   0.1057588175
  98  0.026  0.054 -0.001  0.021  0.049  0.103   0.1057236565
 107  0.026  0.054 -0.001  0.010  0.049  0.103   0.1056683759
 108  0.026  0.054 -0.001 -0.005  0.049  0.103   0.1056453430
 111  0.026  0.054 -0.001 -0.019  0.049  0.103   0.1056411342
 112  0.026  0.054 -0.001 -0.015  0.049  0.103   0.1056361065
 121  0.026  0.054 -0.001 -0.015  0.057  0.103   0.1056271796
 123  0.026  0.054 -0.001 -0.015  0.055  0.103   0.1056267101
 133  0.026  0.054 -0.001 -0.015  0.055  0.104   0.1056266606
 135  0.011  0.027  0.038 -0.052  0.062  0.105   0.1055343334
 141  0.017  0.037  0.023 -0.038  0.060  0.104   0.1055338262
 142  0.014  0.033  0.031 -0.045  0.061  0.104   0.1055280178
 143  0.014  0.032  0.031 -0.045  0.061  0.104   0.1055279513
  powell nthiter 2: fret = 0.105528
 156  0.008  0.032  0.031 -0.045  0.061  0.104   0.1055273730
 157  0.011  0.032  0.031 -0.045  0.061  0.104   0.1055255339
 167  0.011  0.028  0.031 -0.045  0.061  0.104   0.1055242009
 168  0.011  0.029  0.031 -0.045  0.061  0.104   0.1055241341
 176  0.011  0.029  0.031 -0.045  0.061  0.088   0.1055210524
 177  0.011  0.029  0.031 -0.045  0.061  0.095   0.1055133122
 178  0.011  0.029  0.031 -0.045  0.061  0.096   0.1055132072
 187  0.011  0.029  0.031 -0.036  0.061  0.096   0.1055099905
 188  0.011  0.029  0.031 -0.038  0.061  0.096   0.1055094357
 197  0.011  0.029  0.031 -0.038  0.065  0.096   0.1055047441
 200  0.011  0.029  0.031 -0.038  0.066  0.096   0.1055047328
 208  0.010  0.029  0.032 -0.039  0.066  0.096   0.1055046555
 209  0.010  0.029  0.032 -0.039  0.066  0.096   0.1055046204
 211  0.010  0.029  0.031 -0.039  0.066  0.096   0.1055045905
  powell nthiter 3: fret = 0.105505
 222  0.005  0.029  0.031 -0.039  0.066  0.096   0.1054952710
 224  0.003  0.029  0.031 -0.039  0.066  0.096   0.1054950187
 233  0.003  0.031  0.031 -0.039  0.066  0.096   0.1054934646
 234  0.003  0.033  0.031 -0.039  0.066  0.096   0.1054930222
 244  0.003  0.033  0.031 -0.039  0.066  0.091   0.1054898063
 256  0.003  0.033  0.031 -0.038  0.066  0.091   0.1054897851
 263  0.003  0.033  0.031 -0.038  0.068  0.091   0.1054870329
 264  0.003  0.033  0.031 -0.038  0.073  0.091   0.1054865781
 266  0.003  0.033  0.031 -0.038  0.071  0.091   0.1054852534
 275  0.002  0.031  0.036 -0.042  0.072  0.092   0.1054843289
 276  0.002  0.031  0.035 -0.041  0.071  0.091   0.1054842125
 277  0.002  0.031  0.035 -0.041  0.071  0.091   0.1054840921
 283 -0.006  0.034  0.038 -0.043  0.076  0.087   0.1054690026
 286 -0.020  0.037  0.043 -0.046  0.085  0.080   0.1054652571
 287 -0.015  0.036  0.041 -0.045  0.082  0.082   0.1054602738
 291 -0.014  0.036  0.041 -0.045  0.081  0.083   0.1054602213
 292 -0.014  0.036  0.041 -0.045  0.081  0.083   0.1054601338
 293 -0.014  0.036  0.041 -0.045  0.082  0.083   0.1054600890
 299 -0.015  0.036  0.041 -0.045  0.082  0.083   0.1054600787
 300 -0.015  0.036  0.041 -0.045  0.082  0.083   0.1054600486
  powell nthiter 4: fret = 0.105460
 309 -0.015  0.035  0.043 -0.046  0.082  0.083   0.1054599415
 311 -0.015  0.035  0.042 -0.046  0.082  0.083   0.1054599195
 316 -0.015  0.035  0.042 -0.046  0.082  0.083   0.1054599084
 317 -0.015  0.035  0.042 -0.046  0.082  0.083   0.1054598766
 325 -0.015  0.031  0.042 -0.046  0.082  0.083   0.1054566976
 336 -0.015  0.031  0.042 -0.046  0.082  0.082   0.1054565731
 345 -0.015  0.031  0.042 -0.047  0.082  0.082   0.1054565321
 355 -0.015  0.031  0.042 -0.047  0.083  0.082   0.1054563560
 365 -0.015  0.031  0.042 -0.047  0.083  0.082   0.1054562538
 371 -0.015  0.031  0.042 -0.047  0.083  0.082   0.1054562184
  powell nthiter 5: fret = 0.105456
 379 -0.014  0.033  0.040 -0.045  0.082  0.082   0.1054558942
 380 -0.014  0.033  0.040 -0.046  0.082  0.082   0.1054558693
 381 -0.014  0.033  0.040 -0.046  0.082  0.082   0.1054558438
 391 -0.014  0.032  0.040 -0.046  0.082  0.082   0.1054554179
 401 -0.014  0.032  0.040 -0.046  0.082  0.083   0.1054553144
 428 -0.015  0.032  0.041 -0.046  0.083  0.082   0.1054551486
 435 -0.015  0.032  0.041 -0.046  0.083  0.082   0.1054551386
 436 -0.016  0.032  0.039 -0.045  0.083  0.082   0.1054548082
 441 -0.016  0.032  0.039 -0.044  0.084  0.083   0.1054545964
 448 -0.016  0.032  0.039 -0.044  0.084  0.083   0.1054545736
 449 -0.016  0.032  0.039 -0.044  0.084  0.083   0.1054545508
 451 -0.016  0.032  0.039 -0.044  0.084  0.083   0.1054545347
  powell nthiter 6: fret = 0.105455
 486 -0.016  0.032  0.039 -0.044  0.084  0.082   0.1054545046
  powell nthiter 7: fret = 0.105455
Powell done niters = 7
Computing relative cost
 0  -25.0 -25.0 -25.0   0.996023
 1  -25.0 -25.0  25.0   1.019101
 2  -25.0  25.0 -25.0   1.005890
 3  -25.0  25.0  25.0   1.035584
 4   25.0 -25.0 -25.0   1.014105
 5   25.0 -25.0  25.0   0.997715
 6   25.0  25.0 -25.0   0.998083
 7   25.0  25.0  25.0   1.001424
REL:  8  0.105455    8.067925  1.008491 rel = 0.104567 
Number of iterations     7
Min cost was 0.105455
Number of FunctionCalls   593
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 117.175000 sec
Parameters at optimum (transmm) -0.01598  0.03244  0.03871
Parameters at optimum (rotdeg) -0.04387  0.08373  0.08162 
Final costs ----------------
Number of surface hits 306680
WM  Intensity   362.0310 +/-  67.6947
Ctx Intensity   526.3344 +/- 111.0611
Pct Contrast     35.6947 +/-  22.8066
Cost   0.1055
RelCost   0.1061
Reg at min cost was 
-0.98828   0.03610   0.14829   0.08823;
 0.14154  -0.14668   0.97900  -3.21862;
-0.05710  -0.98852  -0.13985  -5.86841;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.98800   0.03734   0.14989   0.10822;
 0.14300  -0.14598   0.97890  -3.24669;
-0.05843  -0.98858  -0.13888  -5.90945;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00029   0.00124   0.00160   0.01998;
 0.00145   0.00071  -0.00011  -0.02806;
-0.00133  -0.00006   0.00097  -0.04104;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.122905
Computing change in rh position
Surface-RMS-Diff-mm 0.117918 0.032465 0.209303
mri_segreg done
MinCost: 0.105455 362.030969 526.334352 35.694700 
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.98828   0.03610   0.14829   0.08823;
 0.14154  -0.14668   0.97900  -3.21862;
-0.05710  -0.98852  -0.13985  -5.86841;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_054/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.98828   0.03610   0.14829   0.08823;
 0.14154  -0.14668   0.97900  -3.21862;
-0.05710  -0.98852  -0.13985  -5.86841;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = Patient_054
RegMat ---------------------------
-0.98828   0.03610   0.14829   0.08823;
 0.14154  -0.14668   0.97900  -3.21862;
-0.05710  -0.98852  -0.13985  -5.86841;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Sat Mar 18 06:55:39 AEST 2017 
Ended   at Sat Mar 18 07:00:28 AEST 2017
BBR-Run-Time-Sec 289
 
bbregister Done
To check results, run:
tkregisterfv --mov biasmeanb0bet.nii.gz --reg register.dat --surfs 
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-E916MK/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/biascorr.mif /tmp/dwi2response-tmp-E916MK/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-E916MK/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-E916MK/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,3000 with 12,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 3000 dwi_b3000.mif
[03;34mCommand:[0m mrmath dwi_b3000.mif mean mean_b3000.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b3000.mif -finite mean_b3000.mif 0 -if 0 -le err_b3000.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b3000.mif -divide -log sdm_b3000.mif
[03;34mCommand:[0m mrcalc sdm_b3000.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b3000.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.38418 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.47799 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.9107 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 1.91169 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 1.91169 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 1.91169 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.8665 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.8665 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 577 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 577 -iter_voxels 5770 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-E916MK/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.88596 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 748 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 748 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 3767 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 384647 --> 314849 --> 314790[0m
dwi2response: [03;32mWM: 121431 --> 115495 --> 577 (SF)[0m
dwi2response: [03;32mGM: 120724 --> 74840 --> 1496[0m
dwi2response: [03;32mCSF: 72635 --> 37668 --> 3767[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b3000.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb3000.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_054/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-E916MK/[0m
