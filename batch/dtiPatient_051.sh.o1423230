dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/dwipreproc_cust-tmp-IOGJ83/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/dwipreproc_cust-tmp-IOGJ83/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/dwipreproc_cust-tmp-IOGJ83/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/dwipreproc_cust-tmp-IOGJ83/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/dwipreproc_cust-tmp-IOGJ83/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 102[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
  -0.999991  0.00301398  0.00301398        3000
  0.0258483   -0.744242    -0.66741        3000
-0.00362068    0.517288    0.855804        3000
   0.272539    0.827838   -0.490313        3000
  -0.651306    0.404593   -0.641954        3000
   0.507317    0.260923    0.821309        3000
   0.959475    0.280127   0.0305959        3000
   0.534631    0.380365   -0.754646        3000
  -0.316807    0.133202    -0.93909        3000
          0           0           0           0
   0.505466   -0.590091   -0.629521        3000
   0.600304   0.0949348   -0.794118        3000
  -0.953898    -0.15521   -0.256882        3000
  -0.527537   -0.742401    0.412972        3000
   0.193935   -0.924804    0.327301        3000
  -0.365128    0.925721  -0.0985968        3000
   0.259312    0.930503    0.258691        3000
  0.0231714    0.510195   -0.859747        3000
  -0.614352    0.788436  -0.0306756        3000
          0           0           0           0
   0.872471   0.0371185    0.487254        3000
  -0.743708   -0.229848    0.627749        3000
   0.487724    0.675991    0.552415        3000
  -0.451364   -0.890955  -0.0496972        3000
  -0.662238   -0.430853   -0.613031        3000
  -0.853463    0.236651   -0.464324        3000
  -0.439127   -0.505476   -0.742739        3000
   0.957664   -0.139473   -0.251846        3000
  -0.703523   -0.594169   -0.389896        3000
          0           0           0           0
  -0.387382   -0.179806    0.904215        3000
    0.14319   -0.680707    0.718425        3000
  -0.802774   -0.595777   0.0245665        3000
  -0.288478   -0.136306   -0.947735        3000
   0.963035   -0.128311    0.236855        3000
  -0.151237   -0.695758    0.702174        3000
 -0.0169294   -0.982956   -0.183059        3000
  -0.377102    -0.89715    0.230036        3000
   0.668524     0.72825    0.150758        3000
          0           0           0           0
  -0.290419   -0.465415     0.83609        3000
  -0.721758   -0.162629   -0.672768        3000
   0.717015   -0.658302    0.229191        3000
   0.428345   -0.580628    0.692381        3000
   0.958772   -0.283031  -0.0254937        3000
   0.493167   -0.295951    0.818046        3000
  -0.894411    0.397991   -0.204038        3000
   0.203347    0.978767  -0.0257929        3000
  -0.231235    0.966187    0.114073        3000
          0           0           0           0
   0.739538    0.599752   -0.305584        3000
   0.843861    0.336017    -0.41832        3000
    0.10505   -0.283829    0.953103        3000
   0.239487    0.398616    0.885297        3000
   0.613733    0.778103    -0.13374        3000
  -0.266609    0.456667   -0.848749        3000
  -0.658247   -0.512735    0.551192        3000
    0.25712   -0.895115   -0.364223        3000
  -0.249597   -0.820166   -0.514809        3000
          0           0           0           0
  -0.572903    0.658663   -0.487795        3000
 -0.0228075   -0.247926    -0.96851        3000
  -0.224659    0.320255    0.920307        3000
   0.836964    0.322405    0.442206        3000
   0.860918    0.464605    0.207274        3000
  -0.487762    -0.80974   -0.326204        3000
   0.106576      0.9472   -0.302413        3000
  -0.541992   0.0101633   -0.840322        3000
   0.250904   -0.575934   -0.778041        3000
          0           0           0           0
   0.229044   -0.049167   -0.972174        3000
   0.215765    0.652466    0.726453        3000
  -0.961471   -0.144794    0.233684        3000
  -0.311713    0.788271   -0.530531        3000
   0.870926   -0.428851   -0.239948        3000
  -0.845038    0.263445    0.465304        3000
  -0.894558   -0.411345    0.174815        3000
   0.703904   -0.677796   -0.212395        3000
   0.666734   -0.350416    -0.65778        3000
          0           0           0           0
  -0.517483    0.748959    0.413849        3000
   0.719633   -0.134126    0.681277        3000
  0.0400332   -0.020859    0.998981        3000
  -0.827317    0.561693  0.00694208        3000
  -0.453066    0.385091    0.804012        3000
   0.879434   0.0352957   -0.474711        3000
   0.148474    0.246298   -0.957754        3000
   0.767882   -0.483406    0.420329        3000
   0.479364   -0.133429   -0.867414        3000
          0           0           0           0
  -0.717813    0.532018    0.449113        3000
   0.482463   -0.822074    0.302363        3000
  -0.282041    0.761327     0.58381        3000
 -0.0183469     0.84687   -0.531484        3000
   0.065368   -0.993181   0.0965371        3000
   0.421424    0.633314   -0.649088        3000
  -0.733299   0.0976283     0.67286        3000
 0.00029908    0.896359     0.44333        3000
   0.476561   -0.861658   -0.174458        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/dwipreproc_cust-tmp-IOGJ83/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-SJU19P/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-SJU19P/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-SJU19P/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-SJU19P/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-SJU19P/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
6863
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-0RXIRN/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-0RXIRN/parc.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/brainFS.nii /tmp/labelsgmfix-tmp-0RXIRN/T1.nii -stride -1,+2,+3
labelsgmfix: [03;32mChanging to temporary directory (/tmp/labelsgmfix-tmp-0RXIRN/)[0m
[03;34mCommand:[0m run_first_all -s R_Thal,L_Puta,R_Caud,R_Hipp,L_Amyg,R_Pall,R_Amyg,L_Caud,L_Pall,L_Thal,L_Hipp,R_Accu,L_Accu,R_Puta -i T1.nii -b -o first
[03;34mCommand:[0m mrcalc parc.mif 0 -min sgm.mif
[03;34mCommand:[0m meshconvert first-R_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Thal_mask.mif 6 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Puta_mask.mif 3 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Caud_mask.mif 7 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Hipp_mask.mif 13 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Amyg_mask.mif 12 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Pall_mask.mif 9 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Amyg_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Amyg_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Amyg_mask.mif 14 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Caud_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Caud_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Caud_mask.mif 2 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Pall_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Pall_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Pall_mask.mif 4 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Thal_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Thal_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Thal_mask.mif 1 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Hipp_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Hipp_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Hipp_mask.mif 11 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Accu_mask.mif 10 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-L_Accu_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - L_Accu_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc L_Accu_mask.mif 5 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m meshconvert first-R_Puta_first.vtk transformed.vtk -transform_first2real T1.nii
[03;34mCommand:[0m mesh2pve transformed.vtk parc.mif - | mrthreshold - R_Puta_mask.mif -abs 0.5
[03;34mCommand:[0m mrcalc R_Puta_mask.mif 8 sgm.mif -if sgm_new.mif
[03;34mCommand:[0m mrmath R_Thal_mask.mif L_Puta_mask.mif R_Caud_mask.mif R_Hipp_mask.mif L_Amyg_mask.mif R_Pall_mask.mif R_Amyg_mask.mif L_Caud_mask.mif L_Pall_mask.mif L_Thal_mask.mif L_Hipp_mask.mif R_Accu_mask.mif L_Accu_mask.mif R_Puta_mask.mif sum - | mrcalc - 1 -gt sgm_overlap_mask.mif
[03;34mCommand:[0m mrcalc sgm_overlap_mask.mif 0 sgm.mif -if sgm_masked.mif
[03;34mCommand:[0m labelconvert sgm_masked.mif /software/mrtrix3/mrtrix3-AP/scripts/data/FreeSurferSGM.txt /software/mrtrix3/mrtrix3-AP/src/connectome/tables/fs_a2009s.txt sgm_new_labels.mif
[03;34mCommand:[0m mrcalc parc.mif 83 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 78 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 84 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 87 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 81 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 86 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 88 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 77 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 79 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 76 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 80 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 89 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 82 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc parc.mif 85 -eq 0 parc.mif -if parc_removed.mif
[03;34mCommand:[0m mrcalc sgm_new_labels.mif 0.5 -gt sgm_new_labels.mif parc.mif -if result.mif -datatype uint32
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/parc_fixsubcort.nii
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc)[0m
labelsgmfix: [03;32mDeleting temporary directory /tmp/labelsgmfix-tmp-0RXIRN/[0m
tmp ./tmp.bbregister.57137
Log file is register.dat.log
Sat Mar 18 06:54:31 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc
/software/freesurfer/freesurfer-6.0.0/bin/bbregister --s Patient_051 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.75 2016/05/10 20:02:28 greve Exp $
Linux hpcnode060.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-6.0.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.57137/template.nii
mri_convert.bin biasmeanb0bet.nii.gz ./tmp.bbregister.57137/template.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.99929, 0.0190027, -0.0325357)
j_ras = (-0.0193617, 0.999755, -0.0107554)
k_ras = (0.0323233, 0.0113777, 0.999413)
writing to ./tmp.bbregister.57137/template.nii...
fslregister --s Patient_051 --mov ./tmp.bbregister.57137/template.nii --reg ./tmp.bbregister.57137/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.57137/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov

Log file is ./tmp.bbregister.57137/reg.init.dat.fslregister.log

Sat Mar 18 06:54:32 AEST 2017
--s Patient_051 --mov ./tmp.bbregister.57137/template.nii --reg ./tmp.bbregister.57137/reg.init.dat --niters 1 --maxangle 90 --tmp ./tmp.bbregister.57137/fslregister --dof 6 --fsvol brainmask.mgz --nobetmov
$Id: fslregister,v 1.40 2016/02/12 21:43:15 zkaufman Exp $
hpcnode060.adqimr.ad.lan
Linux hpcnode060.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc
mri_convert /working/lab_michaebr/alistaiP/Park/FS/Patient_051/mri/brainmask.mgz ./tmp.bbregister.57137/fslregister/refvol.fslregister.nii
mri_convert.bin /working/lab_michaebr/alistaiP/Park/FS/Patient_051/mri/brainmask.mgz ./tmp.bbregister.57137/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/Park/FS/Patient_051/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, -8.73115e-10, 3.72529e-09)
j_ras = (3.72529e-09, 0, -1)
k_ras = (-2.79397e-09, 1, -9.31323e-10)
writing to ./tmp.bbregister.57137/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc
mri_convert ./tmp.bbregister.57137/template.nii ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii --frame 0
mri_convert.bin ./tmp.bbregister.57137/template.nii ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.226 2016/02/26 16:15:24 mreuter Exp $
reading from ./tmp.bbregister.57137/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.99929, 0.0190027, -0.0325357)
j_ras = (-0.0193617, 0.999755, -0.0107554)
k_ras = (0.0323233, 0.0113777, 0.999413)
keeping frame 0
writing to ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.57137/template.nii
reg file       ./tmp.bbregister.57137/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.57137/template.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.99929  -0.01900   0.03254   1.71874;
 0.03232   0.01138   0.99941   0.00003;
 0.01936  -0.99975   0.01076  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
-0.99929  -0.01900   0.03254   1.71874;
 0.03232   0.01138   0.99941   0.00003;
 0.01936  -0.99975   0.01076  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.00000   0.00000   0.00000   1.71874;
-0.00000   1.00000   0.00000   0.00005;
 0.00000   0.00000   1.00000  -0.00002;
 0.00000   0.00000   0.00000   1.00000;
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc
tkregister2_cmdl --mov ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.57137/fslregister/reg0.57177.dat --regheader --fslregout ./tmp.bbregister.57137/reg.init.dat.fsl.mat0 --s Patient_051 --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.57137/fslregister/reg0.57177.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_051/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.99929   0.01900  -0.03254   0.97653;
 0.03232   0.01138   0.99941  -0.34995;
 0.01936  -0.99976   0.01076   0.74211;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99929   0.01900  -0.03254   0.97653;
 0.03232   0.01138   0.99941  -0.34995;
 0.01936  -0.99976   0.01076   0.74211;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_051
RegMat ---------------------------
 0.99929   0.01900  -0.03254   0.97653;
 0.03232   0.01138   0.99941  -0.34995;
 0.01936  -0.99976   0.01076   0.74211;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Sat Mar 18 06:54:34 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc
flirt.fsl -ref ./tmp.bbregister.57137/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.57137/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/fsl.5.0.2.xyztrans.sch -init ./tmp.bbregister.57137/reg.init.dat.fsl.mat0
Sat Mar 18 06:55:07 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc
flirt.fsl -ref ./tmp.bbregister.57137/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.57137/reg.init.dat.fsl.mat -init ./tmp.bbregister.57137/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-6.0.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_051 --mov ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.57137/reg.init.dat --fslreg ./tmp.bbregister.57137/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.99916   0.01435  -0.03831   20.64120;
-0.03887   0.04100  -0.99840   206.95599;
-0.01276   0.99906   0.04152   18.90860;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.57137/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_051/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable ./tmp.bbregister.57137/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.99916   0.01276  -0.03887   1.05418;
 0.03831   0.04152   0.99840   2.74646;
 0.01435  -0.99906   0.04100   2.70728;
 0.00000   0.00000   0.00000   1.00000;
---------------------------------------
---- Input registration matrix --------
 0.99916   0.01276  -0.03887   1.05418;
 0.03831   0.04152   0.99840   2.74646;
 0.01435  -0.99906   0.04100   2.70728;
 0.00000   0.00000   0.00000   1.00000;
Determinant 1
subject = Patient_051
RegMat ---------------------------
 0.99916   0.01276  -0.03887   1.05418;
 0.03831   0.04152   0.99840   2.74646;
 0.01435  -0.99906   0.04100   2.70728;
 0.00000   0.00000   0.00000   1.00000;
mri_matrix_multiply -im ./tmp.bbregister.57137/fslregister/swapreg.dat -im ./tmp.bbregister.57137/reg.init.dat -om ./tmp.bbregister.57137/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Sat Mar 18 06:54:32 AEST 2017 
Ended   at Sat Mar 18 06:56:15 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.57137/template.nii --reg ./tmp.bbregister.57137/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.57137/template.nii --init-reg ./tmp.bbregister.57137/reg.init.dat --out-reg ./tmp.bbregister.57137/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc
mri_segreg --mov ./tmp.bbregister.57137/template.nii --init-reg ./tmp.bbregister.57137/reg.init.dat --out-reg ./tmp.bbregister.57137/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode060.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.57137/template.nii
regfile ./tmp.bbregister.57137/reg.init.dat
subject Patient_051
dof 6
outregfile ./tmp.bbregister.57137/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1489980842
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99916  -0.01276   0.03887   0.66457;
 0.03831   0.04152   0.99840   2.74651;
 0.01435  -0.99906   0.04100   2.70725;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.015519
 1  -25.0 -25.0  25.0   0.963842
 2  -25.0  25.0 -25.0   0.985359
 3  -25.0  25.0  25.0   1.000229
 4   25.0 -25.0 -25.0   1.004491
 5   25.0 -25.0  25.0   1.025527
 6   25.0  25.0 -25.0   0.998359
 7   25.0  25.0  25.0   1.020154
REL:  8  0.220613    8.013480  1.001685 rel = 0.220242 
Initial costs ----------------
Number of surface hits 2592
WM  Intensity   394.0736 +/-  78.4796
Ctx Intensity   552.7108 +/- 176.4103
Pct Contrast     30.2551 +/-  29.1904
Cost   0.2206
RelCost   0.2202

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      1.0098   1.0098  0.0
     2  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000   4.0000      0.9898   0.9898  0.0
     5  -4.0000  -4.0000  -4.0000  -4.0000   0.0000   4.0000      0.9730   0.9730  0.0
     6  -4.0000  -4.0000  -4.0000  -4.0000   4.0000  -4.0000      0.9328   0.9328  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.9167   0.9167  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.8231   0.8231  0.0
   118  -4.0000   0.0000   0.0000   0.0000  -4.0000   0.0000      0.7805   0.7805  0.0
   121  -4.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.7788   0.7788  0.0
   282   0.0000  -4.0000   0.0000   0.0000   0.0000  -4.0000      0.7569   0.7569  0.0
   283   0.0000  -4.0000   0.0000   0.0000   0.0000   0.0000      0.7542   0.7542  0.0
   284   0.0000  -4.0000   0.0000   0.0000   0.0000   4.0000      0.7200   0.7200  0.0
   346   0.0000   0.0000  -4.0000   4.0000   0.0000   0.0000      0.7082   0.7082  0.0
   363   0.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.6929   0.6929  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.2206   0.2206  0.0
Brute Force --------------------------
Min cost was 0.220613
Number of iterations   729
Search time 3.422000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000100
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.220613
   7 -0.151  0.000  0.000  0.000  0.000  0.000   0.2195503765
  10 -0.138  0.000  0.000  0.000  0.000  0.000   0.2193506989
  18 -0.138 -0.618  0.000  0.000  0.000  0.000   0.1642891564
  20 -0.138 -0.749  0.000  0.000  0.000  0.000   0.1623116374
  21 -0.138 -0.753  0.000  0.000  0.000  0.000   0.1622510869
  22 -0.138 -0.847  0.000  0.000  0.000  0.000   0.1621400224
  23 -0.138 -0.804  0.000  0.000  0.000  0.000   0.1619845139
  24 -0.138 -0.806  0.000  0.000  0.000  0.000   0.1619640293
  25 -0.138 -0.820  0.000  0.000  0.000  0.000   0.1618699307
  26 -0.138 -0.831  0.000  0.000  0.000  0.000   0.1618406319
  28 -0.138 -0.828  0.000  0.000  0.000  0.000   0.1618391219
  30 -0.138 -0.829  0.000  0.000  0.000  0.000   0.1618384879
  36 -0.138 -0.829  0.382  0.000  0.000  0.000   0.1443785684
  38 -0.138 -0.829  0.348  0.000  0.000  0.000   0.1439584030
  42 -0.138 -0.829  0.351  0.000  0.000  0.000   0.1439576725
  44 -0.138 -0.829  0.350  0.000  0.000  0.000   0.1439573139
  50 -0.138 -0.829  0.350  0.382  0.000  0.000   0.1279781050
  52 -0.138 -0.829  0.350  0.291  0.000  0.000   0.1279699302
  54 -0.138 -0.829  0.350  0.337  0.000  0.000   0.1272834691
  57 -0.138 -0.829  0.350  0.345  0.000  0.000   0.1272496535
  66 -0.138 -0.829  0.350  0.345 -0.153  0.000   0.1268952655
  67 -0.138 -0.829  0.350  0.345 -0.090  0.000   0.1264209971
  69 -0.138 -0.829  0.350  0.345 -0.112  0.000   0.1263505149
  71 -0.138 -0.829  0.350  0.345 -0.104  0.000   0.1263184934
  72 -0.138 -0.829  0.350  0.345 -0.105  0.000   0.1263176676
  75 -0.138 -0.829  0.350  0.345 -0.105  1.000   0.0992753460
  79 -0.138 -0.829  0.350  0.345 -0.105  0.618   0.0845256931
  82 -0.138 -0.829  0.350  0.345 -0.105  0.590   0.0843022919
  85 -0.138 -0.829  0.350  0.345 -0.105  0.591   0.0843012468
  powell nthiter 1: fret = 0.084301
  94 -0.004 -0.829  0.350  0.345 -0.105  0.591   0.0781466731
  96 -0.012 -0.829  0.350  0.345 -0.105  0.591   0.0778727649
  98 -0.030 -0.829  0.350  0.345 -0.105  0.591   0.0775384764
 100 -0.027 -0.829  0.350  0.345 -0.105  0.591   0.0775272607
 121 -0.027 -0.829  0.265  0.345 -0.105  0.591   0.0772943059
 122 -0.027 -0.829  0.297  0.345 -0.105  0.591   0.0771043362
 124 -0.027 -0.829  0.292  0.345 -0.105  0.591   0.0770981007
 126 -0.027 -0.829  0.293  0.345 -0.105  0.591   0.0770978145
 134 -0.027 -0.829  0.293  0.450 -0.105  0.591   0.0768199430
 135 -0.027 -0.829  0.293  0.411 -0.105  0.591   0.0766217961
 137 -0.027 -0.829  0.293  0.418 -0.105  0.591   0.0766096775
 139 -0.027 -0.829  0.293  0.421 -0.105  0.591   0.0766088887
 140 -0.027 -0.829  0.293  0.420 -0.105  0.591   0.0766086121
 148 -0.027 -0.829  0.293  0.420 -0.203  0.591   0.0757894091
 154 -0.027 -0.829  0.293  0.420 -0.198  0.591   0.0757829371
 156 -0.027 -0.829  0.293  0.420 -0.199  0.591   0.0757796325
 168 -0.027 -0.829  0.293  0.420 -0.199  0.590   0.0757779788
 170  0.083 -0.829  0.236  0.495 -0.294  0.589   0.0728824685
 179  0.090 -0.829  0.233  0.500 -0.300  0.589   0.0727985761
 181  0.093 -0.829  0.231  0.502 -0.303  0.589   0.0727830141
 182  0.093 -0.829  0.231  0.502 -0.303  0.589   0.0727828718
  powell nthiter 2: fret = 0.072783
 192  0.093 -0.829  0.231  0.502 -0.303  0.601   0.0726697337
 193  0.093 -0.829  0.231  0.502 -0.303  0.622   0.0726231988
 194  0.093 -0.829  0.231  0.502 -0.303  0.617   0.0726185536
 195  0.093 -0.829  0.231  0.502 -0.303  0.618   0.0726183771
 203  0.093 -0.691  0.231  0.502 -0.303  0.618   0.0715920788
 204  0.093 -0.726  0.231  0.502 -0.303  0.618   0.0711797997
 205  0.093 -0.740  0.231  0.502 -0.303  0.618   0.0711415546
 207  0.093 -0.737  0.231  0.502 -0.303  0.618   0.0711393967
 219  0.093 -0.737  0.224  0.502 -0.303  0.618   0.0711258090
 229  0.093 -0.737  0.224  0.514 -0.303  0.618   0.0710888920
 231  0.093 -0.737  0.224  0.515 -0.303  0.618   0.0710886104
 240  0.093 -0.737  0.224  0.515 -0.330  0.618   0.0708743564
 245  0.093 -0.737  0.224  0.515 -0.332  0.618   0.0708689077
 246  0.093 -0.737  0.224  0.515 -0.334  0.618   0.0708676649
 257  0.095 -0.737  0.224  0.515 -0.335  0.618   0.0708667993
 259  0.094 -0.737  0.224  0.515 -0.335  0.618   0.0708667648
  powell nthiter 3: fret = 0.070867
 273  0.094 -0.737  0.224  0.515 -0.335  0.617   0.0708662148
 284  0.094 -0.736  0.224  0.515 -0.335  0.617   0.0708660175
 294  0.094 -0.736  0.229  0.515 -0.335  0.617   0.0708549112
 295  0.094 -0.736  0.230  0.515 -0.335  0.617   0.0708545236
 305  0.094 -0.736  0.230  0.513 -0.335  0.617   0.0708526900
 337  0.094 -0.736  0.232  0.512 -0.335  0.617   0.0708519466
 338  0.094 -0.736  0.232  0.512 -0.335  0.617   0.0708519087
 345  0.094 -0.736  0.232  0.512 -0.335  0.617   0.0708519078
 347  0.094 -0.736  0.232  0.512 -0.335  0.617   0.0708519063
  powell nthiter 4: fret = 0.070852
 358  0.094 -0.736  0.232  0.512 -0.335  0.615   0.0708498884
 370  0.094 -0.735  0.232  0.512 -0.335  0.614   0.0708492266
 380  0.093 -0.735  0.233  0.511 -0.334  0.614   0.0708488553
 381  0.093 -0.735  0.232  0.512 -0.334  0.614   0.0708485568
 393  0.093 -0.735  0.232  0.511 -0.334  0.614   0.0708483228
 405  0.093 -0.735  0.232  0.511 -0.335  0.614   0.0708473091
 413  0.093 -0.735  0.233  0.510 -0.335  0.614   0.0708472652
 418  0.093 -0.735  0.233  0.510 -0.335  0.614   0.0708471378
 421  0.093 -0.735  0.233  0.510 -0.335  0.614   0.0708471142
Powell done niters = 4
Computing relative cost
 0  -25.0 -25.0 -25.0   1.011493
 1  -25.0 -25.0  25.0   0.982459
 2  -25.0  25.0 -25.0   0.978654
 3  -25.0  25.0  25.0   1.005474
 4   25.0 -25.0 -25.0   1.006149
 5   25.0 -25.0  25.0   1.025686
 6   25.0  25.0 -25.0   0.974846
 7   25.0  25.0  25.0   1.023707
REL:  8  0.070847    8.008468  1.001059 rel = 0.0707722 
Number of iterations     4
Min cost was 0.070847
Number of FunctionCalls   424
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 1.946000 sec
Parameters at optimum (transmm)  0.09350 -0.73462  0.23270
Parameters at optimum (rotdeg)  0.51039 -0.33531  0.61362 
Final costs ----------------
Number of surface hits 2592
WM  Intensity   380.8761 +/-  58.6983
Ctx Intensity   531.0044 +/- 102.8732
Pct Contrast     31.8798 +/-  20.1781
Cost   0.0708
RelCost   0.2202
Reg at min cost was 
-0.99958  -0.00746   0.02789   0.71288;
 0.02748   0.05034   0.99836   1.99445;
 0.00885  -0.99871   0.05011   2.96815;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to ./tmp.bbregister.57137/bbr.pass1.dat, type = 14 
Original Reg 
-0.99916  -0.01276   0.03887   0.66457;
 0.03831   0.04152   0.99840   2.74651;
 0.01435  -0.99906   0.04100   2.70725;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00042  -0.00530   0.01098  -0.04831;
 0.01083  -0.00882   0.00005   0.75205;
 0.00551  -0.00035  -0.00912  -0.26090;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.904145
Computing change in rh position
Surface-RMS-Diff-mm 1.080095 0.383914 1.887015
mri_segreg done
mri_segreg --mov ./tmp.bbregister.57137/template.nii --init-reg ./tmp.bbregister.57137/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.57137/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.113 2016/05/10 03:23:20 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/Park/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc
mri_segreg --mov ./tmp.bbregister.57137/template.nii --init-reg ./tmp.bbregister.57137/bbr.pass1.dat --out-reg register.dat --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --brute -0.1 0.1 0.1 --cur-reg ./tmp.bbregister.57137/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode060.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.57137/template.nii
regfile ./tmp.bbregister.57137/bbr.pass1.dat
subject Patient_051
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490314036
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.99958  -0.00746   0.02789   0.71288;
 0.02748   0.05034   0.99836   1.99445;
 0.00885  -0.99871   0.05011   2.96815;
 0.00000   0.00000   0.00000   1.00000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness for GM
Projecting RH Surfs
Using lh.cortex.label
Using rh.cortex.label
Computing relative cost
 0  -25.0 -25.0 -25.0   1.007835
 1  -25.0 -25.0  25.0   0.985537
 2  -25.0  25.0 -25.0   0.991314
 3  -25.0  25.0  25.0   1.012969
 4   25.0 -25.0 -25.0   0.994217
 5   25.0 -25.0  25.0   0.991602
 6   25.0  25.0 -25.0   0.986730
 7   25.0  25.0  25.0   0.999352
REL:  8  0.089953    7.969555  0.996194 rel = 0.0902971 
Initial costs ----------------
Number of surface hits 258971
WM  Intensity   380.6295 +/-  59.7904
Ctx Intensity   528.5599 +/- 102.0034
Pct Contrast     31.5445 +/-  19.9960
Cost   0.0900
RelCost   0.0903

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.0844   0.0844  0.0
     1  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000   0.0000      0.0832   0.0832  0.0
     3  -0.1000  -0.1000  -0.1000  -0.1000   0.0000  -0.1000      0.0794   0.0794  0.0
     4  -0.1000  -0.1000  -0.1000  -0.1000   0.0000   0.0000      0.0778   0.0778  0.0
     7  -0.1000  -0.1000  -0.1000  -0.1000   0.1000   0.0000      0.0757   0.0757  0.0
    16  -0.1000  -0.1000  -0.1000   0.0000   0.1000   0.0000      0.0730   0.0730  0.0
    88  -0.1000   0.0000  -0.1000  -0.1000   0.1000   0.0000      0.0715   0.0715  0.0
    97  -0.1000   0.0000  -0.1000   0.0000   0.1000   0.0000      0.0714   0.0714  0.0
   106  -0.1000   0.0000  -0.1000   0.1000   0.1000   0.0000      0.0711   0.0711  0.0
   332   0.0000   0.0000  -0.1000  -0.1000   0.1000   0.1000      0.0706   0.0706  0.0
   341   0.0000   0.0000  -0.1000   0.0000   0.1000   0.1000      0.0689   0.0689  0.0
   350   0.0000   0.0000  -0.1000   0.1000   0.1000   0.1000      0.0689   0.0689  0.0
   422   0.0000   0.1000  -0.1000   0.0000   0.1000   0.1000      0.0689   0.0689  0.0
Brute Force --------------------------
Min cost was 0.068888
Number of iterations   729
Search time 2.930000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.100  -0.100  0.000  0.100  0.100 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0.1
2 -0.1
3 0
4 0.1
5 0.1
fs_powell::minimize
  nparams 6
  maxfev 36
  ftol   0.000000
  linmin_xtol_   0.001000
  powell nthiter 0: fret = 0.086249
   7 -0.029  0.100 -0.100  0.000  0.100  0.100   0.0860243677
   9 -0.039  0.100 -0.100  0.000  0.100  0.100   0.0860032120
  20 -0.039  0.099 -0.100  0.000  0.100  0.100   0.0860030789
  27 -0.039  0.099 -0.024  0.000  0.100  0.100   0.0856701370
  28 -0.039  0.099 -0.033  0.000  0.100  0.100   0.0856634218
  30 -0.039  0.099 -0.035  0.000  0.100  0.100   0.0856633304
  39 -0.039  0.099 -0.035  0.036  0.100  0.100   0.0856374077
  40 -0.039  0.099 -0.035  0.021  0.100  0.100   0.0856304417
  41 -0.039  0.099 -0.035  0.025  0.100  0.100   0.0856297667
  42 -0.039  0.099 -0.035  0.026  0.100  0.100   0.0856297111
  50 -0.039  0.099 -0.035  0.026  0.139  0.100   0.0855707862
  51 -0.039  0.099 -0.035  0.026  0.127  0.100   0.0855562749
  52 -0.039  0.099 -0.035  0.026  0.128  0.100   0.0855562491
  60 -0.039  0.099 -0.035  0.026  0.128  0.124   0.0855045365
  61 -0.039  0.099 -0.035  0.026  0.128  0.126   0.0855040937
  powell nthiter 1: fret = 0.085504
  83 -0.039  0.100 -0.035  0.026  0.128  0.126   0.0855040689
  92 -0.039  0.100 -0.034  0.026  0.128  0.126   0.0855040442
 101 -0.039  0.100 -0.034  0.022  0.128  0.126   0.0855034960
 112 -0.039  0.100 -0.034  0.022  0.125  0.126   0.0855031671
 114 -0.039  0.100 -0.034  0.022  0.126  0.126   0.0855030859
  powell nthiter 2: fret = 0.085503
 152 -0.039  0.100 -0.033  0.022  0.126  0.126   0.0855030264
 187 -0.039  0.100 -0.033  0.022  0.126  0.126   0.0855030206
 189 -0.039  0.100 -0.033  0.022  0.126  0.126   0.0855030173
 195 -0.039  0.100 -0.033  0.022  0.126  0.126   0.0855030163
  powell nthiter 3: fret = 0.085503
 257 -0.039  0.100 -0.033  0.022  0.126  0.126   0.0855030163
Powell done niters = 3
Computing relative cost
 0  -25.0 -25.0 -25.0   1.007815
 1  -25.0 -25.0  25.0   0.985323
 2  -25.0  25.0 -25.0   0.991137
 3  -25.0  25.0  25.0   1.013466
 4   25.0 -25.0 -25.0   0.993314
 5   25.0 -25.0  25.0   0.991800
 6   25.0  25.0 -25.0   0.987354
 7   25.0  25.0  25.0   0.997274
REL:  8  0.085503    7.967482  0.995935 rel = 0.085852 
Number of iterations     3
Min cost was 0.085503
Number of FunctionCalls   261
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 45.003000 sec
Parameters at optimum (transmm) -0.03905  0.10000 -0.03269
Parameters at optimum (rotdeg)  0.02197  0.12648  0.12597 
Final costs ----------------
Number of surface hits 258971
WM  Intensity   380.6041 +/-  60.0523
Ctx Intensity   529.1887 +/- 101.1541
Pct Contrast     31.7103 +/-  19.7154
Cost   0.0855
RelCost   0.0903
Reg at min cost was 
-0.99962  -0.00977   0.02580   0.67599;
 0.02528   0.05070   0.99840   2.09489;
 0.01106  -0.99867   0.05044   2.93464;
 0.00000   0.00000   0.00000   1.00000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.99958  -0.00746   0.02789   0.71288;
 0.02748   0.05034   0.99836   1.99445;
 0.00885  -0.99871   0.05011   2.96815;
 0.00000   0.00000   0.00000   1.00000;

Original Reg - Optimal Reg
 0.00004   0.00232   0.00208   0.03688;
 0.00220  -0.00036  -0.00004  -0.10044;
-0.00222  -0.00004  -0.00032   0.03351;
 0.00000   0.00000   0.00000   0.00000;

Computing change in lh position
LH rmsDiffMean 0.214005
Computing change in rh position
Surface-RMS-Diff-mm 0.167514 0.068891 0.306872
mri_segreg done
MinCost: 0.085503 380.604095 529.188661 31.710341 
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-6.0.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.132.2.1 2016/08/02 21:17:29 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.99962  -0.00977   0.02580   0.67599;
 0.02528   0.05070   0.99840   2.09489;
 0.01106  -0.99867   0.05044   2.93464;
 0.00000   0.00000   0.00000   1.00000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/Park/FS/Patient_051/mri/orig.mgz
Ttarg: --------------------
-1.00000   0.00000   0.00000   128.00000;
 0.00000   0.00000   1.00000  -128.00000;
 0.00000  -1.00000   0.00000   128.00000;
 0.00000   0.00000   0.00000   1.00000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.71875   0.00000   0.00000   110.00000;
 0.00000   0.00000   1.70000  -76.50000;
 0.00000  -1.71875   0.00000   110.00000;
 0.00000   0.00000   0.00000   1.00000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.99962  -0.00977   0.02580   0.67599;
 0.02528   0.05070   0.99840   2.09489;
 0.01106  -0.99867   0.05044   2.93464;
 0.00000   0.00000   0.00000   1.00000;
Determinant -1
subject = Patient_051
RegMat ---------------------------
-0.99962  -0.00977   0.02580   0.67599;
 0.02528   0.05070   0.99840   2.09489;
 0.01106  -0.99867   0.05044   2.93464;
 0.00000   0.00000   0.00000   1.00000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Sat Mar 18 06:54:31 AEST 2017 
Ended   at Sat Mar 18 06:57:39 AEST 2017
BBR-Run-Time-Sec 188
 
bbregister Done
To check results, run:
tkregisterfv --mov biasmeanb0bet.nii.gz --reg register.dat --surfs 
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-EMTJGO/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/biascorr.mif /tmp/dwi2response-tmp-EMTJGO/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-EMTJGO/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-EMTJGO/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,3000 with 12,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 3000 dwi_b3000.mif
[03;34mCommand:[0m mrmath dwi_b3000.mif mean mean_b3000.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b3000.mif -finite mean_b3000.mif 0 -if 0 -le err_b3000.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b3000.mif -divide -log sdm_b3000.mif
[03;34mCommand:[0m mrcalc sdm_b3000.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b3000.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.14937 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.48472 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.93397 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 1.92468 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 1.92468 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 1.92468 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.83237 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.83237 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 557 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 557 -iter_voxels 5570 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-EMTJGO/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.91782 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 653 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 653 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 1935 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 325904 --> 265121 --> 265099[0m
dwi2response: [03;32mWM: 119135 --> 111353 --> 557 (SF)[0m
dwi2response: [03;32mGM: 105120 --> 65319 --> 1306[0m
dwi2response: [03;32mCSF: 40844 --> 19353 --> 1935[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b3000.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb3000.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/Park/Diff/Patient_051/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-EMTJGO/[0m
