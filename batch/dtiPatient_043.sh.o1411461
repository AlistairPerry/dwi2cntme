dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwipreproc_cust: [03;32m[0m
dwipreproc_cust: [03;32mGenerated temporary directory: /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/dwipreproc_cust-tmp-5XCGKB/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/rawdataAPdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/dwipreproc_cust-tmp-5XCGKB/series.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/AP7b0s.mif /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/dwipreproc_cust-tmp-5XCGKB/pair1.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/rawdataPAdn.mif /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/dwipreproc_cust-tmp-5XCGKB/pair2.mif
dwipreproc_cust: [03;32mChanging to temporary directory (/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/dwipreproc_cust-tmp-5XCGKB/)[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 102[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -dwgrad' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult:           0           0           0           0
          0           0           0           0
   -0.99999  0.00234152  0.00367961        3000
  0.0272012   -0.744157   -0.667451        3000
-0.00522144    0.517421    0.855715        3000
   0.272337      0.8279    -0.49032        3000
  -0.652027    0.404013   -0.641587        3000
   0.506876    0.261147     0.82151        3000
   0.959383    0.279712   0.0366785        3000
   0.534408    0.379883   -0.755048        3000
   -0.31724    0.132663    -0.93902        3000
          0           0           0           0
   0.505385   -0.590246   -0.629441        3000
   0.600721   0.0893917   -0.794445        3000
  -0.953623    -0.15569   -0.257611        3000
  -0.527636   -0.742308    0.413012        3000
   0.194466   -0.924779    0.327057        3000
  -0.365876    0.925465  -0.0982281        3000
   0.258811    0.930523    0.259121        3000
  0.0227441    0.509529   -0.860153        3000
  -0.614996    0.787951  -0.0302199        3000
          0           0           0           0
   0.873044   0.0322977     0.48657        3000
  -0.744527   -0.224442    0.628733        3000
   0.487254    0.676131    0.552658        3000
  -0.451103   -0.890704  -0.0561552        3000
   -0.66163   -0.431301   -0.613372        3000
  -0.854005    0.236108   -0.463603        3000
   -0.43855   -0.505817   -0.742848        3000
   0.957476   -0.140039   -0.252246        3000
  -0.702976   -0.594521   -0.390345        3000
          0           0           0           0
  -0.387915   -0.174381    0.905049        3000
   0.143874   -0.680615    0.718376        3000
  -0.803002   -0.595699   0.0181841        3000
  -0.288164   -0.136885   -0.947747        3000
   0.963238   -0.127818    0.236295        3000
  -0.151012    -0.69566     0.70232        3000
 -0.0166427   -0.981808   -0.189145        3000
   -0.37655   -0.897405    0.229946        3000
   0.667997    0.728643    0.151195        3000
          0           0           0           0
  -0.290373   -0.464945    0.836367        3000
  -0.721235    -0.16308    -0.67322        3000
   0.717646   -0.657775    0.228728        3000
   0.428982   -0.580324    0.692242        3000
   0.958965   -0.282319  -0.0261071        3000
   0.493934   -0.295568    0.817722        3000
  -0.894885    0.397088   -0.203719        3000
   0.203012    0.978844  -0.0255239        3000
  -0.231378    0.965388    0.120377        3000
          0           0           0           0
   0.739809     0.59948    -0.30546        3000
   0.844151    0.335361    -0.41826        3000
   0.105794   -0.283695    0.953061        3000
   0.238897    0.398988    0.885289        3000
   0.613562    0.778271   -0.133551        3000
  -0.267242    0.456233   -0.848784        3000
  -0.658334   -0.512548    0.551262        3000
   0.257494   -0.894928   -0.364418        3000
  -0.249004     -0.8202   -0.515043        3000
          0           0           0           0
  -0.573625    0.658228   -0.487536        3000
 -0.0211591   -0.248073    -0.96851        3000
  -0.225094    0.320535    0.920103        3000
   0.836573    0.322669    0.442753        3000
   0.860469    0.465171    0.207869        3000
  -0.487378   -0.809842   -0.326525        3000
   0.106027    0.947307    -0.30227        3000
  -0.541625  0.00466596   -0.840608        3000
   0.250992   -0.576086   -0.777899        3000
          0           0           0           0
   0.229483  -0.0498313   -0.972036        3000
   0.215453    0.652443    0.726566        3000
  -0.962166   -0.139026    0.234325        3000
  -0.312329    0.788155   -0.530341        3000
   0.870645   -0.429091   -0.240536        3000
  -0.844791    0.263916    0.465485        3000
  -0.894806   -0.410857    0.174695        3000
   0.703676    -0.67791   -0.212784        3000
   0.666609   -0.350662   -0.657775        3000
          0           0           0           0
  -0.517382     0.74895    0.413992        3000
   0.720072   -0.133383    0.680959        3000
   0.039654  -0.0157895    0.999089        3000
   -0.82782    0.560947  0.00721936        3000
  -0.453076    0.385222    0.803944        3000
   0.879491   0.0291201   -0.475025        3000
   0.148206    0.245427   -0.958019        3000
   0.768522   -0.482793    0.419863        3000
   0.479389   -0.133959   -0.867318        3000
          0           0           0           0
  -0.717564    0.532126    0.449382        3000
   0.483117   -0.821715    0.302297        3000
  -0.282328    0.761103    0.583964        3000
 -0.0188383    0.846775   -0.531617        3000
  0.0668026   -0.993104   0.0963442        3000
   0.421331    0.633106   -0.649351        3000
  -0.733124   0.0979461    0.673005        3000
         -0    0.896238    0.443574        3000
    0.47658   -0.861556   -0.174908        3000
          0           0           0           0[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo series.mif -stride' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 1 2 3 4[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
[03;34mCommand:[0m mrconvert series.mif dwi_pre_topup.nii -stride -1,+2,+3,+4
[03;34mCommand:[0m mrcat pair1.mif pair2.mif - -axis 3 | mrconvert - topup_in.nii -stride -1,+2,+3,+4
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair1.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCommand: '/software/mrtrix3/mrtrix3-AP/release/bin/mrinfo pair2.mif -size' (piping data to local storage)[0m
dwipreproc_cust: [03;32mResult: 128 128 90 7[0m
dwipreproc_cust: [03;32mCreating phase-encoding configuration file[0m
[03;34mCommand:[0m topup --imain=topup_in.nii --datain=config.txt --out=field --fout=field_map.nii.gz --config=/software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/b02b0.cnf
[03;34mCommand:[0m applytopup --imain=dwi_pre_topup.nii --datain=config.txt --inindex=1 --topup=field --out=dwi_post_topup.nii.gz --method=jac
[03;34mCommand:[0m mrconvert series.mif - -stride -1,+2,+3,+4 | mrinfo - -export_grad_fsl bvecs bvals
[03;34mCommand:[0m mrconvert dwi_post_topup.nii.gz -fslgrad bvecs bvals - | dwi2mask - - | maskfilter - dilate - | mrconvert - mask.nii -datatype float32 -stride -1,+2,+3
[03;34mCommand:[0m eddy_openmp --imain=dwi_pre_topup.nii --mask=mask.nii --index=indices.txt --acqp=config.txt --bvecs=bvecs --bvals=bvals --repol --topup=field --out=dwi_post_eddy
[03;34mCommand:[0m mrconvert dwi_post_eddy.nii.gz result.mif -stride 1,2,3,4 -fslgrad dwi_post_eddy.eddy_rotated_bvecs bvals
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/eddycorr.mif -export_grad_mrtrix /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/adjencoding.b
dwipreproc_cust: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc)[0m
dwipreproc_cust: [03;32mDeleting temporary directory /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/dwipreproc_cust-tmp-5XCGKB/[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
dwibiascorrect: [03;32m[0m
dwibiascorrect: [03;32mGenerated temporary directory: /tmp/dwibiascorrect-tmp-VPP1V9/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/eddycorr.mif /tmp/dwibiascorrect-tmp-VPP1V9/in.mif
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/eddymeanb0bet_mask.nii.gz /tmp/dwibiascorrect-tmp-VPP1V9/mask.mif
dwibiascorrect: [03;32mChanging to temporary directory (/tmp/dwibiascorrect-tmp-VPP1V9/)[0m
[03;34mCommand:[0m dwiextract in.mif - -bzero | mrmath - mean mean_bzero.mif -axis 3
[03;34mCommand:[0m mrcalc mean_bzero.mif mask.mif -mult - | mrconvert - mean_bzero_masked.nii -stride -1,+2,+3
[03;34mCommand:[0m fast -t 2 -o fast -n 3 -b mean_bzero_masked.nii
[03;34mCommand:[0m mrcalc in.mif fast_bias.nii.gz -div result.mif
[03;34mCommand:[0m mrconvert result.mif /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/biascorr.mif
dwibiascorrect: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc)[0m
dwibiascorrect: [03;32mDeleting temporary directory /tmp/dwibiascorrect-tmp-VPP1V9/[0m
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
Extracting mean of the b=0 shell.
Extracting mean of the b=3000 shell.
187437
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.[0m
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mGenerated temporary directory: /tmp/labelsgmfix-tmp-PRS7O1/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-PRS7O1/parc.mif
labelsgmfix: [03;32m[0m
labelsgmfix: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc)[0m
labelsgmfix: [00;31mScript failed while executing the command: mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/parctempstr.nii /tmp/labelsgmfix-tmp-PRS7O1/parc.mif[0m
labelsgmfix: [00;31mFor debugging, inspect contents of temporary directory: /tmp/labelsgmfix-tmp-PRS7O1/[0m
Log file is register.dat.log
Wed Mar 15 05:23:57 AEST 2017

setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc
/software/freesurfer/freesurfer-5.3.0/bin/bbregister --s Patient_043 --mov biasmeanb0bet.nii.gz --init-fsl --reg register.dat --dti --fslmat diff2FS.mat

$Id: bbregister,v 1.49.2.3 2013/03/25 18:04:53 greve Exp $
Linux hpcnode040.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
FREESURFER_HOME /software/freesurfer/freesurfer-5.3.0
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.5006/template.nii
mri_convert biasmeanb0bet.nii.gz ./tmp.bbregister.5006/template.nii 
$Id: mri_convert.c,v 1.179.2.7 2012/09/05 21:55:16 mreuter Exp $
reading from biasmeanb0bet.nii.gz...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.979924, 0.195773, 0.0376993)
j_ras = (-0.199367, 0.961254, 0.190375)
k_ras = (0.0010318, -0.194069, 0.980987)
writing to ./tmp.bbregister.5006/template.nii...
fslregister --s Patient_043 --mov ./tmp.bbregister.5006/template.nii --reg ./tmp.bbregister.5006/reg.init.dat --niters 1 --maxangle 90 --nobetmov --tmp ./tmp.bbregister.5006/fslregister --dof 6 --fsvol brainmask.mgz

Log file is ./tmp.bbregister.5006/reg.init.dat.fslregister.log

Wed Mar 15 05:23:57 AEST 2017
--s Patient_043 --mov ./tmp.bbregister.5006/template.nii --reg ./tmp.bbregister.5006/reg.init.dat --niters 1 --maxangle 90 --nobetmov --tmp ./tmp.bbregister.5006/fslregister --dof 6 --fsvol brainmask.mgz
$Id: fslregister,v 1.34.2.2 2012/11/08 16:18:56 greve Exp $
hpcnode040.adqimr.ad.lan
Linux hpcnode040.adqimr.ad.lan 3.10.0-327.3.1.el7.x86_64 #1 SMP Wed Dec 9 14:09:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
nIters 1
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc
mri_convert /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS/Patient_043/mri/brainmask.mgz ./tmp.bbregister.5006/fslregister/refvol.fslregister.nii
mri_convert /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS/Patient_043/mri/brainmask.mgz ./tmp.bbregister.5006/fslregister/refvol.fslregister.nii 
$Id: mri_convert.c,v 1.179.2.7 2012/09/05 21:55:16 mreuter Exp $
reading from /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS/Patient_043/mri/brainmask.mgz...
TR=0.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (-1, -7.31961e-09, -3.49246e-09)
j_ras = (-3.49246e-10, 1.49012e-08, -1)
k_ras = (7.2032e-09, 1, 1.49012e-08)
writing to ./tmp.bbregister.5006/fslregister/refvol.fslregister.nii...
--------------------------------------
/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc
mri_convert ./tmp.bbregister.5006/template.nii ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii --frame 0
mri_convert ./tmp.bbregister.5006/template.nii ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii --frame 0 
$Id: mri_convert.c,v 1.179.2.7 2012/09/05 21:55:16 mreuter Exp $
reading from ./tmp.bbregister.5006/template.nii...
TR=1000.00, TE=0.00, TI=0.00, flip angle=0.00
i_ras = (0.979924, 0.195773, 0.0376993)
j_ras = (-0.199367, 0.961254, 0.190375)
k_ras = (0.0010318, -0.194069, 0.980987)
keeping frame 0
writing to ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii...
Mov determinant is 5.02197
Swapping dims for pos det
WARNING:: Flipping Left/Right orientation (as det < 0)
tkregister_tcl /software/freesurfer/freesurfer-5.3.0/tktools/tkregister2.tcl
target  volume ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii
movable volume ./tmp.bbregister.5006/template.nii
reg file       ./tmp.bbregister.5006/fslregister/swapreg.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.121.2.1 2011/03/28 20:25:16 greve Exp $
Diagnostic Level -1
INFO: loading target ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii
INFO: target does not conform to COR format, so I'm going to
reslice to COR. This will not affect the final registration.
Ttarg: --------------------
-1.000   0.000   0.000   128.000;
 0.000   0.000   1.000  -128.000;
 0.000  -1.000   0.000   128.000;
 0.000   0.000   0.000   1.000;
INFO: loading movable ./tmp.bbregister.5006/template.nii
Tmov: --------------------
-1.719   0.000   0.000   110.000;
 0.000   0.000   1.700  -76.500;
 0.000  -1.719   0.000   110.000;
 0.000   0.000   0.000   1.000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
-0.980  -0.196  -0.038   1.719;
 0.001  -0.194   0.981   0.000;
 0.199  -0.961  -0.190   0.000;
 0.000   0.000   0.000   1.000;
---------------------------------------
---- Input registration matrix --------
-0.980  -0.196  -0.038   1.719;
 0.001  -0.194   0.981   0.000;
 0.199  -0.961  -0.190   0.000;
 0.000   0.000   0.000   1.000;
Determinant -1
subject = subject-unknown
RegMat ---------------------------
-1.000   0.000  -0.000   1.719;
 0.000   1.000   0.000  -0.000;
-0.000   0.000   1.000  -0.000;
 0.000   0.000   0.000   1.000;
/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc
tkregister2_cmdl --mov ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.5006/fslregister/reg0.5113.dat --regheader --fslregout ./tmp.bbregister.5006/reg.init.dat.fsl.mat0 --s Patient_043 --noedit
tkregister_tcl /software/freesurfer/freesurfer-5.3.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.5006/fslregister/reg0.5113.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.121.2.1 2011/03/28 20:25:16 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS/Patient_043/mri/orig.mgz
Ttarg: --------------------
-1.000   0.000   0.000   128.000;
 0.000   0.000   1.000  -128.000;
 0.000  -1.000   0.000   128.000;
 0.000   0.000   0.000   1.000;
INFO: loading movable ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.719   0.000   0.000   110.000;
 0.000   0.000   1.700  -76.500;
 0.000  -1.719   0.000   110.000;
 0.000   0.000   0.000   1.000;
mkheaderreg = 1, float2int = 0
Computing reg from header (and possibly input matrix)
---- Input registration matrix (computed) --------
 0.980   0.196   0.038   1.199;
 0.001  -0.194   0.981  -0.035;
 0.199  -0.961  -0.190  -10.265;
 0.000   0.000   0.000   1.000;
---------------------------------------
---- Input registration matrix --------
 0.980   0.196   0.038   1.199;
 0.001  -0.194   0.981  -0.035;
 0.199  -0.961  -0.190  -10.265;
 0.000   0.000   0.000   1.000;
Determinant 1
subject = Patient_043
RegMat ---------------------------
 0.980   0.196   0.038   1.199;
 0.001  -0.194   0.981  -0.035;
 0.199  -0.961  -0.190  -10.265;
 0.000   0.000   0.000   1.000;
FSLOUTPUTTYPE NIFTI 
tkreg2FSL: mov det = -5.02197, ref det = -1
Wed Mar 15 05:24:01 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc
flirt.fsl -ref ./tmp.bbregister.5006/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.5006/fslregister/fslmat0.trans.mat -schedule /software/fsl/fsl-5.0.9_eddy/fsl/etc/flirtsch/xyztrans.sch -init ./tmp.bbregister.5006/reg.init.dat.fsl.mat0
Wed Mar 15 05:24:18 AEST 2017
/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc
flirt.fsl -ref ./tmp.bbregister.5006/fslregister/refvol.fslregister.nii -in ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii -bins 256 -cost corratio -dof 6 -searchrx -90 90 -searchry -90 90 -searchrz -90 90 -verbose 0 -omat ./tmp.bbregister.5006/reg.init.dat.fsl.mat -init ./tmp.bbregister.5006/fslregister/fslmat0.trans.mat -schedule /software/freesurfer/freesurfer-5.3.0/bin/flirt.newdefault.20080811.sch
tkregister2_cmdl --s Patient_043 --mov ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii --reg ./tmp.bbregister.5006/reg.init.dat --fslreg ./tmp.bbregister.5006/reg.init.dat.fsl.mat --noedit
tkregister_tcl /software/freesurfer/freesurfer-5.3.0/tktools/tkregister2.tcl
---- FSL registration matrix --------
 0.985   0.175   0.011  -1.649;
 0.042  -0.175  -0.984   222.880;
-0.170   0.969  -0.180   44.167;
 0.000   0.000   0.000   1.000;
---------------------------------------
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii
reg file       ./tmp.bbregister.5006/reg.init.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.121.2.1 2011/03/28 20:25:16 greve Exp $
Diagnostic Level -1
INFO: loading target /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS/Patient_043/mri/orig.mgz
Ttarg: --------------------
-1.000   0.000   0.000   128.000;
 0.000   0.000   1.000  -128.000;
 0.000  -1.000   0.000   128.000;
 0.000   0.000   0.000   1.000;
INFO: loading movable ./tmp.bbregister.5006/fslregister/movvol.fslregister.nii
Tmov: --------------------
-1.719   0.000   0.000   110.000;
 0.000   0.000   1.700  -76.500;
 0.000  -1.719   0.000   110.000;
 0.000   0.000   0.000   1.000;
mkheaderreg = 0, float2int = 0
FSLOUTPUTTYPE NIFTI 
fsl2TkReg: mov det = -5.02197, ref det = -1
---- Input registration matrix (computed) --------
 0.985   0.170   0.042   0.582;
-0.011  -0.180   0.984   3.204;
 0.175  -0.969  -0.175  -10.474;
 0.000   0.000   0.000   1.000;
---------------------------------------
---- Input registration matrix --------
 0.985   0.170   0.042   0.582;
-0.011  -0.180   0.984   3.204;
 0.175  -0.969  -0.175  -10.474;
 0.000   0.000   0.000   1.000;
Determinant 1
subject = Patient_043
RegMat ---------------------------
 0.985   0.170   0.042   0.582;
-0.011  -0.180   0.984   3.204;
 0.175  -0.969  -0.175  -10.474;
 0.000   0.000   0.000   1.000;
mri_matrix_multiply -im ./tmp.bbregister.5006/fslregister/swapreg.dat -im ./tmp.bbregister.5006/reg.init.dat -om ./tmp.bbregister.5006/reg.init.dat
(standard_in) 1: illegal character: P
 
Started at Wed Mar 15 05:23:57 AEST 2017 
Ended   at Wed Mar 15 05:24:39 AEST 2017
 
fslregister Done
 
To check results, run:
tkregister2 --mov ./tmp.bbregister.5006/template.nii --reg ./tmp.bbregister.5006/reg.init.dat --surf orig
 
mri_segreg --mov ./tmp.bbregister.5006/template.nii --init-reg ./tmp.bbregister.5006/reg.init.dat --out-reg ./tmp.bbregister.5006/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.103.2.1 2011/10/07 19:14:42 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc
mri_segreg --mov ./tmp.bbregister.5006/template.nii --init-reg ./tmp.bbregister.5006/reg.init.dat --out-reg ./tmp.bbregister.5006/bbr.pass1.dat --subsamp-brute 100 --subsamp 100 --tol 1e-4 --tol1d 1e-3 --brute -4 4 4 --surf white --gm-proj-frac 0.5 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode040.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.5006/template.nii
regfile ./tmp.bbregister.5006/reg.init.dat
subject Patient_043
dof 6
outregfile ./tmp.bbregister.5006/bbr.pass1.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 100
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000100
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1490057122
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.985  -0.170  -0.042   1.137;
-0.011  -0.180   0.984   3.204;
 0.175  -0.969  -0.175  -10.474;
 0.000   0.000   0.000   1.000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness
Projecting RH Surfs
Computing relative cost
 0  -25.0 -25.0 -25.0   0.998520
 1  -25.0 -25.0  25.0   0.968676
 2  -25.0  25.0 -25.0   0.994166
 3  -25.0  25.0  25.0   1.009679
 4   25.0 -25.0 -25.0   0.979560
 5   25.0 -25.0  25.0   0.961216
 6   25.0  25.0 -25.0   0.987319
 7   25.0  25.0  25.0   0.983318
REL:  8  0.255603    7.882455  0.985307 rel = 0.259415 
Initial costs ----------------
Number of surface hits 2489
WM  Intensity   328.9499 +/-  82.9828
Ctx Intensity   512.8796 +/- 211.6289
Pct Contrast     37.8648 +/-  35.3467
Cost   0.2556
RelCost   0.2594

------------------------------------
Brute force preopt -4 4 4, n = 729
     0  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000      0.9856   0.9856  0.0
     1  -4.0000  -4.0000  -4.0000  -4.0000  -4.0000   0.0000      0.9449   0.9449  0.0
     7  -4.0000  -4.0000  -4.0000  -4.0000   4.0000   0.0000      0.9012   0.9012  0.0
    12  -4.0000  -4.0000  -4.0000   0.0000   0.0000  -4.0000      0.8893   0.8893  0.0
    15  -4.0000  -4.0000  -4.0000   0.0000   4.0000  -4.0000      0.7708   0.7708  0.0
    21  -4.0000  -4.0000  -4.0000   4.0000   0.0000  -4.0000      0.7539   0.7539  0.0
   120  -4.0000   0.0000   0.0000   0.0000   0.0000  -4.0000      0.7103   0.7103  0.0
   265   0.0000  -4.0000  -4.0000   4.0000   0.0000   0.0000      0.7022   0.7022  0.0
   274   0.0000  -4.0000   0.0000  -4.0000   0.0000   0.0000      0.6271   0.6271  0.0
   283   0.0000  -4.0000   0.0000   0.0000   0.0000   0.0000      0.5524   0.5524  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.2556   0.2556  0.0
Brute Force --------------------------
Min cost was 0.255603
Number of iterations   729
Search time 1.704000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
   7 -0.028  0.000  0.000  0.000  0.000  0.000   0.2553148526
  10 -0.022  0.000  0.000  0.000  0.000  0.000   0.2552699221
  12 -0.019  0.000  0.000  0.000  0.000  0.000   0.2552587213
  13 -0.018  0.000  0.000  0.000  0.000  0.000   0.2552579046
  17 -0.018 -1.618  0.000  0.000  0.000  0.000   0.1342075854
  18 -0.018 -1.391  0.000  0.000  0.000  0.000   0.1262696791
  21 -0.018 -1.188  0.000  0.000  0.000  0.000   0.1243775849
  23 -0.018 -1.197  0.000  0.000  0.000  0.000   0.1242659272
  24 -0.018 -1.208  0.000  0.000  0.000  0.000   0.1242359052
  25 -0.018 -1.205  0.000  0.000  0.000  0.000   0.1242234901
  26 -0.018 -1.204  0.000  0.000  0.000  0.000   0.1242217702
  35 -0.018 -1.204 -0.028  0.000  0.000  0.000   0.1241684356
  36 -0.018 -1.204 -0.025  0.000  0.000  0.000   0.1241646266
  37 -0.018 -1.204 -0.022  0.000  0.000  0.000   0.1241627766
  44 -0.018 -1.204 -0.022 -0.618  0.000  0.000   0.1031258079
  46 -0.018 -1.204 -0.022 -0.524  0.000  0.000   0.1012757810
  47 -0.018 -1.204 -0.022 -0.390  0.000  0.000   0.0981101684
  50 -0.018 -1.204 -0.022 -0.414  0.000  0.000   0.0977255123
  54 -0.018 -1.204 -0.022 -0.417  0.000  0.000   0.0977185231
  63 -0.018 -1.204 -0.022 -0.417 -0.057  0.000   0.0965527842
  66 -0.018 -1.204 -0.022 -0.417 -0.041  0.000   0.0963820591
  67 -0.018 -1.204 -0.022 -0.417 -0.042  0.000   0.0963782971
  68 -0.018 -1.204 -0.022 -0.417 -0.043  0.000   0.0963755575
  70 -0.018 -1.204 -0.022 -0.417 -0.044  0.000   0.0963747557
  77 -0.018 -1.204 -0.022 -0.417 -0.044  0.382   0.0857669948
  80 -0.018 -1.204 -0.022 -0.417 -0.044  0.494   0.0841783315
  83 -0.018 -1.204 -0.022 -0.417 -0.044  0.486   0.0841536982
  84 -0.018 -1.204 -0.022 -0.417 -0.044  0.487   0.0841530447
  93 -0.021 -1.393 -0.025 -0.482 -0.051  0.563   0.0783923431
  95 -0.021 -1.383 -0.025 -0.479 -0.051  0.560   0.0783010288
  97 -0.021 -1.357 -0.024 -0.470 -0.050  0.549   0.0781479110
  99 -0.021 -1.351 -0.024 -0.468 -0.050  0.546   0.0781427928
 111  0.031 -1.351 -0.024 -0.468 -0.050  0.546   0.0762419232
 112  0.039 -1.351 -0.024 -0.468 -0.050  0.546   0.0761306150
 114  0.042 -1.351 -0.024 -0.468 -0.050  0.546   0.0761201055
 115  0.043 -1.351 -0.024 -0.468 -0.050  0.546   0.0761200606
 126  0.043 -1.351 -0.024 -0.468 -0.050  0.545   0.0761161241
 127  0.043 -1.351 -0.024 -0.468 -0.050  0.544   0.0761147370
 135  0.043 -1.351  0.160 -0.468 -0.050  0.544   0.0726218753
 136  0.043 -1.351  0.161 -0.468 -0.050  0.544   0.0726059898
 138  0.043 -1.351  0.175 -0.468 -0.050  0.544   0.0725042731
 140  0.043 -1.351  0.176 -0.468 -0.050  0.544   0.0725026223
 141  0.043 -1.351  0.177 -0.468 -0.050  0.544   0.0725024039
 149  0.043 -1.351  0.177 -0.638 -0.050  0.544   0.0687605038
 151  0.043 -1.351  0.177 -0.647 -0.050  0.544   0.0687345719
 155  0.043 -1.351  0.177 -0.655 -0.050  0.544   0.0687297677
 156  0.043 -1.351  0.177 -0.654 -0.050  0.544   0.0687293511
 157  0.043 -1.351  0.177 -0.653 -0.050  0.544   0.0687286734
 167  0.043 -1.351  0.177 -0.653 -0.038  0.544   0.0685681187
 170  0.043 -1.351  0.177 -0.653 -0.017  0.544   0.0685435330
 171  0.043 -1.351  0.177 -0.653 -0.026  0.544   0.0685205615
 172  0.043 -1.351  0.177 -0.653 -0.025  0.544   0.0685198432
 180  0.041 -1.425  0.176 -0.679 -0.028  0.574   0.0665447843
 181  0.041 -1.468  0.175 -0.694 -0.029  0.591   0.0665431270
 182  0.041 -1.446  0.176 -0.686 -0.029  0.582   0.0663729802
 184  0.041 -1.449  0.175 -0.687 -0.029  0.583   0.0663701159
 186  0.041 -1.450  0.175 -0.687 -0.029  0.584   0.0663698587
 196  0.056 -1.450  0.175 -0.687 -0.029  0.584   0.0659561087
 197  0.083 -1.450  0.175 -0.687 -0.029  0.584   0.0657770678
 199  0.080 -1.450  0.175 -0.687 -0.029  0.584   0.0657683009
 200  0.074 -1.450  0.175 -0.687 -0.029  0.584   0.0657664211
 202  0.077 -1.450  0.175 -0.687 -0.029  0.584   0.0657637533
 213  0.077 -1.450  0.175 -0.687 -0.029  0.588   0.0657350818
 214  0.077 -1.450  0.175 -0.687 -0.029  0.593   0.0657165406
 215  0.077 -1.450  0.175 -0.687 -0.029  0.595   0.0657163071
 223  0.077 -1.450  0.275 -0.687 -0.029  0.595   0.0646696773
 224  0.077 -1.450  0.285 -0.687 -0.029  0.595   0.0644386202
 226  0.077 -1.450  0.324 -0.687 -0.029  0.595   0.0637179758
 230  0.077 -1.450  0.322 -0.687 -0.029  0.595   0.0637141895
 231  0.077 -1.450  0.321 -0.687 -0.029  0.595   0.0637140445
 241  0.077 -1.450  0.321 -0.671 -0.029  0.595   0.0632114206
 242  0.077 -1.450  0.321 -0.665 -0.029  0.595   0.0631337950
 244  0.077 -1.450  0.321 -0.663 -0.029  0.595   0.0631311717
 256  0.077 -1.450  0.321 -0.663 -0.033  0.595   0.0631206875
 268  0.077 -1.449  0.322 -0.663 -0.033  0.594   0.0631204726
 276  0.150 -1.449  0.322 -0.663 -0.033  0.594   0.0631061071
 278  0.268 -1.449  0.322 -0.663 -0.033  0.594   0.0629856389
 284  0.261 -1.449  0.322 -0.663 -0.033  0.594   0.0629798126
 285  0.264 -1.449  0.322 -0.663 -0.033  0.594   0.0629735190
 294  0.264 -1.449  0.322 -0.663 -0.033  0.569   0.0629452765
 295  0.264 -1.449  0.322 -0.663 -0.033  0.575   0.0629139439
 296  0.264 -1.449  0.322 -0.663 -0.033  0.580   0.0628921199
 297  0.264 -1.449  0.322 -0.663 -0.033  0.585   0.0628870094
 298  0.264 -1.449  0.322 -0.663 -0.033  0.584   0.0628849865
 308  0.264 -1.449  0.315 -0.663 -0.033  0.584   0.0628464629
 318  0.264 -1.449  0.315 -0.724 -0.033  0.584   0.0618050621
 321  0.264 -1.449  0.315 -0.700 -0.033  0.584   0.0617406695
 322  0.264 -1.449  0.315 -0.704 -0.033  0.584   0.0617360255
 323  0.264 -1.449  0.315 -0.705 -0.033  0.584   0.0617354538
 331  0.264 -1.449  0.315 -0.705 -0.180  0.584   0.0617337534
 337  0.264 -1.449  0.315 -0.705 -0.169  0.584   0.0617268339
 339  0.264 -1.449  0.315 -0.705 -0.173  0.584   0.0617205175
 340  0.264 -1.449  0.315 -0.705 -0.174  0.584   0.0617204882
 348  0.263 -1.472  0.315 -0.713 -0.175  0.593   0.0612333549
 350  0.263 -1.491  0.315 -0.720 -0.176  0.601   0.0611167150
 351  0.263 -1.487  0.315 -0.719 -0.176  0.599   0.0611092447
 361  0.188 -1.487  0.315 -0.719 -0.176  0.599   0.0610596716
 368  0.176 -1.487  0.315 -0.719 -0.176  0.599   0.0609412109
 370  0.174 -1.487  0.315 -0.719 -0.176  0.599   0.0609341485
 382  0.174 -1.487  0.315 -0.719 -0.176  0.601   0.0609304621
 385  0.174 -1.487  0.315 -0.719 -0.176  0.605   0.0609281613
 386  0.174 -1.487  0.315 -0.719 -0.176  0.606   0.0609280773
 394  0.174 -1.487  0.273 -0.719 -0.176  0.606   0.0604872741
 396  0.174 -1.487  0.280 -0.719 -0.176  0.606   0.0604365393
 397  0.174 -1.487  0.283 -0.719 -0.176  0.606   0.0604259603
 398  0.174 -1.487  0.285 -0.719 -0.176  0.606   0.0604253230
 408  0.174 -1.487  0.285 -0.712 -0.176  0.606   0.0604001542
 409  0.174 -1.487  0.285 -0.711 -0.176  0.606   0.0603996530
 419  0.174 -1.487  0.285 -0.711 -0.139  0.606   0.0600404429
 422  0.174 -1.487  0.285 -0.711 -0.137  0.606   0.0600343238
 424  0.174 -1.487  0.285 -0.711 -0.135  0.606   0.0600280607
 435  0.174 -1.480  0.285 -0.708 -0.134  0.603   0.0600120605
 436  0.174 -1.482  0.285 -0.709 -0.134  0.604   0.0600092009
 445  0.186 -1.482  0.285 -0.709 -0.134  0.604   0.0597420248
 460  0.186 -1.482  0.285 -0.709 -0.134  0.600   0.0597304521
 470  0.186 -1.482  0.282 -0.709 -0.134  0.600   0.0597206772
 471  0.186 -1.482  0.276 -0.709 -0.134  0.600   0.0597120814
 472  0.186 -1.482  0.275 -0.709 -0.134  0.600   0.0597120736
 480  0.186 -1.482  0.275 -0.731 -0.134  0.600   0.0594567881
 482  0.186 -1.482  0.275 -0.738 -0.134  0.600   0.0594312650
 483  0.186 -1.482  0.275 -0.740 -0.134  0.600   0.0594299773
 494  0.186 -1.482  0.275 -0.740 -0.142  0.600   0.0594081098
 495  0.186 -1.482  0.275 -0.740 -0.141  0.600   0.0594047900
 496  0.186 -1.482  0.275 -0.740 -0.140  0.600   0.0594042049
 506  0.186 -1.486  0.275 -0.742 -0.140  0.601   0.0593262899
 507  0.186 -1.500  0.275 -0.747 -0.140  0.607   0.0592699413
 508  0.186 -1.496  0.275 -0.745 -0.140  0.605   0.0592511091
 521  0.193 -1.496  0.275 -0.745 -0.140  0.605   0.0591971872
 522  0.192 -1.496  0.275 -0.745 -0.140  0.605   0.0591954414
 534  0.192 -1.496  0.275 -0.745 -0.140  0.608   0.0591941326
 537  0.192 -1.496  0.275 -0.745 -0.140  0.607   0.0591933440
 547  0.192 -1.496  0.274 -0.745 -0.140  0.607   0.0591922437
 580  0.192 -1.498  0.274 -0.746 -0.140  0.608   0.0591893856
 588  0.194 -1.498  0.273 -0.746 -0.140  0.608   0.0591851515
 590  0.194 -1.498  0.273 -0.746 -0.140  0.608   0.0591851072
 594  0.194 -1.498  0.273 -0.746 -0.140  0.608   0.0591848324
 632  0.194 -1.498  0.274 -0.746 -0.140  0.608   0.0591847081
Powell done niters = 7
Computing relative cost
 0  -25.0 -25.0 -25.0   0.993212
 1  -25.0 -25.0  25.0   0.979680
 2  -25.0  25.0 -25.0   0.990942
 3  -25.0  25.0  25.0   1.008782
 4   25.0 -25.0 -25.0   0.971573
 5   25.0 -25.0  25.0   0.970611
 6   25.0  25.0 -25.0   1.008653
 7   25.0  25.0  25.0   0.976130
REL:  8  0.059185    7.899584  0.987448 rel = 0.059937 
Number of iterations     7
Min cost was 0.059185
Number of FunctionCalls   669
TolPowell 0.000100
nMaxItersPowell 36
OptimizationTime 0.990000 sec
Parameters at optimum (transmm)  0.19382 -1.49813  0.27444
Parameters at optimum (rotdeg) -0.74603 -0.14024  0.60834 
Final costs ----------------
Number of surface hits 2489
WM  Intensity   310.4078 +/-  60.8070
Ctx Intensity   481.2695 +/- 126.6530
Pct Contrast     41.1700 +/-  23.0579
Cost   0.0592
RelCost   0.2594
Reg at min cost was 
-0.985  -0.165  -0.052   1.324;
-0.019  -0.194   0.981   1.581;
 0.172  -0.967  -0.188  -10.238;
 0.000   0.000   0.000   1.000;

Writing optimal reg to ./tmp.bbregister.5006/bbr.pass1.dat, type = 14 
Original Reg 
-0.985  -0.170  -0.042   1.137;
-0.011  -0.180   0.984   3.204;
 0.175  -0.969  -0.175  -10.474;
 0.000   0.000   0.000   1.000;

Original Reg - Optimal Reg
 0.000  -0.004   0.010  -0.187;
 0.008   0.014   0.003   1.623;
 0.002  -0.002   0.013  -0.236;
 0.000   0.000   0.000   0.000;

Computing change in lh position
LH rmsDiffMean 1.114188
Computing change in rh position
Surface RMS Diff (mm) 1.388822 2.705634
mri_segreg done
mri_segreg --mov ./tmp.bbregister.5006/template.nii --init-reg ./tmp.bbregister.5006/bbr.pass1.dat --out-reg register.dat --brute -0.1 0.1 0.1 --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --cur-reg ./tmp.bbregister.5006/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5
$Id: mri_segreg.c,v 1.103.2.1 2011/10/07 19:14:42 greve Exp $
setenv SUBJECTS_DIR /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS
cd /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc
mri_segreg --mov ./tmp.bbregister.5006/template.nii --init-reg ./tmp.bbregister.5006/bbr.pass1.dat --out-reg register.dat --brute -0.1 0.1 0.1 --interp trilinear --wm-proj-abs 2 --tol 1e-8 --tol1d 1e-3 --c0 0 --mincost register.dat.mincost --dof 6 --nmax 36 --param register.dat.param --surf white --cur-reg ./tmp.bbregister.5006/reg.curopt.dat --gm-proj-frac 0.5 --nsub 1 --gm-gt-wm 0.5 
sysname  Linux
hostname hpcnode040.adqimr.ad.lan
machine  x86_64
user     alistaiP
movvol ./tmp.bbregister.5006/template.nii
regfile ./tmp.bbregister.5006/bbr.pass1.dat
subject Patient_043
dof 6
outregfile register.dat
UseMask 0
UseLH 1
UseRH 1
nsubsamp 1
PenaltySign  -1
PenaltySlope 0.500000
PenaltyCenter 0.000000
surfname white
GMProjFrac 0.500000
WMProjAbs 2.000000
lhcostfile (null)
rhcostfile (null)
interp  trilinear (1)
frame  0
TolPowell 0.000000
nMaxItersPowell 36
n1dmin  3
Profile   0
Gdiag_no  -1
AddNoise  0 (0)
SynthSeed 1489721853
TransRandMax 0.000000
RotRandMax 0.000000
Translations 0.000000 0.000000 0.000000
Rotations   0.000000 0.000000 0.000000
Input reg
-0.985  -0.165  -0.052   1.324;
-0.019  -0.194   0.981   1.581;
 0.172  -0.967  -0.188  -10.238;
 0.000   0.000   0.000   1.000;

Loading mov
Projecting LH Surfs
Loading lh.white surf
Loading lh.thickness for GM
GM Proj: 1 0.500000 2.000000
WM Proj: 0 0.500000 2.000000
Projecting RH Surfs
Loading rh.white surf
Loading rh.thickness
Projecting RH Surfs
Computing relative cost
 0  -25.0 -25.0 -25.0   1.015795
 1  -25.0 -25.0  25.0   0.984258
 2  -25.0  25.0 -25.0   1.000804
 3  -25.0  25.0  25.0   1.000982
 4   25.0 -25.0 -25.0   0.972255
 5   25.0 -25.0  25.0   0.984784
 6   25.0  25.0 -25.0   1.004950
 7   25.0  25.0  25.0   0.985489
REL:  8  0.081664    7.949316  0.993665 rel = 0.0821842 
Initial costs ----------------
Number of surface hits 248080
WM  Intensity   309.8328 +/-  62.5662
Ctx Intensity   480.6007 +/- 129.0930
Pct Contrast     41.0893 +/-  23.8524
Cost   0.0817
RelCost   0.0822

------------------------------------
Brute force preopt -0.1 0.1 0.1, n = 729
     0  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000  -0.1000      0.0708   0.0708  0.0
     3  -0.1000  -0.1000  -0.1000  -0.1000   0.0000  -0.1000      0.0688   0.0688  0.0
    30  -0.1000  -0.1000   0.0000  -0.1000   0.0000  -0.1000      0.0673   0.0673  0.0
    54  -0.1000  -0.1000   0.1000  -0.1000  -0.1000  -0.1000      0.0673   0.0673  0.0
    57  -0.1000  -0.1000   0.1000  -0.1000   0.0000  -0.1000      0.0665   0.0665  0.0
    93  -0.1000   0.0000  -0.1000   0.0000   0.0000  -0.1000      0.0655   0.0655  0.0
   117  -0.1000   0.0000   0.0000   0.0000  -0.1000  -0.1000      0.0655   0.0655  0.0
   120  -0.1000   0.0000   0.0000   0.0000   0.0000  -0.1000      0.0631   0.0631  0.0
   144  -0.1000   0.0000   0.1000   0.0000  -0.1000  -0.1000      0.0630   0.0630  0.0
   147  -0.1000   0.0000   0.1000   0.0000   0.0000  -0.1000      0.0627   0.0627  0.0
   360   0.0000   0.0000   0.0000   0.0000  -0.1000  -0.1000      0.0621   0.0621  0.0
   363   0.0000   0.0000   0.0000   0.0000   0.0000  -0.1000      0.0609   0.0609  0.0
   364   0.0000   0.0000   0.0000   0.0000   0.0000   0.0000      0.0592   0.0592  0.0
Brute Force --------------------------
Min cost was 0.059185
Number of iterations   729
Search time 0.877000 sec
Parameters at best (transmm, rotdeg)
  0.000   0.000   0.000  0.000  0.000  0.000 
--------------------------------------------

Starting Powell Minimization
Init Powel Params dof = 6
0 0
1 0
2 0
3 0
4 0
5 0
   7  0.029  0.000  0.000  0.000  0.000  0.000   0.0816322643
   8  0.021  0.000  0.000  0.000  0.000  0.000   0.0816256074
   9  0.020  0.000  0.000  0.000  0.000  0.000   0.0816254426
  17  0.020 -0.094  0.000  0.000  0.000  0.000   0.0811194033
  18  0.020 -0.076  0.000  0.000  0.000  0.000   0.0810800189
  29  0.020 -0.076 -0.022  0.000  0.000  0.000   0.0810648697
  30  0.020 -0.076 -0.021  0.000  0.000  0.000   0.0810643701
  31  0.020 -0.076 -0.017  0.000  0.000  0.000   0.0810635011
  34  0.020 -0.076 -0.016  0.000  0.000  0.000   0.0810634790
  43  0.020 -0.076 -0.016  0.018  0.000  0.000   0.0810554083
  44  0.020 -0.076 -0.016  0.012  0.000  0.000   0.0810506326
  54  0.020 -0.076 -0.016  0.012 -0.008  0.000   0.0810435888
  56  0.020 -0.076 -0.016  0.012 -0.018  0.000   0.0810374772
  57  0.020 -0.076 -0.016  0.012 -0.029  0.000   0.0810359324
  58  0.020 -0.076 -0.016  0.012 -0.027  0.000   0.0810341154
  59  0.020 -0.076 -0.016  0.012 -0.024  0.000   0.0810339454
  61  0.020 -0.076 -0.016  0.012 -0.025  0.000   0.0810338503
  68  0.020 -0.076 -0.016  0.012 -0.025 -0.161   0.0792435110
  69  0.020 -0.076 -0.016  0.012 -0.025 -0.167   0.0792014557
  71  0.020 -0.076 -0.016  0.012 -0.025 -0.204   0.0790698386
  82 -0.056 -0.076 -0.016  0.012 -0.025 -0.204   0.0790010374
  83 -0.022 -0.076 -0.016  0.012 -0.025 -0.204   0.0789730145
  85 -0.006 -0.076 -0.016  0.012 -0.025 -0.204   0.0789671508
  86 -0.010 -0.076 -0.016  0.012 -0.025 -0.204   0.0789645330
  89 -0.011 -0.076 -0.016  0.012 -0.025 -0.204   0.0789644259
  96 -0.011 -0.067 -0.016  0.012 -0.025 -0.204   0.0789496758
  97 -0.011 -0.063 -0.016  0.012 -0.025 -0.204   0.0789425455
 100 -0.011 -0.062 -0.016  0.012 -0.025 -0.204   0.0789410407
 102 -0.011 -0.053 -0.016  0.012 -0.025 -0.204   0.0789342240
 103 -0.011 -0.052 -0.016  0.012 -0.025 -0.204   0.0789341286
 111 -0.011 -0.052 -0.049  0.012 -0.025 -0.204   0.0788524994
 112 -0.011 -0.052 -0.055  0.012 -0.025 -0.204   0.0788498704
 124 -0.011 -0.052 -0.054  0.009 -0.025 -0.204   0.0788449157
 127 -0.011 -0.052 -0.054  0.003 -0.025 -0.204   0.0788400473
 137 -0.011 -0.052 -0.054  0.003 -0.005 -0.204   0.0788077649
 148 -0.011 -0.052 -0.054  0.003 -0.005 -0.217   0.0787929755
 149 -0.011 -0.052 -0.054  0.003 -0.005 -0.220   0.0787921469
 150 -0.011 -0.052 -0.054  0.003 -0.005 -0.221   0.0787916869
 152 -0.011 -0.052 -0.054  0.003 -0.005 -0.224   0.0787914270
 154 -0.011 -0.052 -0.054  0.003 -0.005 -0.223   0.0787913868
 162 -0.070 -0.052 -0.054  0.003 -0.005 -0.223   0.0787477945
 163 -0.044 -0.052 -0.054  0.003 -0.005 -0.223   0.0786676675
 174 -0.044 -0.053 -0.054  0.003 -0.005 -0.223   0.0786674684
 182 -0.044 -0.053 -0.040  0.003 -0.005 -0.223   0.0786671857
 183 -0.044 -0.053 -0.047  0.003 -0.005 -0.223   0.0786642543
 185 -0.044 -0.053 -0.046  0.003 -0.005 -0.223   0.0786641872
 195 -0.044 -0.053 -0.046 -0.001 -0.005 -0.223   0.0786593875
 197 -0.044 -0.053 -0.046 -0.005 -0.005 -0.223   0.0786584573
 206 -0.044 -0.053 -0.046 -0.005  0.030 -0.223   0.0786555661
 207 -0.044 -0.053 -0.046 -0.005  0.013 -0.223   0.0786242640
 217 -0.044 -0.053 -0.046 -0.005  0.013 -0.238   0.0786177530
 218 -0.044 -0.053 -0.046 -0.005  0.013 -0.234   0.0786173818
 219 -0.044 -0.053 -0.046 -0.005  0.013 -0.235   0.0786173435
 221 -0.078 -0.054 -0.038 -0.012  0.032 -0.247   0.0785916896
 230 -0.075 -0.054 -0.038 -0.012  0.030 -0.246   0.0785916427
 236 -0.075 -0.054 -0.039 -0.012  0.030 -0.246   0.0785916356
 246 -0.075 -0.054 -0.039 -0.012  0.030 -0.235   0.0785837310
 256 -0.075 -0.067 -0.039 -0.012  0.030 -0.235   0.0785681487
 257 -0.075 -0.066 -0.039 -0.012  0.030 -0.235   0.0785680416
 266 -0.075 -0.066 -0.042 -0.012  0.030 -0.235   0.0785676152
 267 -0.075 -0.066 -0.041 -0.012  0.030 -0.235   0.0785675939
 278 -0.075 -0.066 -0.041 -0.013  0.030 -0.235   0.0785675879
 279 -0.075 -0.066 -0.041 -0.014  0.030 -0.235   0.0785675685
 288 -0.075 -0.066 -0.041 -0.014  0.032 -0.235   0.0785665411
 289 -0.075 -0.066 -0.041 -0.014  0.033 -0.235   0.0785658863
 291 -0.075 -0.066 -0.041 -0.014  0.034 -0.235   0.0785657041
 299 -0.072 -0.066 -0.042 -0.013  0.033 -0.234   0.0785655726
 300 -0.073 -0.066 -0.042 -0.013  0.033 -0.234   0.0785654796
 301 -0.073 -0.066 -0.042 -0.013  0.033 -0.234   0.0785653601
 314 -0.073 -0.066 -0.042 -0.013  0.033 -0.232   0.0785646084
 324 -0.073 -0.068 -0.042 -0.013  0.033 -0.232   0.0785642163
 334 -0.073 -0.068 -0.040 -0.013  0.033 -0.232   0.0785641101
 363 -0.072 -0.068 -0.040 -0.013  0.033 -0.231   0.0785639933
Powell done niters = 5
Computing relative cost
 0  -25.0 -25.0 -25.0   1.016326
 1  -25.0 -25.0  25.0   0.983067
 2  -25.0  25.0 -25.0   0.999600
 3  -25.0  25.0  25.0   1.000525
 4   25.0 -25.0 -25.0   0.972225
 5   25.0 -25.0  25.0   0.983677
 6   25.0  25.0 -25.0   1.007071
 7   25.0  25.0  25.0   0.986986
REL:  8  0.078564    7.949478  0.993685 rel = 0.0790633 
Number of iterations     5
Min cost was 0.078564
Number of FunctionCalls   433
TolPowell 0.000000
nMaxItersPowell 36
OptimizationTime 37.744000 sec
Parameters at optimum (transmm) -0.07227 -0.06824 -0.04019
Parameters at optimum (rotdeg) -0.01312  0.03287 -0.23144 
Final costs ----------------
Number of surface hits 248080
WM  Intensity   309.6041 +/-  62.3331
Ctx Intensity   479.4095 +/- 126.8254
Pct Contrast     41.0277 +/-  23.4800
Cost   0.0786
RelCost   0.0822
Reg at min cost was 
-0.985  -0.167  -0.048   1.252;
-0.015  -0.194   0.981   1.505;
 0.173  -0.967  -0.188  -10.279;
 0.000   0.000   0.000   1.000;

Writing optimal reg to register.dat, type = 14 
Original Reg 
-0.985  -0.165  -0.052   1.324;
-0.019  -0.194   0.981   1.581;
 0.172  -0.967  -0.188  -10.238;
 0.000   0.000   0.000   1.000;

Original Reg - Optimal Reg
-0.000   0.001  -0.004   0.072;
-0.004  -0.000  -0.000   0.076;
-0.001  -0.000   0.000   0.041;
 0.000   0.000   0.000   0.000;

Computing change in lh position
LH rmsDiffMean 0.208257
Computing change in rh position
Surface RMS Diff (mm) 0.163848 0.345523
mri_segreg done
tkregister2_cmdl --mov biasmeanb0bet.nii.gz --reg register.dat --noedit --fslregout diff2FS.mat
tkregister_tcl /software/freesurfer/freesurfer-5.3.0/tktools/tkregister2.tcl
INFO: no target volume specified, assuming FreeSurfer orig volume.
target  volume orig
movable volume biasmeanb0bet.nii.gz
reg file       register.dat
LoadVol        0
ZeroCRAS       0
$Id: tkregister2.c,v 1.121.2.1 2011/03/28 20:25:16 greve Exp $
Diagnostic Level -1
---- Input registration matrix --------
-0.985  -0.167  -0.048   1.252;
-0.015  -0.194   0.981   1.505;
 0.173  -0.967  -0.188  -10.279;
 0.000   0.000   0.000   1.000;
float2int = 0
---------------------------------------
INFO: loading target /working/lab_michaebr/alistaiP/diffusion-testing/PARK/FS/Patient_043/mri/orig.mgz
Ttarg: --------------------
-1.000   0.000   0.000   128.000;
 0.000   0.000   1.000  -128.000;
 0.000  -1.000   0.000   128.000;
 0.000   0.000   0.000   1.000;
INFO: loading movable biasmeanb0bet.nii.gz
Tmov: --------------------
-1.719   0.000   0.000   110.000;
 0.000   0.000   1.700  -76.500;
 0.000  -1.719   0.000   110.000;
 0.000   0.000   0.000   1.000;
mkheaderreg = 0, float2int = 0
---- Input registration matrix --------
-0.985  -0.167  -0.048   1.252;
-0.015  -0.194   0.981   1.505;
 0.173  -0.967  -0.188  -10.279;
 0.000   0.000   0.000   1.000;
Determinant -1
subject = Patient_043
RegMat ---------------------------
-0.985  -0.167  -0.048   1.252;
-0.015  -0.194   0.981   1.505;
 0.173  -0.967  -0.188  -10.279;
 0.000   0.000   0.000   1.000;
FSLOUTPUTTYPE NIFTI_GZ 
tkreg2FSL: mov det = 5.02197, ref det = -1
INFO: FSL2FreeSurfer: Mov volume is NIFTI with positive det,
      applying LR flip to registration matrix.
Cleaning up
 
Started at Wed Mar 15 05:23:57 AEST 2017 
Ended   at Wed Mar 15 05:25:41 AEST 2017
BBR-Run-Time-Sec 104
 
bbregister Done
To check results, run:
tkregister2 --mov biasmeanb0bet.nii.gz --reg register.dat --surf
 
dwi2response: [03;32m[0m
dwi2response: [03;32mNote that this script makes use of commands / algorithms that have relevant articles for citation. Please consult the help page (-help option) for more information.[0m
dwi2response: [03;32m[0m
dwi2response: [03;32mGenerated temporary directory: /tmp/dwi2response-tmp-VCNH87/[0m
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/biascorr.mif /tmp/dwi2response-tmp-VCNH87/dwi.mif -stride 0,0,0,1
[03;34mCommand:[0m mrconvert /mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc/biasmeanb0bet_mask.nii.gz /tmp/dwi2response-tmp-VCNH87/mask.mif -datatype bit
dwi2response: [03;32mChanging to temporary directory (/tmp/dwi2response-tmp-VCNH87/)[0m
dwi2response: [03;32m2 unique b-value(s) detected: 0,3000 with 12,90 volumes.[0m
[03;34mCommand:[0m maskfilter mask.mif erode eroded_mask.mif -npass 3
[03;34mCommand:[0m dwiextract dwi.mif -shell 0 dwi_b0.mif
[03;34mCommand:[0m mrmath dwi_b0.mif mean mean_b0.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b0.mif -finite mean_b0.mif 0 -if 0 -le err_b0.mif -datatype bit
[03;34mCommand:[0m dwiextract dwi.mif -shell 3000 dwi_b3000.mif
[03;34mCommand:[0m mrmath dwi_b3000.mif mean mean_b3000.mif -axis 3
[03;34mCommand:[0m mrcalc mean_b3000.mif -finite mean_b3000.mif 0 -if 0 -le err_b3000.mif -datatype bit
[03;34mCommand:[0m mrcalc mean_b0.mif mean_b3000.mif -divide -log sdm_b3000.mif
[03;34mCommand:[0m mrcalc sdm_b3000.mif 90 -mult 90 -divide full_sdm.mif
[03;34mCommand:[0m mrcalc full_sdm.mif -finite full_sdm.mif 0 -if 0 -le err_sdm.mif -datatype bit
[03;34mCommand:[0m mrcalc err_b0.mif err_b3000.mif -add err_sdm.mif -add 0 eroded_mask.mif -if safe_mask.mif -datatype bit
[03;34mCommand:[0m mrcalc safe_mask.mif full_sdm.mif 0 -if 10 -min safe_sdm.mif
[03;34mCommand:[0m dwi2tensor dwi.mif - -mask safe_mask.mif | tensor2metric - -fa safe_fa.mif -vector safe_vecs.mif -modulate none -mask safe_mask.mif
[03;34mCommand:[0m mrcalc safe_mask.mif safe_fa.mif 0 -if 0.2 -gt crude_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif 0 safe_mask.mif -if _crudenonwm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudenonwm.mif safe_sdm.mif 2.38531 -subtract 0 -if - | mrthreshold - - -mask _crudenonwm.mif | mrcalc _crudenonwm.mif - 0 -if crude_csf.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_csf.mif 0 _crudenonwm.mif -if crude_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.51196 -gt _crudewmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmhigh.mif 0 crude_wm.mif -if _crudewmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_wm.mif safe_sdm.mif 0 -if 1.95883 -gt _crudewmoutliers.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif 0 crude_wm.mif -if refined_wm.mif -datatype bit
[03;34mCommand:[0m mrcalc crude_gm.mif safe_sdm.mif 0 -if 1.98389 -gt _crudegmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif 0 crude_gm.mif -if _crudegmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhigh.mif safe_sdm.mif 1.98389 -subtract 0 -if - | mrthreshold - - -mask _crudegmhigh.mif -invert | mrcalc _crudegmhigh.mif - 0 -if _crudegmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmlow.mif safe_sdm.mif 1.98389 -subtract -neg 0 -if - | mrthreshold - - -mask _crudegmlow.mif -invert | mrcalc _crudegmlow.mif - 0 -if _crudegmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudegmhighselect.mif 1 _crudegmlowselect.mif -if refined_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudewmoutliers.mif safe_sdm.mif 0 -if 2.94935 -gt 1 crude_csf.mif -if _crudecsfextra.mif -datatype bit
[03;34mCommand:[0m mrcalc _crudecsfextra.mif safe_sdm.mif 2.94935 -subtract 0 -if - | mrthreshold - - -mask _crudecsfextra.mif | mrcalc _crudecsfextra.mif - 0 -if refined_csf.mif -datatype bit
dwi2response: [03;32mRunning 'tournier' algorithm to select 499 single-fibre WM voxels.[0m
[03;34mCommand:[0m dwi2response tournier dwi.mif _respsfwmss.txt -sf_voxels 499 -iter_voxels 4990 -mask refined_wm.mif -voxels voxels_sfwm.mif -quiet -tempdir /tmp/dwi2response-tmp-VCNH87/
[03;34mCommand:[0m mrcalc refined_gm.mif safe_sdm.mif 0 -if 1.9681 -gt _refinedgmhigh.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif 0 refined_gm.mif -if _refinedgmlow.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhigh.mif safe_sdm.mif 0 -if - | mrthreshold - - -bottom 651 -ignorezero | mrcalc _refinedgmhigh.mif - 0 -if _refinedgmhighselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmlow.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 651 -ignorezero | mrcalc _refinedgmlow.mif - 0 -if _refinedgmlowselect.mif -datatype bit
[03;34mCommand:[0m mrcalc _refinedgmhighselect.mif 1 _refinedgmlowselect.mif -if voxels_gm.mif -datatype bit
[03;34mCommand:[0m mrcalc refined_csf.mif safe_sdm.mif 0 -if - | mrthreshold - - -top 2698 -ignorezero | mrcalc refined_csf.mif - 0 -if voxels_csf.mif -datatype bit
dwi2response: [03;32mSummary of voxel counts:[0m
dwi2response: [03;32mMask: 332456 --> 268808 --> 268757[0m
dwi2response: [03;32mWM: 105326 --> 99792 --> 499 (SF)[0m
dwi2response: [03;32mGM: 106187 --> 65059 --> 1302[0m
dwi2response: [03;32mCSF: 57244 --> 26984 --> 2698[0m
[03;34mCommand:[0m amp2sh dwi_b0.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb0.txt
[03;34mCommand:[0m amp2sh dwi_b3000.mif - | sh2response - voxels_sfwm.mif safe_vecs.mif _respsfwmb3000.txt
[03;34mCommand:[0m mrcat crude_csf.mif crude_gm.mif crude_wm.mif crude.mif -axis 3
[03;34mCommand:[0m mrcat refined_csf.mif refined_gm.mif refined_wm.mif refined.mif -axis 3
[03;34mCommand:[0m mrcat voxels_csf.mif voxels_gm.mif voxels_sfwm.mif voxels.mif -axis 3
dwi2response: [03;32mChanging back to original directory (/mnt/lustre/working/lab_michaebr/alistaiP/diffusion-testing/PARK/Diff/Patient_043/preproc)[0m
dwi2response: [03;32mDeleting temporary directory /tmp/dwi2response-tmp-VCNH87/[0m
