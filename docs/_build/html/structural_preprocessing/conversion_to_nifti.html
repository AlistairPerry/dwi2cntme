
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Converting to NiFTI &#8212; diffusion-pipeline 1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="T1 Processing using FreeSurfer recon-all tool" href="t1_processing_in_freesurfer.html" />
    <link rel="prev" title="Welcome to SNG Diffusion Pipeline’s user documentation!" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="converting-to-nifti">
<h1>Converting to NiFTI<a class="headerlink" href="#converting-to-nifti" title="Permalink to this headline">¶</a></h1>
<p>To convert your structural (T1-weighted) scans from DICOMs (the format that will most likely come be given to you from the scanner), you will need to do the following:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> mrinfo HIRF_MRI/
<span class="go">mrinfo: [done] scanning DICOM folder &quot;HIRF_MRI&quot;</span>
<span class="go">Select series (&#39;q&#39; to abort):</span>
<span class="go"> 0 -  192 MR images 11:33:16 t1_mprage_sag_p2_iso (*tfl3d1_16ns) [6] ORIGINAL PRIMARY M ND NORM</span>
<span class="go"> 1 -   30 MR images 11:36:33 t2_tirm_tra_dark-fluid (*tir2d1_16) [7] ORIGINAL PRIMARY M ND NORM</span>
<span class="go"> 2 -   96 MR images 11:45:11 Mag_Images (*swi3d1r) [8] ORIGINAL PRIMARY M ND NORM</span>
<span class="go"> 3 -   96 MR images 11:45:12 Pha_Images (*swi3d1r) [9] ORIGINAL PRIMARY P ND</span>
<span class="go"> 4 -   89 MR images 11:45:23 mIP_Images(SW) (*swi3d1r) [10] ORIGINAL PRIMARY MNIP ND NORM</span>
</pre></div>
</div>
<p>?</p>
<p>You should then enter the integer corresponding to the image set of interest. For example, for the structural images in this study:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">...</span>

<span class="go">? 5</span>
<span class="go">mrinfo: [100%] reading DICOM series &quot;t1_mprage_sag_p2_iso&quot;</span>
<span class="go">************************************************</span>
<span class="go">Image:               &quot;15/MHS/94 PE002 (MHS94002) [MR] t1_mprage_sag_p2_iso&quot;</span>
<span class="go">************************************************</span>
<span class="go">  Dimensions:        192 x 256 x 256</span>
<span class="go">  Voxel size:        0.9 x 0.9375 x 0.9375</span>
<span class="go">  Data strides:      [ 3 -1 -2 ]</span>
<span class="go">  Format:            DICOM</span>
<span class="go">  Data type:         unsigned 16 bit integer (little endian)</span>
<span class="go">  Intensity scaling: offset = 0, multiplier = 1</span>
<span class="go">  Transform:               0.9963     0.01191     0.08533      -96.39</span>
<span class="go">                       -0.01386      0.9997     0.02238      -95.59</span>
<span class="go">                       -0.08503    -0.02348      0.9961      -93.81</span>
<span class="go">  EchoTime:          0.00232</span>
<span class="go">  PhaseEncodingDirection: j-</span>
<span class="go">  TotalReadoutTime:  0</span>
<span class="go">  comments:          15/MHS/94 PE002 (MHS94002) [MR] t1_mprage_sag_p2_iso</span>
<span class="go">                     study: Research Brain Christine&#39;s FMRI [ ORIGINAL PRIMARY M ND NORM ]</span>
<span class="go">                     DOS: 03/02/2016 11:33:16</span>
</pre></div>
</div>
<div class="section" id="processing-this-file-to-nifti">
<h2>Processing this file to NiFTI:<a class="headerlink" href="#processing-this-file-to-nifti" title="Permalink to this headline">¶</a></h2>
<p>Using the following command, we can convert our scanner images to the right format for use in the diffusion pipeline:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;0&quot;</span> <span class="p">|</span> mrconvert HIRF_MRI/ T1.nii -strides +1,2,3
<span class="go">mrconvert: [done] scanning DICOM folder &quot;HIRF_MRI/&quot;</span>
<span class="go">Select series (&#39;q&#39; to abort):</span>
<span class="go"> 0 -  192 MR images 11:33:16 t1_mprage_sag_p2_iso (*tfl3d1_16ns) [6] ORIGINAL PRIMARY M ND NORM</span>
<span class="go"> 1 -   30 MR images 11:36:33 t2_tirm_tra_dark-fluid (*tir2d1_16) [7] ORIGINAL PRIMARY M ND NORM</span>
<span class="go"> 2 -   96 MR images 11:45:11 Mag_Images (*swi3d1r) [8] ORIGINAL PRIMARY M ND NORM</span>
<span class="go"> 3 -   96 MR images 11:45:12 Pha_Images (*swi3d1r) [9] ORIGINAL PRIMARY P ND</span>
<span class="go"> 4 -   89 MR images 11:45:23 mIP_Images(SW) (*swi3d1r) [10] ORIGINAL PRIMARY MNIP ND NORM</span>
<span class="go">mrconvert: [100%] reading DICOM series &quot;t1_mprage_sag_p2_iso&quot;</span>
<span class="go">mrconvert: [100%] copying from &quot;15/MHS/94 ...) [MR] t1_mprage_sag_p2_iso&quot; to &quot;T1.nii&quot;</span>
</pre></div>
</div>
<p>We use the option <code class="docutils literal"><span class="pre">-strides</span> <span class="pre">+1,2,3</span></code> as it provides the orientation of the cardinal directions of images and +1,2,3 puts it in “radiographer’s” format. NOTE: This command is only valid for MRtrix release candidate 3.0. Otherwise use the option</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">-stride +1,2,3</span>
</pre></div>
</div>
<p>We can also pipe the output e.g.:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;0&quot;</span> <span class="p">|</span>
</pre></div>
</div>
<p>To automatically select our set of interest in the <code class="docutils literal"><span class="pre">mrconvert</span></code> command. This raw structural image (i.e. T1.nii) will need to be sent to our study directory in the following structure:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> tree my-working-dir/

<span class="go">|-- Raw</span>
<span class="go">|   `-- sub1</span>
<span class="go">|       |-- rawdataAP.mif</span>
<span class="go">|       |-- rawdataPA.mif</span>
<span class="go">        `-- T1.nii</span>
</pre></div>
</div>
<p>Where <code class="docutils literal"><span class="pre">sub1</span></code> is simply the name of your subject. If you have more than one subject, make sure they each have their own folder in the Raw directory with their corresponding raw files inside as above.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Welcome to SNG Diffusion Pipeline’s user documentation!</a></li>
      <li>Next: <a href="t1_processing_in_freesurfer.html" title="next chapter">T1 Processing using FreeSurfer recon-all tool</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Alistair Perry & Nikitas Koussis.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/structural_preprocessing/conversion_to_nifti.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>